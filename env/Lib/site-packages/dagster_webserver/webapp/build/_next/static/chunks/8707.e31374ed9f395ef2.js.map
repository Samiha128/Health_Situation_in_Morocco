{"version":3,"file":"static/chunks/8707.e31374ed9f395ef2.js","mappings":"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","sources":["webpack://_N_E/../ui-core/src/assets/auto-materialization/InstanceAutomaterializationEvaluationHistoryTable.tsx","webpack://_N_E/../ui-core/src/assets/auto-materialization/GlobalAutomaterializationContent.tsx","webpack://_N_E/../ui-core/src/instance/InstanceBackfills.tsx","webpack://_N_E/../ui-core/src/instance/RepoFilterButton.tsx","webpack://_N_E/../ui-core/src/runs/useCursorAccumulatedQuery.tsx","webpack://_N_E/../ui-core/src/instance/backfill/BackfillLogsTab.tsx","webpack://_N_E/../ui-core/src/instance/backfill/BackfillPartitionsTab.tsx","webpack://_N_E/../ui-core/src/instance/backfill/ExecutionTimeline.tsx","webpack://_N_E/../ui-core/src/instance/backfill/BackfillRunsTab.tsx","webpack://_N_E/../ui-core/src/instance/backfill/BackfillPage.tsx","webpack://_N_E/../ui-core/src/overview/OverviewSchedulesTable.tsx","webpack://_N_E/../ui-core/src/overview/OverviewSchedules.tsx","webpack://_N_E/../ui-core/src/overview/OverviewSensorsTable.tsx","webpack://_N_E/../ui-core/src/overview/OverviewSensors.tsx","webpack://_N_E/../ui-core/src/runs/useHourWindow.tsx","webpack://_N_E/../ui-core/src/overview/OverviewTimelineRoot.tsx","webpack://_N_E/../ui-core/src/overview/sortRepoBuckets.tsx","webpack://_N_E/../ui-core/src/overview/visibleRepoKeys.tsx","webpack://_N_E/../ui-core/src/runs/HourlyDataCache/HourlyDataCache.tsx","webpack://_N_E/../ui-core/src/runs/fetchPaginatedBucketData.ts","webpack://_N_E/../ui-core/src/instance/NextTick.tsx","webpack://_N_E/../ui-core/src/runs/useRunsForTimeline.tsx"],"sourcesContent":["import {useCallback, useEffect, useMemo} from 'react';\n\nimport {ASSET_DAEMON_TICKS_QUERY} from './AssetDaemonTicksQuery';\nimport {AutomaterializationEvaluationHistoryTable} from './AutomaterializationEvaluationHistoryTable';\nimport {\n  AssetDaemonTickFragment,\n  AssetDaemonTicksQuery,\n  AssetDaemonTicksQueryVariables,\n} from './types/AssetDaemonTicksQuery.types';\nimport {useQueryRefreshAtInterval} from '../../app/QueryRefresh';\nimport {InstigationTickStatus} from '../../graphql/types';\nimport {useQueryPersistedState} from '../../hooks/useQueryPersistedState';\nimport {useCursorPaginatedQuery} from '../../runs/useCursorPaginatedQuery';\n\nconst PAGE_SIZE = 15;\n\ninterface Props {\n  setSelectedTick: (tick: AssetDaemonTickFragment | null) => void;\n  setTableView: (view: 'evaluations' | 'runs') => void;\n  setTimerange: (range?: [number, number]) => void;\n  setParentStatuses: (statuses?: InstigationTickStatus[]) => void;\n}\n\nexport const InstanceAutomaterializationEvaluationHistoryTable = ({\n  setSelectedTick,\n  setTableView,\n  setTimerange,\n  setParentStatuses,\n}: Props) => {\n  const [statuses, setStatuses] = useQueryPersistedState<Set<InstigationTickStatus>>({\n    queryKey: 'statuses',\n    decode: useCallback(({statuses}: {statuses?: string}) => {\n      return new Set<InstigationTickStatus>(\n        statuses\n          ? JSON.parse(statuses)\n          : [\n              InstigationTickStatus.STARTED,\n              InstigationTickStatus.SUCCESS,\n              InstigationTickStatus.FAILURE,\n              InstigationTickStatus.SKIPPED,\n            ],\n      );\n    }, []),\n    encode: useCallback((raw: Set<InstigationTickStatus>) => {\n      return {statuses: JSON.stringify(Array.from(raw))};\n    }, []),\n  });\n\n  const {queryResult, paginationProps} = useCursorPaginatedQuery<\n    AssetDaemonTicksQuery,\n    AssetDaemonTicksQueryVariables\n  >({\n    query: ASSET_DAEMON_TICKS_QUERY,\n    variables: {\n      statuses: useMemo(() => Array.from(statuses), [statuses]),\n    },\n    nextCursorForResult: (data) => {\n      const ticks = data.autoMaterializeTicks;\n      if (!ticks.length) {\n        return undefined;\n      }\n      return ticks[PAGE_SIZE - 1]?.id;\n    },\n    getResultArray: (data) => {\n      if (!data?.autoMaterializeTicks) {\n        return [];\n      }\n      return data.autoMaterializeTicks;\n    },\n    pageSize: PAGE_SIZE,\n  });\n\n  // Only refresh if we're on the first page\n  useQueryRefreshAtInterval(queryResult, 10000, !paginationProps.hasPrevCursor);\n\n  useEffect(() => {\n    if (paginationProps.hasPrevCursor) {\n      const ticks = queryResult.data?.autoMaterializeTicks;\n      if (ticks && ticks.length) {\n        const start = ticks[ticks.length - 1]?.timestamp;\n        const end = ticks[0]?.endTimestamp;\n        if (start && end) {\n          setTimerange([start, end]);\n        }\n      }\n    } else {\n      setTimerange(undefined);\n    }\n  }, [paginationProps.hasPrevCursor, queryResult.data?.autoMaterializeTicks, setTimerange]);\n\n  useEffect(() => {\n    if (paginationProps.hasPrevCursor) {\n      setParentStatuses(Array.from(statuses));\n    } else {\n      setParentStatuses(undefined);\n    }\n  }, [paginationProps.hasPrevCursor, setParentStatuses, statuses]);\n\n  return (\n    <AutomaterializationEvaluationHistoryTable\n      loading={queryResult.loading}\n      ticks={queryResult.data?.autoMaterializeTicks || []}\n      paginationProps={paginationProps}\n      setSelectedTick={setSelectedTick}\n      setStatuses={setStatuses}\n      setTableView={setTableView}\n      statuses={statuses}\n    />\n  );\n};\n","import {useLazyQuery} from '@apollo/client';\nimport {Alert, Box, Checkbox, Colors, Spinner, Subtitle2, Table} from '@dagster-io/ui-components';\nimport {useCallback, useMemo, useState} from 'react';\n\nimport {ASSET_DAEMON_TICKS_QUERY} from './AssetDaemonTicksQuery';\nimport {AutomaterializationTickDetailDialog} from './AutomaterializationTickDetailDialog';\nimport {AutomaterializeRunHistoryTable} from './AutomaterializeRunHistoryTable';\nimport {InstanceAutomaterializationEvaluationHistoryTable} from './InstanceAutomaterializationEvaluationHistoryTable';\nimport {\n  AssetDaemonTickFragment,\n  AssetDaemonTicksQuery,\n  AssetDaemonTicksQueryVariables,\n} from './types/AssetDaemonTicksQuery.types';\nimport {useConfirmation} from '../../app/CustomConfirmationProvider';\nimport {useUnscopedPermissions} from '../../app/Permissions';\nimport {useRefreshAtInterval} from '../../app/QueryRefresh';\nimport {InstigationTickStatus} from '../../graphql/types';\nimport {useQueryPersistedState} from '../../hooks/useQueryPersistedState';\nimport {LiveTickTimeline} from '../../instigation/LiveTickTimeline2';\nimport {isStuckStartedTick} from '../../instigation/util';\nimport {useBlockTraceOnQueryResult} from '../../performance/TraceContext';\nimport {useAutomaterializeDaemonStatus} from '../useAutomaterializeDaemonStatus';\n\nconst MINUTE = 60 * 1000;\nconst THREE_MINUTES = 3 * MINUTE;\nconst FIVE_MINUTES = 5 * MINUTE;\nconst TWENTY_MINUTES = 20 * MINUTE;\n\nexport const GlobalAutomaterializationContent = () => {\n  const automaterialize = useAutomaterializeDaemonStatus();\n  const confirm = useConfirmation();\n\n  const {permissions: {canToggleAutoMaterialize} = {}} = useUnscopedPermissions();\n\n  const [isPaused, setIsPaused] = useState(false);\n  const [statuses, setStatuses] = useState<undefined | InstigationTickStatus[]>(undefined);\n  const [timeRange, setTimerange] = useState<undefined | [number, number]>(undefined);\n  const getVariables = useCallback(\n    (now = Date.now()) => {\n      if (timeRange || statuses) {\n        return {\n          afterTimestamp: timeRange?.[0],\n          beforeTimestamp: timeRange?.[1],\n          statuses,\n        };\n      }\n      return {\n        afterTimestamp: (now - TWENTY_MINUTES) / 1000,\n      };\n    },\n    [statuses, timeRange],\n  );\n\n  const [fetch, queryResult] = useLazyQuery<AssetDaemonTicksQuery, AssetDaemonTicksQueryVariables>(\n    ASSET_DAEMON_TICKS_QUERY,\n  );\n\n  const refresh = useCallback(\n    async () => await fetch({variables: getVariables()}),\n    [fetch, getVariables],\n  );\n\n  useBlockTraceOnQueryResult(queryResult, 'AssetDaemonTicksQuery');\n\n  useRefreshAtInterval({\n    refresh,\n    enabled: !isPaused && !timeRange && !statuses,\n    intervalMs: 2 * 1000,\n    leading: true,\n  });\n\n  const [selectedTick, setSelectedTick] = useState<AssetDaemonTickFragment | null>(null);\n\n  const [tableView, setTableView] = useQueryPersistedState<'evaluations' | 'runs'>(\n    useMemo(\n      () => ({\n        queryKey: 'view',\n        decode: ({view}) => (view === 'runs' ? 'runs' : 'evaluations'),\n        encode: (raw) => {\n          return {view: raw, cursor: undefined, statuses: undefined};\n        },\n      }),\n      [],\n    ),\n  );\n\n  const data = queryResult.data ?? queryResult.previousData;\n\n  const allTicks = useMemo(() => {\n    return data?.autoMaterializeTicks || [];\n  }, [data]);\n\n  const ticks = useMemo(\n    () => {\n      return (\n        allTicks?.map((tick, index) => {\n          const nextTick = allTicks[index - 1];\n          // For ticks that get stuck in \"Started\" state without an endTimestamp.\n          if (nextTick && isStuckStartedTick(tick, index)) {\n            const copy = {...tick};\n            copy.endTimestamp = nextTick.timestamp;\n            copy.status = InstigationTickStatus.FAILURE;\n            return copy;\n          }\n          return tick;\n        }) ?? []\n      );\n    },\n    // The allTicks array changes every 2 seconds because we query every 2 seconds.\n    // This would cause everything to re-render, to avoid that we memoize the ticks array that we pass around\n    // using the ID and status of the ticks.\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [JSON.stringify(allTicks.map((tick) => `${tick.id}:${tick.status}`))],\n  );\n\n  const onHoverTick = useCallback(\n    (tick: AssetDaemonTickFragment | undefined) => {\n      setIsPaused(!!tick);\n    },\n    [setIsPaused],\n  );\n\n  return (\n    <>\n      <Box padding={{vertical: 12, horizontal: 24}} flex={{direction: 'column', gap: 12}}>\n        <Alert\n          intent=\"info\"\n          title=\"[Experimental] Dagster can automatically materialize assets when criteria are met.\"\n          description={\n            <>\n              Auto-materialization enables a declarative approach to asset scheduling – instead of\n              defining imperative workflows to materialize your assets, you just describe the\n              conditions under which they should be materialized.{' '}\n              <a\n                href=\"https://docs.dagster.io/concepts/assets/asset-auto-execution\"\n                target=\"_blank\"\n                rel=\"noreferrer\"\n              >\n                Learn more about auto-materialization here\n              </a>\n              .\n            </>\n          }\n        />\n      </Box>\n      <Table>\n        <tbody>\n          <tr>\n            <td>Running</td>\n            <td>\n              {automaterialize.loading ? (\n                <Spinner purpose=\"body-text\" />\n              ) : (\n                <Checkbox\n                  format=\"switch\"\n                  checked={!automaterialize.paused}\n                  disabled={!canToggleAutoMaterialize}\n                  onChange={async (e) => {\n                    const checked = e.target.checked;\n                    if (!checked) {\n                      await confirm({\n                        title: 'Pause Auto-materializing?',\n                        description:\n                          'Pausing Auto-materializing will prevent new materializations triggered by an Auto-materializing policy.',\n                      });\n                    }\n                    automaterialize.setPaused(!checked);\n                  }}\n                />\n              )}\n            </td>\n          </tr>\n          <tr>\n            <td>Evaluation frequency</td>\n            <td>~30s</td>\n          </tr>\n        </tbody>\n      </Table>\n      <Box padding={{vertical: 12, horizontal: 24}} border=\"bottom\">\n        <Subtitle2>Evaluation timeline</Subtitle2>\n      </Box>\n      {!data ? (\n        <Box\n          padding={{vertical: 48}}\n          flex={{direction: 'row', justifyContent: 'center', gap: 12, alignItems: 'center'}}\n        >\n          <Spinner purpose=\"body-text\" />\n          <div style={{color: Colors.textLight()}}>Loading evaluations…</div>\n        </Box>\n      ) : (\n        <>\n          <LiveTickTimeline\n            ticks={ticks}\n            onHoverTick={onHoverTick}\n            onSelectTick={setSelectedTick}\n            exactRange={timeRange}\n            timeRange={TWENTY_MINUTES}\n            tickGrid={FIVE_MINUTES}\n            timeAfter={THREE_MINUTES}\n          />\n          <AutomaterializationTickDetailDialog\n            tick={selectedTick}\n            isOpen={!!selectedTick}\n            close={() => {\n              setSelectedTick(null);\n            }}\n          />\n          {tableView === 'evaluations' ? (\n            <InstanceAutomaterializationEvaluationHistoryTable\n              setSelectedTick={setSelectedTick}\n              setTableView={setTableView}\n              setParentStatuses={setStatuses}\n              setTimerange={setTimerange}\n            />\n          ) : (\n            <AutomaterializeRunHistoryTable setTableView={setTableView} />\n          )}\n        </>\n      )}\n    </>\n  );\n};\n","import {gql, useQuery} from '@apollo/client';\nimport {\n  Box,\n  Colors,\n  CursorPaginationControls,\n  NonIdealState,\n  Spinner,\n} from '@dagster-io/ui-components';\n\nimport {INSTANCE_HEALTH_FRAGMENT} from './InstanceHealthFragment';\nimport {BACKFILL_TABLE_FRAGMENT, BackfillTable} from './backfill/BackfillTable';\nimport {\n  InstanceBackfillsQuery,\n  InstanceBackfillsQueryVariables,\n  InstanceHealthForBackfillsQuery,\n  InstanceHealthForBackfillsQueryVariables,\n} from './types/InstanceBackfills.types';\nimport {PYTHON_ERROR_FRAGMENT} from '../app/PythonErrorFragment';\nimport {PythonErrorInfo} from '../app/PythonErrorInfo';\nimport {\n  FIFTEEN_SECONDS,\n  QueryRefreshCountdown,\n  useQueryRefreshAtInterval,\n} from '../app/QueryRefresh';\nimport {useTrackPageView} from '../app/analytics';\nimport {BulkActionStatus} from '../graphql/types';\nimport {useDocumentTitle} from '../hooks/useDocumentTitle';\nimport {useQueryPersistedState} from '../hooks/useQueryPersistedState';\nimport {DaemonNotRunningAlertBody} from '../partitions/BackfillMessaging';\nimport {useBlockTraceOnQueryResult} from '../performance/TraceContext';\nimport {useCursorPaginatedQuery} from '../runs/useCursorPaginatedQuery';\nimport {useFilters} from '../ui/Filters';\nimport {useStaticSetFilter} from '../ui/Filters/useStaticSetFilter';\n\nconst PAGE_SIZE = 10;\n\nconst labelForBackfillStatus = (key: BulkActionStatus) => {\n  switch (key) {\n    case BulkActionStatus.CANCELED:\n      return 'Canceled';\n    case BulkActionStatus.CANCELING:\n      return 'Canceling';\n    case BulkActionStatus.COMPLETED:\n      return 'Completed';\n    case BulkActionStatus.FAILED:\n      return 'Failed';\n    case BulkActionStatus.REQUESTED:\n      return 'In progress';\n  }\n};\n\nconst backfillStatusValues = Object.keys(BulkActionStatus).map((key) => {\n  const status = key as BulkActionStatus;\n  const label = labelForBackfillStatus(status);\n  return {\n    label,\n    value: status,\n    match: [status, label],\n  };\n});\n\nexport const InstanceBackfills = () => {\n  useTrackPageView();\n  useDocumentTitle('Overview | Backfills');\n\n  const queryData = useQuery<\n    InstanceHealthForBackfillsQuery,\n    InstanceHealthForBackfillsQueryVariables\n  >(INSTANCE_HEALTH_FOR_BACKFILLS_QUERY);\n  useBlockTraceOnQueryResult(queryData, 'InstanceHealthForBackfillsQuery');\n\n  const [statusState, setStatusState] = useQueryPersistedState<Set<BulkActionStatus>>({\n    encode: (vals) => ({status: vals.size ? Array.from(vals).join(',') : undefined}),\n    decode: (qs) => new Set((qs.status?.split(',') as BulkActionStatus[]) || []),\n  });\n  const statusFilter = useStaticSetFilter<BulkActionStatus>({\n    name: 'Status',\n    icon: 'status',\n    allValues: backfillStatusValues,\n    allowMultipleSelections: false,\n    closeOnSelect: true,\n    renderLabel: ({value}) => <div>{labelForBackfillStatus(value)}</div>,\n    getStringValue: (status) => labelForBackfillStatus(status),\n    state: statusState,\n    onStateChanged: setStatusState,\n  });\n\n  const {button, activeFiltersJsx} = useFilters({filters: [statusFilter]});\n\n  const {queryResult, paginationProps} = useCursorPaginatedQuery<\n    InstanceBackfillsQuery,\n    InstanceBackfillsQueryVariables\n  >({\n    query: BACKFILLS_QUERY,\n    variables: {\n      status: statusState.size > 0 ? Array.from(statusState)[0]! : undefined,\n    },\n    pageSize: PAGE_SIZE,\n    nextCursorForResult: (result) =>\n      result.partitionBackfillsOrError.__typename === 'PartitionBackfills'\n        ? result.partitionBackfillsOrError.results[PAGE_SIZE - 1]?.id\n        : undefined,\n    getResultArray: (result) =>\n      result?.partitionBackfillsOrError.__typename === 'PartitionBackfills'\n        ? result.partitionBackfillsOrError.results\n        : [],\n  });\n\n  const refreshState = useQueryRefreshAtInterval(queryResult, FIFTEEN_SECONDS);\n  const {loading, data} = queryResult;\n\n  const content = () => {\n    if (loading && !data) {\n      return (\n        <Box padding={{vertical: 64}} flex={{direction: 'column', alignItems: 'center'}}>\n          <Box flex={{direction: 'row', alignItems: 'center', gap: 8}}>\n            <Spinner purpose=\"body-text\" />\n            <div style={{color: Colors.textLight()}}>Loading backfills…</div>\n          </Box>\n        </Box>\n      );\n    }\n\n    const partitionBackfillsOrError = data?.partitionBackfillsOrError;\n    if (partitionBackfillsOrError?.__typename === 'PythonError') {\n      return <PythonErrorInfo error={partitionBackfillsOrError} />;\n    }\n\n    if (!partitionBackfillsOrError || !partitionBackfillsOrError?.results.length) {\n      if (statusState.size > 0) {\n        return (\n          <Box padding={{vertical: 64}}>\n            <NonIdealState\n              icon=\"no-results\"\n              title=\"No matching backfills\"\n              description=\"No backfills were found for this filter.\"\n            />\n          </Box>\n        );\n      }\n\n      return (\n        <Box padding={{vertical: 64}}>\n          <NonIdealState\n            icon=\"no-results\"\n            title=\"No backfills found\"\n            description=\"This instance does not have any backfill jobs.\"\n          />\n        </Box>\n      );\n    }\n\n    const daemonHealths = queryData.data?.instance.daemonHealth.allDaemonStatuses || [];\n    const backfillHealths = daemonHealths\n      .filter((daemon) => daemon.daemonType === 'BACKFILL')\n      .map((daemon) => daemon.required && daemon.healthy);\n    const isBackfillHealthy = backfillHealths.length && backfillHealths.every((x) => x);\n\n    return (\n      <div>\n        {isBackfillHealthy ? null : (\n          <Box padding={{horizontal: 24, vertical: 16}}>\n            <DaemonNotRunningAlertBody />\n          </Box>\n        )}\n        <BackfillTable\n          backfills={partitionBackfillsOrError.results.slice(0, PAGE_SIZE)}\n          refetch={queryResult.refetch}\n        />\n        {partitionBackfillsOrError.results.length > 0 ? (\n          <Box margin={{top: 16}}>\n            <CursorPaginationControls {...paginationProps} />\n          </Box>\n        ) : null}\n      </div>\n    );\n  };\n\n  return (\n    <>\n      <Box\n        padding={{vertical: 12, horizontal: 20}}\n        flex={{direction: 'row', alignItems: 'center', justifyContent: 'space-between'}}\n      >\n        <Box flex={{direction: 'column', gap: 8}}>\n          <div>{button}</div>\n          {activeFiltersJsx}\n        </Box>\n        <QueryRefreshCountdown refreshState={refreshState} />\n      </Box>\n      {content()}\n    </>\n  );\n};\n\nconst INSTANCE_HEALTH_FOR_BACKFILLS_QUERY = gql`\n  query InstanceHealthForBackfillsQuery {\n    instance {\n      id\n      ...InstanceHealthFragment\n    }\n  }\n\n  ${INSTANCE_HEALTH_FRAGMENT}\n`;\n\nconst BACKFILLS_QUERY = gql`\n  query InstanceBackfillsQuery($status: BulkActionStatus, $cursor: String, $limit: Int) {\n    partitionBackfillsOrError(status: $status, cursor: $cursor, limit: $limit) {\n      ... on PartitionBackfills {\n        results {\n          id\n          status\n          isValidSerialization\n          numPartitions\n          timestamp\n          partitionSetName\n          partitionSet {\n            id\n            name\n            mode\n            pipelineName\n            repositoryOrigin {\n              id\n              repositoryName\n              repositoryLocationName\n            }\n          }\n          error {\n            ...PythonErrorFragment\n          }\n\n          ...BackfillTableFragment\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ${PYTHON_ERROR_FRAGMENT}\n  ${BACKFILL_TABLE_FRAGMENT}\n`;\n","import {Box, Button, Dialog, DialogFooter, DialogHeader, Icon} from '@dagster-io/ui-components';\nimport {useContext, useState} from 'react';\n\nimport {RepoSelector} from '../nav/RepoSelector';\nimport {WorkspaceContext} from '../workspace/WorkspaceContext';\n\nexport const RepoFilterButton = () => {\n  const {allRepos, visibleRepos, toggleVisible} = useContext(WorkspaceContext);\n  const [open, setOpen] = useState(false);\n  return (\n    <>\n      <Dialog\n        canOutsideClickClose\n        canEscapeKeyClose\n        isOpen={open}\n        style={{width: 'auto'}}\n        onClose={() => setOpen(false)}\n      >\n        <DialogHeader icon=\"repo\" label=\"Filter code locations\" />\n        <RepoSelector\n          options={allRepos}\n          onBrowse={() => setOpen(false)}\n          onToggle={toggleVisible}\n          selected={visibleRepos}\n        />\n        <DialogFooter>\n          <Box padding={{top: 8}}>\n            <Button intent=\"none\" onClick={() => setOpen(false)}>\n              Done\n            </Button>\n          </Box>\n        </DialogFooter>\n      </Dialog>\n\n      <Button\n        outlined\n        icon={<Icon name=\"folder\" />}\n        rightIcon={<Icon name=\"expand_more\" />}\n        onClick={() => setOpen(true)}\n      >\n        {`${visibleRepos.length} of ${allRepos.length}`}\n      </Button>\n    </>\n  );\n};\n","import {useQuery} from '@apollo/client';\nimport {DocumentNode} from 'graphql';\nimport {useEffect, useState} from 'react';\n\nimport {useQueryRefreshAtInterval} from '../app/QueryRefresh';\n\ntype FetchState = {\n  hasMore: boolean;\n  cursor: string | null | undefined;\n};\n\nexport function useCursorAccumulatedQuery<T, TVars extends {cursor?: string | null}, U>(options: {\n  query: DocumentNode;\n  skip?: boolean;\n  variables: Omit<TVars, 'cursor'>;\n  getResultArray: (result: T | undefined) => U[];\n  getNextFetchState: (result: T | undefined) => FetchState | null;\n}) {\n  const [fetched, setFetched] = useState<U[] | null>(null);\n  const [fetchState, setFetchState] = useState<FetchState>({hasMore: true, cursor: undefined});\n  const {query, skip, variables, getResultArray, getNextFetchState} = options;\n\n  const queryResult = useQuery<T, TVars>(query, {\n    variables: {...variables, cursor: fetchState.cursor} as TVars,\n    notifyOnNetworkStatusChange: true,\n    skip,\n  });\n\n  useEffect(() => {\n    if (!queryResult.data) {\n      return;\n    }\n    const result = getResultArray(queryResult.data);\n    setFetched((fetched) => (fetched || []).concat(result));\n    const next = getNextFetchState(queryResult.data);\n    if (next) {\n      setFetchState(next);\n    }\n  }, [queryResult, getResultArray, getNextFetchState]);\n\n  // When we have reached the last event, switch to refreshing every 10s\n  const refreshState = useQueryRefreshAtInterval(queryResult, 10 * 1000, !fetchState.hasMore);\n\n  return {fetched, refreshState};\n}\n","import {gql} from '@apollo/client';\nimport {Box, NonIdealState, Spinner} from '@dagster-io/ui-components';\nimport React from 'react';\n\nimport {BackfillLogsPageQuery, BackfillLogsPageQueryVariables} from './types/BackfillLogsTab.types';\nimport {BackfillDetailsBackfillFragment} from './types/BackfillPage.types';\nimport {QueryRefreshCountdown} from '../../app/QueryRefresh';\nimport {useCursorAccumulatedQuery} from '../../runs/useCursorAccumulatedQuery';\nimport {\n  INSTIGATION_EVENT_LOG_FRAGMENT,\n  InstigationEventLogTable,\n} from '../../ticks/InstigationEventLogTable';\nimport {InstigationEventLogFragment} from '../../ticks/types/InstigationEventLogTable.types';\n\nconst getResultsForBackfillLogsPage = (e?: BackfillLogsPageQuery) => {\n  return e?.partitionBackfillOrError.__typename === 'PartitionBackfill'\n    ? e.partitionBackfillOrError.logEvents.events\n    : [];\n};\nconst getFetchStateForBackfillLogsPage = (e?: BackfillLogsPageQuery) => {\n  return e?.partitionBackfillOrError.__typename === 'PartitionBackfill'\n    ? e.partitionBackfillOrError.logEvents\n    : null;\n};\n\nexport const BackfillLogsTab = ({backfill}: {backfill: BackfillDetailsBackfillFragment}) => {\n  const {fetched: events, refreshState} = useCursorAccumulatedQuery<\n    BackfillLogsPageQuery,\n    BackfillLogsPageQueryVariables,\n    InstigationEventLogFragment\n  >({\n    query: BACKFILL_LOGS_PAGE_QUERY,\n    variables: {backfillId: backfill.id},\n    getResultArray: getResultsForBackfillLogsPage,\n    getNextFetchState: getFetchStateForBackfillLogsPage,\n  });\n\n  return (\n    <>\n      <div style={{position: 'absolute', right: 16, top: -32}}>\n        <QueryRefreshCountdown refreshState={refreshState} />\n      </div>\n      {events === null ? (\n        <Box flex={{justifyContent: 'center', alignItems: 'center'}} style={{flex: 1}}>\n          <Spinner purpose=\"page\" />\n        </Box>\n      ) : events.length > 0 ? (\n        <InstigationEventLogTable events={events} />\n      ) : (\n        <Box flex={{justifyContent: 'center', alignItems: 'center'}} style={{flex: 1}}>\n          <NonIdealState\n            title=\"No logs available\"\n            description=\"If backfill log storage is enabled, logs will appear as they are emitted by the backfill daemon.\"\n          />\n        </Box>\n      )}\n    </>\n  );\n};\n\nexport const BACKFILL_LOGS_PAGE_QUERY = gql`\n  query BackfillLogsPageQuery($backfillId: String!, $cursor: String) {\n    partitionBackfillOrError(backfillId: $backfillId) {\n      __typename\n      ... on PartitionBackfill {\n        id\n        logEvents(cursor: $cursor) {\n          ... on InstigationEventConnection {\n            cursor\n            hasMore\n            events {\n              ...InstigationEventLog\n            }\n          }\n        }\n      }\n    }\n  }\n  ${INSTIGATION_EVENT_LOG_FRAGMENT}\n`;\n","import {gql, useApolloClient} from '@apollo/client';\nimport {Box, ButtonLink, Colors, NonIdealState, Table, Tag} from '@dagster-io/ui-components';\nimport React from 'react';\nimport {Link, useHistory} from 'react-router-dom';\n\nimport {BackfillDetailsBackfillFragment} from './types/BackfillPage.types';\nimport {tokenForAssetKey} from '../../asset-graph/Utils';\nimport {asAssetKeyInput} from '../../assets/asInput';\nimport {assetDetailsPathForKey} from '../../assets/assetDetailsPathForKey';\nimport {AssetViewParams} from '../../assets/types';\nimport {AssetKey, RunStatus} from '../../graphql/types';\nimport {RunFilterToken, runsPathWithFilters} from '../../runs/RunsFilterInput';\nimport {testId} from '../../testing/testId';\nimport {\n  BackfillPartitionsForAssetKeyQuery,\n  BackfillPartitionsForAssetKeyQueryVariables,\n} from '../backfill/types/BackfillPage.types';\n\nexport const BackfillPartitionsTab = ({backfill}: {backfill: BackfillDetailsBackfillFragment}) => {\n  const client = useApolloClient();\n  const history = useHistory();\n\n  function getRunsUrl(status: 'inProgress' | 'complete' | 'failed' | 'targeted') {\n    const filters: RunFilterToken[] = [\n      {\n        token: 'tag',\n        value: `dagster/backfill=${backfill.id}`,\n      },\n    ];\n    switch (status) {\n      case 'inProgress':\n        filters.push(\n          {\n            token: 'status',\n            value: RunStatus.STARTED,\n          },\n          {\n            token: 'status',\n            value: RunStatus.QUEUED,\n          },\n          {\n            token: 'status',\n            value: RunStatus.STARTING,\n          },\n          {\n            token: 'status',\n            value: RunStatus.CANCELING,\n          },\n          {\n            token: 'status',\n            value: RunStatus.NOT_STARTED,\n          },\n        );\n        break;\n      case 'complete':\n        filters.push({\n          token: 'status',\n          value: RunStatus.SUCCESS,\n        });\n        break;\n      case 'failed':\n        filters.push({\n          token: 'status',\n          value: RunStatus.FAILURE,\n        });\n        filters.push({\n          token: 'status',\n          value: RunStatus.CANCELED,\n        });\n        break;\n    }\n    return runsPathWithFilters(filters);\n  }\n\n  const onShowAssetDetails = async (assetKey: AssetKey, isPartitioned: boolean) => {\n    let params: AssetViewParams = {};\n\n    if (isPartitioned) {\n      const resp = await client.query<\n        BackfillPartitionsForAssetKeyQuery,\n        BackfillPartitionsForAssetKeyQueryVariables\n      >({\n        query: BACKFILL_PARTITIONS_FOR_ASSET_KEY_QUERY,\n        variables: {backfillId: backfill.id, assetKey: asAssetKeyInput(assetKey)},\n      });\n      const data =\n        resp.data.partitionBackfillOrError.__typename === 'PartitionBackfill'\n          ? resp.data.partitionBackfillOrError.partitionsTargetedForAssetKey\n          : null;\n\n      if (data && data.ranges?.length) {\n        params = {default_range: data.ranges.map((r) => `[${r.start}...${r.end}]`).join(',')};\n      }\n    }\n    return history.push(assetDetailsPathForKey(assetKey, params));\n  };\n\n  if (!backfill.assetBackfillData?.assetBackfillStatuses.length) {\n    return (\n      <Box margin={48}>\n        <NonIdealState\n          title=\"Partition statuses unavailable\"\n          description=\"Dagster was unable to load per-partition statuses. This may occur if the backfilled assets or jobs no longer exist in your loaded code locations.\"\n        />\n      </Box>\n    );\n  }\n\n  return (\n    <Table>\n      <thead>\n        <tr>\n          <th style={{width: '50%'}}>Asset name</th>\n          <th>\n            <Link to={getRunsUrl('targeted')}>Partitions targeted</Link>\n          </th>\n          <th>\n            <Link to={getRunsUrl('inProgress')}>In progress</Link>\n          </th>\n          <th>\n            <Link to={getRunsUrl('complete')}>Completed</Link>\n          </th>\n          <th>\n            <Link to={getRunsUrl('failed')}>Failed</Link>\n          </th>\n        </tr>\n      </thead>\n      <tbody>\n        {backfill.assetBackfillData?.assetBackfillStatuses.map((asset) => {\n          let targeted;\n          let inProgress;\n          let completed;\n          let failed;\n          if (asset.__typename === 'AssetPartitionsStatusCounts') {\n            targeted = asset.numPartitionsTargeted;\n            inProgress = asset.numPartitionsInProgress;\n            completed = asset.numPartitionsMaterialized;\n            failed = asset.numPartitionsFailed;\n          } else {\n            targeted = 1;\n            failed = asset.failed ? 1 : 0;\n            inProgress = asset.inProgress ? 1 : 0;\n            completed = asset.materialized ? 1 : 0;\n          }\n          return (\n            <tr\n              key={tokenForAssetKey(asset.assetKey)}\n              data-testid={testId(`backfill-asset-row-${tokenForAssetKey(asset.assetKey)}`)}\n            >\n              <td>\n                <Box flex={{direction: 'row', justifyContent: 'space-between'}}>\n                  <div>\n                    <ButtonLink\n                      onClick={() =>\n                        onShowAssetDetails(\n                          asset.assetKey,\n                          asset.__typename === 'AssetPartitionsStatusCounts',\n                        )\n                      }\n                    >\n                      {asset.assetKey.path.join('/')}\n                    </ButtonLink>\n                  </div>\n                  <div>\n                    <StatusBar\n                      targeted={targeted}\n                      inProgress={inProgress}\n                      completed={completed}\n                      failed={failed}\n                    />\n                  </div>\n                </Box>\n              </td>\n              {asset.__typename === 'AssetPartitionsStatusCounts' ? (\n                <>\n                  <td>{targeted}</td>\n                  <td>{inProgress}</td>\n                  <td>{completed}</td>\n                  <td>{failed}</td>\n                </>\n              ) : (\n                <>\n                  <td>-</td>\n                  <td>\n                    {inProgress ? (\n                      <Tag icon=\"spinner\" intent=\"primary\">\n                        In progress\n                      </Tag>\n                    ) : (\n                      '-'\n                    )}\n                  </td>\n                  <td>{completed ? <Tag intent=\"success\">Completed</Tag> : '-'}</td>\n                  <td>{failed ? <Tag intent=\"danger\">Failed</Tag> : '-'}</td>\n                </>\n              )}\n            </tr>\n          );\n        })}\n      </tbody>\n    </Table>\n  );\n};\n\nexport const BACKFILL_PARTITIONS_FOR_ASSET_KEY_QUERY = gql`\n  query BackfillPartitionsForAssetKey($backfillId: String!, $assetKey: AssetKeyInput!) {\n    partitionBackfillOrError(backfillId: $backfillId) {\n      ... on PartitionBackfill {\n        id\n        partitionsTargetedForAssetKey(assetKey: $assetKey) {\n          partitionKeys\n          ranges {\n            start\n            end\n          }\n        }\n      }\n    }\n  }\n`;\n\nfunction StatusBar({\n  targeted,\n  inProgress,\n  completed,\n  failed,\n}: {\n  targeted: number;\n  inProgress: number;\n  completed: number;\n  failed: number;\n}) {\n  return (\n    <div\n      style={{\n        borderRadius: '8px',\n        backgroundColor: Colors.backgroundLight(),\n        display: 'grid',\n        gridTemplateColumns: `${(100 * completed) / targeted}% ${(100 * failed) / targeted}% ${\n          (100 * inProgress) / targeted\n        }%`,\n        gridTemplateRows: '100%',\n        height: '12px',\n        width: '200px',\n        overflow: 'hidden',\n      }}\n    >\n      <div style={{background: Colors.accentGreen()}} />\n      <div style={{background: Colors.accentRed()}} />\n      <div style={{background: Colors.accentBlue()}} />\n    </div>\n  );\n}\n","import {Box, useViewport} from '@dagster-io/ui-components';\nimport {useVirtualizer} from '@tanstack/react-virtual';\nimport React from 'react';\nimport {Link} from 'react-router-dom';\n\nimport {RunStatusDot} from '../../runs/RunStatusDots';\nimport {\n  CONSTANTS,\n  RunChunk,\n  RunChunks,\n  RunsEmptyOrLoading,\n  TimeDividers,\n  TimelineRowContainer,\n  TimelineRun,\n} from '../../runs/RunTimeline';\nimport {TimeElapsed} from '../../runs/TimeElapsed';\nimport {RunBatch, batchRunsForTimeline} from '../../runs/batchRunsForTimeline';\nimport {mergeStatusToBackground} from '../../runs/mergeStatusToBackground';\nimport {Container, Inner} from '../../ui/VirtualizedTable';\n\nconst {DATE_TIME_HEIGHT, ONE_HOUR_MSEC, EMPTY_STATE_HEIGHT, LEFT_SIDE_SPACE_ALLOTTED} = CONSTANTS;\n\ntype Props = {\n  loading?: boolean;\n  runs: TimelineRun[];\n  rangeMs: [number, number];\n  annotations: {label: string; ms: number}[];\n  now: number;\n};\n\nexport const ExecutionTimeline = (props: Props) => {\n  const {loading = false, runs, rangeMs, annotations, now} = props;\n  const parentRef = React.useRef<HTMLDivElement | null>(null);\n  const {\n    viewport: {width, height},\n    containerProps: {ref: measureRef},\n  } = useViewport();\n\n  const rowVirtualizer = useVirtualizer({\n    count: runs.length,\n    getScrollElement: () => parentRef.current,\n    estimateSize: (_: number) => 32,\n    overscan: 40,\n  });\n\n  const totalHeight = rowVirtualizer.getTotalSize();\n  const items = rowVirtualizer.getVirtualItems();\n\n  if (!width) {\n    return <div style={{height: DATE_TIME_HEIGHT + EMPTY_STATE_HEIGHT}} ref={measureRef} />;\n  }\n\n  return (\n    <>\n      <Box\n        padding={{left: 24}}\n        border=\"bottom\"\n        flex={{direction: 'column', justifyContent: 'center'}}\n        style={{\n          fontSize: '16px',\n          flex: `0 0 ${DATE_TIME_HEIGHT}px`,\n        }}\n      />\n      <div style={{position: 'relative'}}>\n        <TimeDividers\n          now={now}\n          interval={rangeMs[1] - rangeMs[0] > ONE_HOUR_MSEC * 4 ? ONE_HOUR_MSEC : ONE_HOUR_MSEC / 6}\n          rangeMs={rangeMs}\n          annotations={annotations}\n          height={runs.length > 0 ? height : 0}\n        />\n      </div>\n      {runs.length ? (\n        <div ref={measureRef} style={{overflow: 'hidden', position: 'relative'}}>\n          <Container ref={parentRef}>\n            <Inner $totalHeight={totalHeight}>\n              {items.map(({index, key, size, start}) => (\n                <ExecutionTimelineRow\n                  key={key}\n                  run={runs[index]!}\n                  top={start}\n                  height={size}\n                  range={rangeMs}\n                  width={width}\n                />\n              ))}\n            </Inner>\n          </Container>\n        </div>\n      ) : (\n        <div ref={measureRef}>\n          <RunsEmptyOrLoading loading={loading} includesTicks={false} />\n        </div>\n      )}\n    </>\n  );\n};\n\nexport const ExecutionTimelineRow = ({\n  run,\n  top,\n  height,\n  range,\n  width: containerWidth,\n}: {\n  run: TimelineRun;\n  top: number;\n  height: number;\n  range: [number, number];\n  width: number;\n}) => {\n  const [start, end] = range;\n  const width = containerWidth - LEFT_SIDE_SPACE_ALLOTTED;\n\n  const chunk = React.useMemo(() => {\n    const batches: RunBatch<TimelineRun>[] = batchRunsForTimeline({\n      runs: [run],\n      start,\n      end,\n      width,\n      minChunkWidth: 4,\n      minMultipleWidth: 4,\n    });\n\n    return batches[0];\n  }, [run, start, end, width]);\n\n  return (\n    <TimelineRowContainer $height={height} $start={top}>\n      <Box\n        style={{width: LEFT_SIDE_SPACE_ALLOTTED}}\n        padding={{horizontal: 24}}\n        flex={{justifyContent: 'space-between', alignItems: 'center'}}\n      >\n        <Box flex={{alignItems: 'center', gap: 4}}>\n          <RunStatusDot status={run.status} size={12} />\n          <Link to={`/runs/${run.id}`}>{run.id.slice(0, 8)}</Link>\n        </Box>\n        <TimeElapsed startUnix={run.startTime / 1000} endUnix={run.endTime / 1000} />\n      </Box>\n      <RunChunks>\n        {chunk && (\n          <RunChunk\n            $background={mergeStatusToBackground(chunk.runs)}\n            $multiple={false}\n            style={{\n              left: `${chunk.left}px`,\n              width: `${chunk.width}px`,\n            }}\n          />\n        )}\n      </RunChunks>\n    </TimelineRowContainer>\n  );\n};\n","import {\n  Box,\n  Button,\n  ButtonGroup,\n  Colors,\n  CursorHistoryControls,\n  ErrorBoundary,\n  NonIdealState,\n  Spinner,\n} from '@dagster-io/ui-components';\nimport React, {useDeferredValue, useMemo} from 'react';\n\nimport {ExecutionTimeline} from './ExecutionTimeline';\nimport {BackfillDetailsBackfillFragment} from './types/BackfillPage.types';\nimport {\n  FIFTEEN_SECONDS,\n  QueryRefreshCountdown,\n  useQueryRefreshAtInterval,\n} from '../../app/QueryRefresh';\nimport {RunsFilter} from '../../graphql/types';\nimport {useQueryPersistedState} from '../../hooks/useQueryPersistedState';\nimport {useTimelineRange} from '../../overview/OverviewTimelineRoot';\nimport {RunTable} from '../../runs/RunTable';\nimport {DagsterTag} from '../../runs/RunTag';\nimport {usePaginatedRunsTableRuns} from '../../runs/RunsRoot';\nimport {HourWindow} from '../../runs/useHourWindow';\nimport {useRunsForTimeline} from '../../runs/useRunsForTimeline';\nimport {StickyTableContainer} from '../../ui/StickyTableContainer';\n\nconst BACKFILL_RUNS_HOUR_WINDOW_KEY = 'dagster.backfill-run-timeline-hour-window';\n\nexport const BackfillRunsTab = ({backfill}: {backfill: BackfillDetailsBackfillFragment}) => {\n  const [view, setView] = useQueryPersistedState<'timeline' | 'list'>({\n    defaults: {view: 'timeline'},\n    queryKey: 'view',\n  });\n\n  const {rangeMs, hourWindow, setHourWindow, onPageEarlier, onPageLater, onPageNow} =\n    useTimelineRange({\n      maxNowMs: backfill.endTimestamp ? backfill.endTimestamp * 1000 : undefined,\n      hourWindowStorageKey: BACKFILL_RUNS_HOUR_WINDOW_KEY,\n      lookaheadHours: 0.1, // no ticks, so miminal \"future\" needed\n    });\n\n  const filter: RunsFilter = useMemo(\n    () => ({tags: [{key: DagsterTag.Backfill, value: backfill.id}]}),\n    [backfill],\n  );\n\n  const annotations = useMemo(\n    () =>\n      backfill.endTimestamp\n        ? [\n            {ms: backfill.timestamp * 1000, label: 'Start'},\n            {ms: backfill.endTimestamp * 1000, label: 'End'},\n          ]\n        : [{ms: backfill.timestamp * 1000, label: 'Start'}],\n    [backfill.timestamp, backfill.endTimestamp],\n  );\n\n  const actionBarComponents = (\n    <Box flex={{direction: 'row', gap: 16}} style={{position: 'sticky', top: 0}}>\n      <ButtonGroup\n        activeItems={new Set([view])}\n        onClick={(id: 'timeline' | 'list') => {\n          setView(id);\n        }}\n        buttons={[\n          {id: 'timeline', icon: 'gantt_waterfall', label: 'Timeline'},\n          {id: 'list', icon: 'list', label: 'List'},\n        ]}\n      />\n      <div style={{flex: 1}} />\n      {view === 'timeline' && (\n        <ButtonGroup<HourWindow>\n          activeItems={new Set([hourWindow])}\n          buttons={[\n            {id: '1', label: '1hr'},\n            {id: '6', label: '6hr'},\n            {id: '12', label: '12hr'},\n            {id: '24', label: '24hr'},\n          ]}\n          onClick={(hrWindow: HourWindow) => setHourWindow(hrWindow)}\n        />\n      )}\n      {view === 'timeline' && (\n        <Box flex={{direction: 'row', gap: 4, alignItems: 'center'}}>\n          <Button onClick={onPageEarlier}>&larr;</Button>\n          <Button onClick={onPageNow}>{backfill.endTimestamp ? 'Jump to End' : 'Now'}</Button>\n          <Button onClick={onPageLater}>&rarr;</Button>\n        </Box>\n      )}\n    </Box>\n  );\n\n  return view === 'timeline' ? (\n    <ExecutionRunTimeline\n      filter={filter}\n      rangeMs={rangeMs}\n      annotations={annotations}\n      actionBarComponents={actionBarComponents}\n    />\n  ) : (\n    <ExecutionRunTable filter={filter} actionBarComponents={actionBarComponents} />\n  );\n};\n\nconst ExecutionRunTable = ({\n  filter,\n  actionBarComponents,\n}: {\n  filter: RunsFilter;\n  actionBarComponents: React.ReactNode;\n}) => {\n  const {queryResult, paginationProps} = usePaginatedRunsTableRuns(filter);\n  const pipelineRunsOrError = queryResult.data?.pipelineRunsOrError;\n\n  const refreshState = useQueryRefreshAtInterval(queryResult, 15000);\n\n  if (!pipelineRunsOrError) {\n    return (\n      <Box padding={{vertical: 48}}>\n        <Spinner purpose=\"page\" />\n      </Box>\n    );\n  }\n  if (pipelineRunsOrError.__typename !== 'Runs') {\n    return (\n      <Box padding={{vertical: 64}}>\n        <NonIdealState icon=\"error\" title=\"Query Error\" description={pipelineRunsOrError.message} />\n      </Box>\n    );\n  }\n\n  return (\n    <>\n      <div style={{position: 'absolute', right: 16, top: -32}}>\n        <QueryRefreshCountdown refreshState={refreshState} />\n      </div>\n      <Box style={{flex: 1, overflowY: 'auto'}}>\n        <StickyTableContainer $top={56}>\n          <RunTable\n            runs={pipelineRunsOrError.results}\n            actionBarComponents={actionBarComponents}\n            actionBarSticky\n          />\n          {pipelineRunsOrError.results.length > 0 ? (\n            <Box margin={{vertical: 16}}>\n              <CursorHistoryControls {...paginationProps} />\n            </Box>\n          ) : null}\n        </StickyTableContainer>\n      </Box>\n    </>\n  );\n};\n\nconst ExecutionRunTimeline = ({\n  rangeMs,\n  annotations,\n  filter,\n  actionBarComponents,\n}: {\n  rangeMs: [number, number];\n  annotations: {label: string; ms: number}[];\n  filter: RunsFilter; // note: must be memoized\n  actionBarComponents: React.ReactNode;\n}) => {\n  const runsForTimelineRet = useRunsForTimeline({\n    refreshInterval: 2 * FIFTEEN_SECONDS,\n    showTicks: false,\n    rangeMs,\n    filter,\n  });\n\n  // Use deferred value to allow paginating quickly with the UI feeling more responsive.\n  const {jobs, loading} = useDeferredValue(runsForTimelineRet);\n\n  // Unwrap the timeline to show runs on separate rows, and sort them explicitly by\n  // newest => oldest so that they match what you see in the \"List\" tab.\n  const job = jobs[0];\n  const {runs, now} = React.useMemo(() => {\n    const now = Date.now();\n    return job\n      ? {runs: [...job.runs].sort((a, b) => b.startTime - a.startTime), now}\n      : {runs: [], now};\n  }, [job]);\n\n  return (\n    <>\n      <div style={{position: 'absolute', right: 16, top: -32}}>\n        <QueryRefreshCountdown refreshState={runsForTimelineRet.refreshState} />\n      </div>\n      <Box\n        padding={{horizontal: 24, vertical: 12}}\n        style={{position: 'sticky', top: 0, zIndex: 2, background: Colors.backgroundDefault()}}\n        border=\"bottom\"\n      >\n        {actionBarComponents}\n      </Box>\n      <ErrorBoundary region=\"timeline\">\n        <ExecutionTimeline\n          loading={loading}\n          rangeMs={rangeMs}\n          annotations={annotations}\n          runs={runs}\n          now={now}\n        />\n      </ErrorBoundary>\n    </>\n  );\n};\n","import {gql, useQuery} from '@apollo/client';\nimport {\n  Alert,\n  Box,\n  Colors,\n  Heading,\n  NonIdealState,\n  PageHeader,\n  Spinner,\n  Tab,\n  Tabs,\n} from '@dagster-io/ui-components';\nimport dayjs from 'dayjs';\nimport duration from 'dayjs/plugin/duration';\nimport relativeTime from 'dayjs/plugin/relativeTime';\nimport {useContext, useEffect, useReducer} from 'react';\nimport {Link, useParams} from 'react-router-dom';\nimport styled from 'styled-components';\n\nimport {BACKFILL_ACTIONS_BACKFILL_FRAGMENT, BackfillActionsMenu} from './BackfillActionsMenu';\nimport {BackfillLogsTab} from './BackfillLogsTab';\nimport {BackfillPartitionsTab} from './BackfillPartitionsTab';\nimport {BackfillRunsTab} from './BackfillRunsTab';\nimport {BackfillStatusTagForPage} from './BackfillStatusTagForPage';\nimport {TargetPartitionsDisplay} from './TargetPartitionsDisplay';\nimport {\n  BackfillStatusesByAssetQuery,\n  BackfillStatusesByAssetQueryVariables,\n} from './types/BackfillPage.types';\nimport {CloudOSSContext} from '../../app/CloudOSSContext';\nimport {PYTHON_ERROR_FRAGMENT} from '../../app/PythonErrorFragment';\nimport {PythonErrorInfo} from '../../app/PythonErrorInfo';\nimport {QueryRefreshCountdown, useQueryRefreshAtInterval} from '../../app/QueryRefresh';\nimport {useTrackPageView} from '../../app/analytics';\nimport {Timestamp} from '../../app/time/Timestamp';\nimport {BulkActionStatus} from '../../graphql/types';\nimport {useDocumentTitle} from '../../hooks/useDocumentTitle';\nimport {useQueryPersistedState} from '../../hooks/useQueryPersistedState';\nimport {useBlockTraceOnQueryResult} from '../../performance/TraceContext';\nimport {testId} from '../../testing/testId';\n\ndayjs.extend(duration);\ndayjs.extend(relativeTime);\n\nexport const BackfillPage = () => {\n  const {featureContext} = useContext(CloudOSSContext);\n  const {backfillId} = useParams<{backfillId: string}>();\n  useTrackPageView();\n  useDocumentTitle(`Backfill | ${backfillId}`);\n\n  const [selectedTab, setSelectedTab] = useQueryPersistedState<'partitions' | 'logs' | 'runs'>({\n    queryKey: 'tab',\n    defaults: {tab: 'partitions'},\n  });\n\n  const queryResult = useQuery<BackfillStatusesByAssetQuery, BackfillStatusesByAssetQueryVariables>(\n    BACKFILL_DETAILS_QUERY,\n    {variables: {backfillId}},\n  );\n  useBlockTraceOnQueryResult(queryResult, 'BackfillStatusesByAssetQuery');\n\n  const {data, error} = queryResult;\n\n  const backfill =\n    data?.partitionBackfillOrError.__typename === 'PartitionBackfill'\n      ? data.partitionBackfillOrError\n      : null;\n\n  // for asset backfills, all of the requested runs have concluded in order for the status to be BulkActionStatus.COMPLETED\n  const isInProgress = backfill\n    ? [BulkActionStatus.REQUESTED, BulkActionStatus.CANCELING].includes(backfill.status)\n    : true;\n\n  const refreshState = useQueryRefreshAtInterval(queryResult, 10000, isInProgress);\n\n  function content() {\n    if (!data || !data.partitionBackfillOrError) {\n      return (\n        <Box padding={64} data-testid={testId('page-loading-indicator')}>\n          <Spinner purpose=\"page\" />\n        </Box>\n      );\n    }\n    if (data.partitionBackfillOrError.__typename === 'PythonError') {\n      return <PythonErrorInfo error={data.partitionBackfillOrError} />;\n    }\n    if (data.partitionBackfillOrError.__typename === 'BackfillNotFoundError') {\n      return <NonIdealState icon=\"no-results\" title={data.partitionBackfillOrError.message} />;\n    }\n\n    const backfill = data.partitionBackfillOrError;\n\n    return (\n      <>\n        <Box\n          padding={24}\n          flex={{\n            direction: 'row',\n            justifyContent: 'space-between',\n            wrap: 'nowrap',\n            alignItems: 'center',\n          }}\n          data-testid={testId('backfill-page-details')}\n        >\n          <Detail\n            label=\"Created\"\n            detail={\n              <Timestamp\n                timestamp={{ms: Number(backfill.timestamp * 1000)}}\n                timeFormat={{showSeconds: true, showTimezone: false}}\n              />\n            }\n          />\n          <Detail\n            label=\"Duration\"\n            detail={\n              <Duration\n                start={backfill.timestamp * 1000}\n                end={backfill.endTimestamp ? backfill.endTimestamp * 1000 : null}\n              />\n            }\n          />\n          <Detail\n            label=\"Partition selection\"\n            detail={\n              <TargetPartitionsDisplay\n                targetPartitionCount={backfill.numPartitions || 0}\n                targetPartitions={backfill.assetBackfillData?.rootTargetedPartitions}\n              />\n            }\n          />\n          <Detail label=\"Status\" detail={<BackfillStatusTagForPage backfill={backfill} />} />\n        </Box>\n        <Box padding={{left: 24}} border=\"bottom\">\n          <Tabs size=\"large\" selectedTabId={selectedTab}>\n            <Tab id=\"partitions\" title=\"Partitions\" onClick={() => setSelectedTab('partitions')} />\n            <Tab id=\"runs\" title=\"Runs\" onClick={() => setSelectedTab('runs')} />\n            {featureContext.canSeeBackfillCoordinatorLogs ? (\n              <Tab id=\"logs\" title=\"Coordinator logs\" onClick={() => setSelectedTab('logs')} />\n            ) : null}\n          </Tabs>\n        </Box>\n\n        {error?.graphQLErrors && (\n          <Alert intent=\"error\" title={error.graphQLErrors.map((err) => err.message)} />\n        )}\n        <Box flex={{direction: 'column'}} style={{flex: 1, position: 'relative', minHeight: 0}}>\n          {selectedTab === 'partitions' && <BackfillPartitionsTab backfill={backfill} />}\n          {selectedTab === 'runs' && <BackfillRunsTab backfill={backfill} />}\n          {selectedTab === 'logs' && <BackfillLogsTab backfill={backfill} />}\n        </Box>\n      </>\n    );\n  }\n\n  return (\n    <Box flex={{direction: 'column'}} style={{height: '100%', overflow: 'hidden'}}>\n      <PageHeader\n        title={\n          <Heading>\n            <Link to=\"/overview/backfills\" style={{color: Colors.textLight()}}>\n              Backfills\n            </Link>\n            {' / '}\n            {backfillId}\n          </Heading>\n        }\n        right={\n          <Box flex={{gap: 12, alignItems: 'center'}}>\n            {isInProgress ? <QueryRefreshCountdown refreshState={refreshState} /> : null}\n            {backfill ? (\n              <BackfillActionsMenu\n                backfill={backfill}\n                refetch={queryResult.refetch}\n                canCancelRuns={backfill.status === BulkActionStatus.REQUESTED}\n              />\n            ) : null}\n          </Box>\n        }\n      />\n      {content()}\n    </Box>\n  );\n};\n\nconst Detail = ({label, detail}: {label: JSX.Element | string; detail: JSX.Element | string}) => (\n  <Box flex={{direction: 'column', gap: 4}} style={{minWidth: '280px'}}>\n    <Label>{label}</Label>\n    <div>{detail}</div>\n  </Box>\n);\n\nconst Label = styled.div`\n  color: ${Colors.textLight()};\n  font-size: 12px;\n  line-height: 16px;\n`;\n\nconst Duration = ({start, end}: {start: number; end?: number | null}) => {\n  const [_, rerender] = useReducer((s: number, _: any) => s + 1, 0);\n  useEffect(() => {\n    if (end) {\n      return;\n    }\n    // re-render once a minute to update the \"time ago\"\n    const intervalId = setInterval(rerender, 60000);\n    return () => clearInterval(intervalId);\n  }, [start, end]);\n  const duration = end ? end - start : Date.now() - start;\n\n  return <span>{formatDuration(duration)}</span>;\n};\n\nexport const BACKFILL_DETAILS_QUERY = gql`\n  query BackfillStatusesByAsset($backfillId: String!) {\n    partitionBackfillOrError(backfillId: $backfillId) {\n      ...BackfillDetailsBackfillFragment\n      ...PythonErrorFragment\n      ... on BackfillNotFoundError {\n        message\n      }\n    }\n  }\n\n  fragment BackfillDetailsBackfillFragment on PartitionBackfill {\n    id\n    status\n    timestamp\n    endTimestamp\n    numPartitions\n    ...BackfillActionsBackfillFragment\n\n    error {\n      ...PythonErrorFragment\n    }\n    assetBackfillData {\n      rootTargetedPartitions {\n        partitionKeys\n        ranges {\n          start\n          end\n        }\n      }\n      assetBackfillStatuses {\n        ... on AssetPartitionsStatusCounts {\n          assetKey {\n            path\n          }\n          numPartitionsTargeted\n          numPartitionsInProgress\n          numPartitionsMaterialized\n          numPartitionsFailed\n        }\n        ... on UnpartitionedAssetStatus {\n          assetKey {\n            path\n          }\n          inProgress\n          materialized\n          failed\n        }\n      }\n    }\n  }\n\n  ${PYTHON_ERROR_FRAGMENT}\n  ${BACKFILL_ACTIONS_BACKFILL_FRAGMENT}\n`;\n\nexport const BACKFILL_PARTITIONS_FOR_ASSET_KEY_QUERY = gql`\n  query BackfillPartitionsForAssetKey($backfillId: String!, $assetKey: AssetKeyInput!) {\n    partitionBackfillOrError(backfillId: $backfillId) {\n      ... on PartitionBackfill {\n        id\n        partitionsTargetedForAssetKey(assetKey: $assetKey) {\n          partitionKeys\n          ranges {\n            start\n            end\n          }\n        }\n      }\n    }\n  }\n`;\n\nconst formatDuration = (duration: number) => {\n  const seconds = Math.floor((duration / 1000) % 60);\n  const minutes = Math.floor((duration / (1000 * 60)) % 60);\n  const hours = Math.floor((duration / (1000 * 60 * 60)) % 24);\n  const days = Math.floor(duration / (1000 * 60 * 60 * 24));\n\n  let result = '';\n  if (days > 0) {\n    result += `${days}d `;\n    result += `${hours}h`;\n  } else if (hours > 0) {\n    result += `${hours}h `;\n    result += `${minutes}m`;\n  } else if (minutes > 0) {\n    result += `${minutes}m `;\n    result += `${seconds}s`;\n  }\n  return result.trim();\n};\n","import {Tag, Tooltip} from '@dagster-io/ui-components';\nimport {useVirtualizer} from '@tanstack/react-virtual';\nimport * as React from 'react';\n\nimport {OVERVIEW_COLLAPSED_KEY} from './OverviewExpansionKey';\nimport {BasicInstigationStateFragment} from './types/BasicInstigationStateFragment.types';\nimport {makeScheduleKey} from '../schedules/makeScheduleKey';\nimport {Container, Inner} from '../ui/VirtualizedTable';\nimport {findDuplicateRepoNames} from '../ui/findDuplicateRepoNames';\nimport {useRepoExpansionState} from '../ui/useRepoExpansionState';\nimport {\n  VirtualizedScheduleHeader,\n  VirtualizedScheduleRow,\n} from '../workspace/VirtualizedScheduleRow';\nimport {RepoRow} from '../workspace/VirtualizedWorkspaceTable';\nimport {repoAddressAsHumanString} from '../workspace/repoAddressAsString';\nimport {RepoAddress} from '../workspace/types';\n\ntype ScheduleInfo = {name: string; scheduleState: BasicInstigationStateFragment};\n\ntype Repository = {\n  repoAddress: RepoAddress;\n  schedules: ScheduleInfo[];\n};\n\ninterface Props {\n  repos: Repository[];\n  headerCheckbox: React.ReactNode;\n  checkedKeys: Set<string>;\n  onToggleCheckFactory: (path: string) => (values: {checked: boolean; shiftKey: boolean}) => void;\n}\n\ntype RowType =\n  | {type: 'header'; repoAddress: RepoAddress; scheduleCount: number}\n  | {type: 'schedule'; repoAddress: RepoAddress; schedule: ScheduleInfo};\n\nexport const OverviewScheduleTable = ({\n  repos,\n  headerCheckbox,\n  checkedKeys,\n  onToggleCheckFactory,\n}: Props) => {\n  const parentRef = React.useRef<HTMLDivElement | null>(null);\n  const allKeys = React.useMemo(\n    () => repos.map(({repoAddress}) => repoAddressAsHumanString(repoAddress)),\n    [repos],\n  );\n\n  const {expandedKeys, onToggle, onToggleAll} = useRepoExpansionState(\n    OVERVIEW_COLLAPSED_KEY,\n    allKeys,\n  );\n\n  const flattened: RowType[] = React.useMemo(() => {\n    const flat: RowType[] = [];\n    repos.forEach(({repoAddress, schedules}) => {\n      flat.push({type: 'header', repoAddress, scheduleCount: schedules.length});\n      const repoKey = repoAddressAsHumanString(repoAddress);\n      if (expandedKeys.includes(repoKey)) {\n        schedules.forEach((schedule) => {\n          flat.push({type: 'schedule', repoAddress, schedule});\n        });\n      }\n    });\n    return flat;\n  }, [repos, expandedKeys]);\n\n  const duplicateRepoNames = findDuplicateRepoNames(repos.map(({repoAddress}) => repoAddress.name));\n\n  const rowVirtualizer = useVirtualizer({\n    count: flattened.length,\n    getScrollElement: () => parentRef.current,\n    estimateSize: (ii: number) => {\n      const row = flattened[ii];\n      return row?.type === 'header' ? 32 : 64;\n    },\n    overscan: 10,\n  });\n\n  const totalHeight = rowVirtualizer.getTotalSize();\n  const items = rowVirtualizer.getVirtualItems();\n\n  return (\n    <>\n      <div style={{overflow: 'hidden'}}>\n        <Container ref={parentRef}>\n          <VirtualizedScheduleHeader checkbox={headerCheckbox} />\n          <Inner $totalHeight={totalHeight}>\n            {items.map(({index, key, size, start}) => {\n              const row: RowType = flattened[index]!;\n              const type = row!.type;\n              if (type === 'header') {\n                return (\n                  <RepoRow\n                    repoAddress={row.repoAddress}\n                    key={key}\n                    height={size}\n                    start={start}\n                    onToggle={onToggle}\n                    onToggleAll={onToggleAll}\n                    expanded={expandedKeys.includes(repoAddressAsHumanString(row.repoAddress))}\n                    showLocation={duplicateRepoNames.has(row.repoAddress.name)}\n                    rightElement={\n                      <Tooltip\n                        content={\n                          row.scheduleCount === 1 ? '1 schedule' : `${row.scheduleCount} schedules`\n                        }\n                        placement=\"top\"\n                      >\n                        <Tag>{row.scheduleCount}</Tag>\n                      </Tooltip>\n                    }\n                  />\n                );\n              }\n\n              const scheduleKey = makeScheduleKey(row.repoAddress, row.schedule.name);\n\n              return (\n                <VirtualizedScheduleRow\n                  key={key}\n                  name={row.schedule.name}\n                  scheduleState={row.schedule.scheduleState}\n                  showCheckboxColumn={!!headerCheckbox}\n                  checked={checkedKeys.has(scheduleKey)}\n                  onToggleChecked={onToggleCheckFactory(scheduleKey)}\n                  repoAddress={row.repoAddress}\n                  height={size}\n                  start={start}\n                />\n              );\n            })}\n          </Inner>\n        </Container>\n      </div>\n    </>\n  );\n};\n","import {gql, useQuery} from '@apollo/client';\nimport {Box, Colors, NonIdealState, Spinner, TextInput, Tooltip} from '@dagster-io/ui-components';\nimport {useContext, useMemo} from 'react';\n\nimport {BASIC_INSTIGATION_STATE_FRAGMENT} from './BasicInstigationStateFragment';\nimport {OverviewScheduleTable} from './OverviewSchedulesTable';\nimport {sortRepoBuckets} from './sortRepoBuckets';\nimport {BasicInstigationStateFragment} from './types/BasicInstigationStateFragment.types';\nimport {\n  OverviewSchedulesQuery,\n  OverviewSchedulesQueryVariables,\n} from './types/OverviewSchedules.types';\nimport {visibleRepoKeys} from './visibleRepoKeys';\nimport {PYTHON_ERROR_FRAGMENT} from '../app/PythonErrorFragment';\nimport {FIFTEEN_SECONDS, useQueryRefreshAtInterval} from '../app/QueryRefresh';\nimport {useQueryPersistedState} from '../hooks/useQueryPersistedState';\nimport {useSelectionReducer} from '../hooks/useSelectionReducer';\nimport {INSTANCE_HEALTH_FRAGMENT} from '../instance/InstanceHealthFragment';\nimport {filterPermissionedInstigationState} from '../instigation/filterPermissionedInstigationState';\nimport {useBlockTraceOnQueryResult} from '../performance/TraceContext';\nimport {ScheduleBulkActionMenu} from '../schedules/ScheduleBulkActionMenu';\nimport {SchedulerInfo} from '../schedules/SchedulerInfo';\nimport {makeScheduleKey} from '../schedules/makeScheduleKey';\nimport {CheckAllBox} from '../ui/CheckAllBox';\nimport {useFilters} from '../ui/Filters';\nimport {useCodeLocationFilter} from '../ui/Filters/useCodeLocationFilter';\nimport {useInstigationStatusFilter} from '../ui/Filters/useInstigationStatusFilter';\nimport {SearchInputSpinner} from '../ui/SearchInputSpinner';\nimport {WorkspaceContext} from '../workspace/WorkspaceContext';\nimport {buildRepoAddress} from '../workspace/buildRepoAddress';\nimport {repoAddressAsHumanString} from '../workspace/repoAddressAsString';\nimport {RepoAddress} from '../workspace/types';\nimport {WorkspaceLocationNodeFragment} from '../workspace/types/WorkspaceQueries.types';\n\nexport const OverviewSchedules = () => {\n  const {\n    allRepos,\n    visibleRepos,\n    loading: workspaceLoading,\n    data: cachedData,\n  } = useContext(WorkspaceContext);\n  const repoCount = allRepos.length;\n  const [searchValue, setSearchValue] = useQueryPersistedState<string>({\n    queryKey: 'search',\n    defaults: {search: ''},\n  });\n\n  const codeLocationFilter = useCodeLocationFilter();\n  const runningStateFilter = useInstigationStatusFilter();\n\n  const filters = useMemo(\n    () => [codeLocationFilter, runningStateFilter],\n    [codeLocationFilter, runningStateFilter],\n  );\n  const {button: filterButton, activeFiltersJsx} = useFilters({filters});\n\n  const queryResultOverview = useQuery<OverviewSchedulesQuery, OverviewSchedulesQueryVariables>(\n    OVERVIEW_SCHEDULES_QUERY,\n    {\n      fetchPolicy: 'network-only',\n      notifyOnNetworkStatusChange: true,\n    },\n  );\n  const {data, loading: queryLoading} = queryResultOverview;\n  useBlockTraceOnQueryResult(queryResultOverview, 'OverviewSchedulesQuery');\n\n  const refreshState = useQueryRefreshAtInterval(queryResultOverview, FIFTEEN_SECONDS);\n\n  const repoBuckets = useMemo(() => {\n    const visibleKeys = visibleRepoKeys(visibleRepos);\n    const cachedEntries = Object.values(cachedData).filter(\n      (location): location is Extract<typeof location, {__typename: 'WorkspaceLocationEntry'}> =>\n        location.__typename === 'WorkspaceLocationEntry',\n    );\n    const workspaceOrError = data?.workspaceOrError;\n    const entries =\n      workspaceOrError?.__typename === 'Workspace'\n        ? workspaceOrError.locationEntries\n        : cachedEntries;\n    return buildBuckets(entries).filter(({repoAddress}) =>\n      visibleKeys.has(repoAddressAsHumanString(repoAddress)),\n    );\n  }, [data, cachedData, visibleRepos]);\n\n  const {state: runningState} = runningStateFilter;\n  const filteredBuckets = useMemo(() => {\n    return repoBuckets.map(({schedules, ...rest}) => {\n      return {\n        ...rest,\n        schedules: runningState.size\n          ? schedules.filter(({scheduleState}) => runningState.has(scheduleState.status))\n          : schedules,\n      };\n    });\n  }, [repoBuckets, runningState]);\n\n  const sanitizedSearch = searchValue.trim().toLocaleLowerCase();\n  const anySearch = sanitizedSearch.length > 0;\n\n  const filteredBySearch = useMemo(() => {\n    const searchToLower = sanitizedSearch.toLocaleLowerCase();\n    return filteredBuckets\n      .map(({repoAddress, schedules}) => ({\n        repoAddress,\n        schedules: schedules.filter(({name}) => name.toLocaleLowerCase().includes(searchToLower)),\n      }))\n      .filter(({schedules}) => schedules.length > 0);\n  }, [filteredBuckets, sanitizedSearch]);\n\n  const anySchedulesVisible = useMemo(\n    () => filteredBySearch.some(({schedules}) => schedules.length > 0),\n    [filteredBySearch],\n  );\n\n  // Collect all schedules across visible code locations that the viewer has permission\n  // to start or stop.\n  const allPermissionedSchedules = useMemo(() => {\n    return repoBuckets\n      .map(({repoAddress, schedules}) => {\n        return schedules\n          .filter(({scheduleState}) => filterPermissionedInstigationState(scheduleState))\n          .map(({name, scheduleState}) => ({\n            repoAddress,\n            scheduleName: name,\n            scheduleState,\n          }));\n      })\n      .flat();\n  }, [repoBuckets]);\n\n  // Build a list of keys from the permissioned schedules for use in checkbox state.\n  // This includes collapsed code locations.\n  const allPermissionedScheduleKeys = useMemo(() => {\n    return allPermissionedSchedules.map(({repoAddress, scheduleName}) =>\n      makeScheduleKey(repoAddress, scheduleName),\n    );\n  }, [allPermissionedSchedules]);\n\n  const [{checkedIds: checkedKeys}, {onToggleFactory, onToggleAll}] = useSelectionReducer(\n    allPermissionedScheduleKeys,\n  );\n\n  // Filter to find keys that are visible given any text search.\n  const permissionedKeysOnScreen = useMemo(() => {\n    const filteredKeys = new Set(\n      filteredBySearch\n        .map(({repoAddress, schedules}) => {\n          return schedules.map(({name}) => makeScheduleKey(repoAddress, name));\n        })\n        .flat(),\n    );\n    return allPermissionedScheduleKeys.filter((key) => filteredKeys.has(key));\n  }, [allPermissionedScheduleKeys, filteredBySearch]);\n\n  // Determine the list of schedule objects that have been checked by the viewer.\n  // These are the schedules that will be operated on by the bulk start/stop action.\n  const checkedSchedules = useMemo(() => {\n    const checkedKeysOnScreen = new Set(\n      permissionedKeysOnScreen.filter((key: string) => checkedKeys.has(key)),\n    );\n    return allPermissionedSchedules.filter(({repoAddress, scheduleName}) => {\n      return checkedKeysOnScreen.has(makeScheduleKey(repoAddress, scheduleName));\n    });\n  }, [permissionedKeysOnScreen, allPermissionedSchedules, checkedKeys]);\n\n  const viewerHasAnyInstigationPermission = allPermissionedScheduleKeys.length > 0;\n  const checkedCount = checkedSchedules.length;\n\n  const loading = workspaceLoading && !repoCount && queryLoading && !data;\n\n  const content = () => {\n    if (loading) {\n      return (\n        <Box flex={{direction: 'row', justifyContent: 'center'}} style={{paddingTop: '100px'}}>\n          <Box flex={{direction: 'row', alignItems: 'center', gap: 16}}>\n            <Spinner purpose=\"body-text\" />\n            <div style={{color: Colors.textLight()}}>Loading schedules…</div>\n          </Box>\n        </Box>\n      );\n    }\n\n    const anyReposHidden = allRepos.length > visibleRepos.length;\n\n    if (!filteredBySearch.length) {\n      if (anySearch) {\n        return (\n          <Box padding={{top: 20}}>\n            <NonIdealState\n              icon=\"search\"\n              title=\"No matching schedules\"\n              description={\n                anyReposHidden ? (\n                  <div>\n                    No schedules matching <strong>{searchValue}</strong> were found in the selected\n                    code locations\n                  </div>\n                ) : (\n                  <div>\n                    No schedules matching <strong>{searchValue}</strong> were found in your\n                    definitions\n                  </div>\n                )\n              }\n            />\n          </Box>\n        );\n      }\n\n      return (\n        <Box padding={{top: 20}}>\n          <NonIdealState\n            icon=\"search\"\n            title=\"No schedules\"\n            description={\n              anyReposHidden\n                ? 'No matching schedules were found in the selected code locations'\n                : 'No matching schedules were found in your definitions'\n            }\n          />\n        </Box>\n      );\n    }\n\n    return (\n      <OverviewScheduleTable\n        headerCheckbox={\n          viewerHasAnyInstigationPermission ? (\n            <CheckAllBox\n              checkedCount={checkedCount}\n              totalCount={permissionedKeysOnScreen.length}\n              onToggleAll={onToggleAll}\n            />\n          ) : undefined\n        }\n        repos={filteredBySearch}\n        checkedKeys={checkedKeys}\n        onToggleCheckFactory={onToggleFactory}\n      />\n    );\n  };\n\n  const showSearchSpinner = queryLoading && !data;\n\n  return (\n    <>\n      <Box\n        padding={{horizontal: 24, vertical: 16}}\n        flex={{direction: 'row', alignItems: 'center', justifyContent: 'space-between'}}\n      >\n        <Box flex={{direction: 'row', gap: 12}}>\n          {filterButton}\n          <TextInput\n            icon=\"search\"\n            value={searchValue}\n            rightElement={\n              showSearchSpinner ? (\n                <SearchInputSpinner tooltipContent=\"Loading schedules…\" />\n              ) : undefined\n            }\n            onChange={(e) => {\n              setSearchValue(e.target.value);\n              onToggleAll(false);\n            }}\n            placeholder=\"Filter by schedule name…\"\n            style={{width: '340px'}}\n          />\n        </Box>\n        <Tooltip\n          content=\"You do not have permission to start or stop these schedules\"\n          canShow={anySchedulesVisible && !viewerHasAnyInstigationPermission}\n          placement=\"top-end\"\n          useDisabledButtonTooltipFix\n        >\n          <ScheduleBulkActionMenu\n            schedules={checkedSchedules}\n            onDone={() => refreshState.refetch()}\n          />\n        </Tooltip>\n      </Box>\n      {activeFiltersJsx.length ? (\n        <Box\n          padding={{vertical: 8, horizontal: 24}}\n          border=\"top-and-bottom\"\n          flex={{direction: 'row', gap: 8}}\n        >\n          {activeFiltersJsx}\n        </Box>\n      ) : null}\n      {loading && !repoCount ? (\n        <Box padding={64}>\n          <Spinner purpose=\"page\" />\n        </Box>\n      ) : (\n        <>\n          <SchedulerInfo\n            daemonHealth={data?.instance.daemonHealth}\n            padding={{vertical: 16, horizontal: 24}}\n            border=\"top\"\n          />\n          {content()}\n        </>\n      )}\n    </>\n  );\n};\n\ntype RepoBucket = {\n  repoAddress: RepoAddress;\n  schedules: {name: string; scheduleState: BasicInstigationStateFragment}[];\n};\n\nconst buildBuckets = (\n  locationEntries:\n    | Extract<\n        OverviewSchedulesQuery['workspaceOrError'],\n        {__typename: 'Workspace'}\n      >['locationEntries']\n    | Extract<WorkspaceLocationNodeFragment, {__typename: 'WorkspaceLocationEntry'}>[],\n): RepoBucket[] => {\n  const entries = locationEntries.map((entry) => entry.locationOrLoadError);\n  const buckets = [];\n\n  for (const entry of entries) {\n    if (entry?.__typename !== 'RepositoryLocation') {\n      continue;\n    }\n\n    for (const repo of entry.repositories) {\n      const {name, schedules} = repo;\n      const repoAddress = buildRepoAddress(name, entry.name);\n      const scheduleNames = schedules.map(({name, scheduleState}) => ({name, scheduleState}));\n\n      if (scheduleNames.length > 0) {\n        buckets.push({\n          repoAddress,\n          schedules: scheduleNames,\n        });\n      }\n    }\n  }\n\n  return sortRepoBuckets(buckets);\n};\n\nconst OVERVIEW_SCHEDULES_QUERY = gql`\n  query OverviewSchedulesQuery {\n    workspaceOrError {\n      ... on Workspace {\n        id\n        locationEntries {\n          id\n          locationOrLoadError {\n            ... on RepositoryLocation {\n              id\n              name\n              repositories {\n                id\n                name\n                schedules {\n                  id\n                  name\n                  description\n                  scheduleState {\n                    id\n                    ...BasicInstigationStateFragment\n                  }\n                }\n              }\n            }\n            ...PythonErrorFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n    instance {\n      id\n      ...InstanceHealthFragment\n    }\n  }\n\n  ${BASIC_INSTIGATION_STATE_FRAGMENT}\n  ${PYTHON_ERROR_FRAGMENT}\n  ${INSTANCE_HEALTH_FRAGMENT}\n`;\n","import {Tag, Tooltip} from '@dagster-io/ui-components';\nimport {useVirtualizer} from '@tanstack/react-virtual';\nimport * as React from 'react';\n\nimport {OVERVIEW_COLLAPSED_KEY} from './OverviewExpansionKey';\nimport {BasicInstigationStateFragment} from './types/BasicInstigationStateFragment.types';\nimport {makeSensorKey} from '../sensors/makeSensorKey';\nimport {Container, Inner} from '../ui/VirtualizedTable';\nimport {findDuplicateRepoNames} from '../ui/findDuplicateRepoNames';\nimport {useRepoExpansionState} from '../ui/useRepoExpansionState';\nimport {VirtualizedSensorHeader, VirtualizedSensorRow} from '../workspace/VirtualizedSensorRow';\nimport {RepoRow} from '../workspace/VirtualizedWorkspaceTable';\nimport {repoAddressAsHumanString} from '../workspace/repoAddressAsString';\nimport {RepoAddress} from '../workspace/types';\n\ntype SensorInfo = {name: string; sensorState: BasicInstigationStateFragment};\n\ntype Repository = {\n  repoAddress: RepoAddress;\n  sensors: SensorInfo[];\n};\n\ninterface Props {\n  repos: Repository[];\n  headerCheckbox: React.ReactNode;\n  checkedKeys: Set<string>;\n  onToggleCheckFactory: (path: string) => (values: {checked: boolean; shiftKey: boolean}) => void;\n}\n\ntype RowType =\n  | {type: 'header'; repoAddress: RepoAddress; sensorCount: number}\n  | {type: 'sensor'; repoAddress: RepoAddress; sensor: SensorInfo};\n\nexport const OverviewSensorTable = ({\n  repos,\n  headerCheckbox,\n  checkedKeys,\n  onToggleCheckFactory,\n}: Props) => {\n  const parentRef = React.useRef<HTMLDivElement | null>(null);\n  const allKeys = React.useMemo(\n    () => repos.map(({repoAddress}) => repoAddressAsHumanString(repoAddress)),\n    [repos],\n  );\n  const {expandedKeys, onToggle, onToggleAll} = useRepoExpansionState(\n    OVERVIEW_COLLAPSED_KEY,\n    allKeys,\n  );\n\n  const flattened: RowType[] = React.useMemo(() => {\n    const flat: RowType[] = [];\n    repos.forEach(({repoAddress, sensors}) => {\n      flat.push({type: 'header', repoAddress, sensorCount: sensors.length});\n      const repoKey = repoAddressAsHumanString(repoAddress);\n      if (expandedKeys.includes(repoKey)) {\n        sensors.forEach((sensor) => {\n          flat.push({type: 'sensor', repoAddress, sensor});\n        });\n      }\n    });\n    return flat;\n  }, [repos, expandedKeys]);\n\n  const duplicateRepoNames = findDuplicateRepoNames(repos.map(({repoAddress}) => repoAddress.name));\n\n  const rowVirtualizer = useVirtualizer({\n    count: flattened.length,\n    getScrollElement: () => parentRef.current,\n    estimateSize: (ii: number) => {\n      const row = flattened[ii];\n      return row?.type === 'header' ? 32 : 64;\n    },\n    overscan: 10,\n  });\n\n  const totalHeight = rowVirtualizer.getTotalSize();\n  const items = rowVirtualizer.getVirtualItems();\n\n  return (\n    <div style={{overflow: 'hidden'}}>\n      <Container ref={parentRef}>\n        <VirtualizedSensorHeader checkbox={headerCheckbox} />\n        <Inner $totalHeight={totalHeight}>\n          {items.map(({index, key, size, start}) => {\n            const row: RowType = flattened[index]!;\n            const type = row!.type;\n            if (type === 'header') {\n              return (\n                <RepoRow\n                  repoAddress={row.repoAddress}\n                  key={key}\n                  height={size}\n                  start={start}\n                  onToggle={onToggle}\n                  onToggleAll={onToggleAll}\n                  expanded={expandedKeys.includes(repoAddressAsHumanString(row.repoAddress))}\n                  showLocation={duplicateRepoNames.has(row.repoAddress.name)}\n                  rightElement={\n                    <Tooltip\n                      content={row.sensorCount === 1 ? '1 sensor' : `${row.sensorCount} sensors`}\n                      placement=\"top\"\n                    >\n                      <Tag>{row.sensorCount}</Tag>\n                    </Tooltip>\n                  }\n                />\n              );\n            }\n\n            const sensorKey = makeSensorKey(row.repoAddress, row.sensor.name);\n\n            return (\n              <VirtualizedSensorRow\n                key={key}\n                name={row.sensor.name}\n                sensorState={row.sensor.sensorState}\n                showCheckboxColumn={!!headerCheckbox}\n                checked={checkedKeys.has(sensorKey)}\n                onToggleChecked={onToggleCheckFactory(sensorKey)}\n                repoAddress={row.repoAddress}\n                height={size}\n                start={start}\n              />\n            );\n          })}\n        </Inner>\n      </Container>\n    </div>\n  );\n};\n","import {gql, useQuery} from '@apollo/client';\nimport {Box, Colors, NonIdealState, Spinner, TextInput, Tooltip} from '@dagster-io/ui-components';\nimport {useContext, useMemo} from 'react';\n\nimport {BASIC_INSTIGATION_STATE_FRAGMENT} from './BasicInstigationStateFragment';\nimport {OverviewSensorTable} from './OverviewSensorsTable';\nimport {sortRepoBuckets} from './sortRepoBuckets';\nimport {OverviewSensorsQuery, OverviewSensorsQueryVariables} from './types/OverviewSensors.types';\nimport {visibleRepoKeys} from './visibleRepoKeys';\nimport {PYTHON_ERROR_FRAGMENT} from '../app/PythonErrorFragment';\nimport {\n  FIFTEEN_SECONDS,\n  QueryRefreshCountdown,\n  useQueryRefreshAtInterval,\n} from '../app/QueryRefresh';\nimport {SensorType} from '../graphql/types';\nimport {useQueryPersistedState} from '../hooks/useQueryPersistedState';\nimport {useSelectionReducer} from '../hooks/useSelectionReducer';\nimport {INSTANCE_HEALTH_FRAGMENT} from '../instance/InstanceHealthFragment';\nimport {filterPermissionedInstigationState} from '../instigation/filterPermissionedInstigationState';\nimport {useBlockTraceOnQueryResult} from '../performance/TraceContext';\nimport {SensorBulkActionMenu} from '../sensors/SensorBulkActionMenu';\nimport {SensorInfo} from '../sensors/SensorInfo';\nimport {makeSensorKey} from '../sensors/makeSensorKey';\nimport {CheckAllBox} from '../ui/CheckAllBox';\nimport {useFilters} from '../ui/Filters';\nimport {useCodeLocationFilter} from '../ui/Filters/useCodeLocationFilter';\nimport {useInstigationStatusFilter} from '../ui/Filters/useInstigationStatusFilter';\nimport {useStaticSetFilter} from '../ui/Filters/useStaticSetFilter';\nimport {SearchInputSpinner} from '../ui/SearchInputSpinner';\nimport {SENSOR_TYPE_META} from '../workspace/VirtualizedSensorRow';\nimport {WorkspaceContext} from '../workspace/WorkspaceContext';\nimport {buildRepoAddress} from '../workspace/buildRepoAddress';\nimport {repoAddressAsHumanString} from '../workspace/repoAddressAsString';\nimport {WorkspaceLocationNodeFragment} from '../workspace/types/WorkspaceQueries.types';\n\nfunction toSetFilterValue(type: SensorType) {\n  const label = SENSOR_TYPE_META[type].name;\n  return {\n    label,\n    value: {type, label},\n    match: [label],\n  };\n}\n\nconst SENSOR_TYPE_TO_FILTER: Partial<Record<SensorType, ReturnType<typeof toSetFilterValue>>> = {\n  [SensorType.ASSET]: toSetFilterValue(SensorType.ASSET),\n  [SensorType.AUTO_MATERIALIZE]: toSetFilterValue(SensorType.AUTO_MATERIALIZE),\n  [SensorType.AUTOMATION]: toSetFilterValue(SensorType.AUTOMATION),\n  [SensorType.FRESHNESS_POLICY]: toSetFilterValue(SensorType.FRESHNESS_POLICY),\n  [SensorType.MULTI_ASSET]: toSetFilterValue(SensorType.MULTI_ASSET),\n  [SensorType.RUN_STATUS]: toSetFilterValue(SensorType.RUN_STATUS),\n  [SensorType.STANDARD]: toSetFilterValue(SensorType.STANDARD),\n};\nconst ALL_SENSOR_TYPE_FILTERS = Object.values(SENSOR_TYPE_TO_FILTER);\n\nexport const OverviewSensors = () => {\n  const {\n    allRepos,\n    visibleRepos,\n    loading: workspaceLoading,\n    data: cachedData,\n  } = useContext(WorkspaceContext);\n\n  const repoCount = allRepos.length;\n  const [searchValue, setSearchValue] = useQueryPersistedState<string>({\n    queryKey: 'search',\n    defaults: {search: ''},\n  });\n\n  const [sensorTypes, setSensorTypes] = useQueryPersistedState<Set<SensorType>>({\n    encode: (vals) => ({sensorType: vals.size ? Array.from(vals).join(',') : undefined}),\n    decode: (qs) => new Set((qs.sensorType?.split(',') as SensorType[]) || []),\n  });\n\n  const codeLocationFilter = useCodeLocationFilter();\n  const runningStateFilter = useInstigationStatusFilter();\n  const sensorTypeFilter = useStaticSetFilter({\n    name: 'Sensor type',\n    allValues: ALL_SENSOR_TYPE_FILTERS,\n    icon: 'sensors',\n    getStringValue: (value) => value.label,\n    state: useMemo(() => {\n      return new Set(Array.from(sensorTypes).map((type) => SENSOR_TYPE_TO_FILTER[type]!.value));\n    }, [sensorTypes]),\n\n    renderLabel: ({value}) => <span>{value.label}</span>,\n    onStateChanged: (state) => {\n      setSensorTypes(new Set(Array.from(state).map((value) => value.type)));\n    },\n  });\n\n  const filters = useMemo(\n    () => [codeLocationFilter, runningStateFilter, sensorTypeFilter],\n    [codeLocationFilter, runningStateFilter, sensorTypeFilter],\n  );\n  const {button: filterButton, activeFiltersJsx} = useFilters({filters});\n\n  const queryResultOverview = useQuery<OverviewSensorsQuery, OverviewSensorsQueryVariables>(\n    OVERVIEW_SENSORS_QUERY,\n    {\n      fetchPolicy: 'network-only',\n      notifyOnNetworkStatusChange: true,\n    },\n  );\n  const {data, loading: queryLoading} = queryResultOverview;\n\n  useBlockTraceOnQueryResult(queryResultOverview, 'OverviewSensorsQuery');\n\n  const refreshState = useQueryRefreshAtInterval(queryResultOverview, FIFTEEN_SECONDS);\n\n  const repoBuckets = useMemo(() => {\n    const cachedEntries = Object.values(cachedData).filter(\n      (location): location is Extract<typeof location, {__typename: 'WorkspaceLocationEntry'}> =>\n        location.__typename === 'WorkspaceLocationEntry',\n    );\n    const workspaceOrError = data?.workspaceOrError;\n    const entries =\n      workspaceOrError?.__typename === 'Workspace'\n        ? workspaceOrError.locationEntries\n        : cachedEntries;\n    const visibleKeys = visibleRepoKeys(visibleRepos);\n    return buildBuckets(entries).filter(({repoAddress}) =>\n      visibleKeys.has(repoAddressAsHumanString(repoAddress)),\n    );\n  }, [data, cachedData, visibleRepos]);\n\n  const {state: runningState} = runningStateFilter;\n\n  const filteredBuckets = useMemo(() => {\n    return repoBuckets.map(({sensors, ...rest}) => {\n      return {\n        ...rest,\n        sensors: sensors.filter(({sensorState, sensorType}) => {\n          if (runningState.size && !runningState.has(sensorState.status)) {\n            return false;\n          }\n          if (sensorTypes.size && !sensorTypes.has(sensorType)) {\n            return false;\n          }\n          return true;\n        }),\n      };\n    });\n  }, [repoBuckets, runningState, sensorTypes]);\n\n  const sanitizedSearch = searchValue.trim().toLocaleLowerCase();\n  const anySearch = sanitizedSearch.length > 0;\n\n  const filteredBySearch = useMemo(() => {\n    const searchToLower = sanitizedSearch.toLocaleLowerCase();\n    return filteredBuckets\n      .map(({repoAddress, sensors}) => ({\n        repoAddress,\n        sensors: sensors.filter(({name}) => name.toLocaleLowerCase().includes(searchToLower)),\n      }))\n      .filter(({sensors}) => sensors.length > 0);\n  }, [filteredBuckets, sanitizedSearch]);\n\n  const anySensorsVisible = useMemo(\n    () => filteredBySearch.some(({sensors}) => sensors.length > 0),\n    [filteredBySearch],\n  );\n\n  // Collect all sensors across visible code locations that the viewer has permission\n  // to start or stop.\n  const allPermissionedSensors = useMemo(() => {\n    return repoBuckets\n      .map(({repoAddress, sensors}) => {\n        return sensors\n          .filter(({sensorState}) => filterPermissionedInstigationState(sensorState))\n          .map(({name, sensorState}) => ({\n            repoAddress,\n            sensorName: name,\n            sensorState,\n          }));\n      })\n      .flat();\n  }, [repoBuckets]);\n\n  // Build a list of keys from the permissioned schedules for use in checkbox state.\n  // This includes collapsed code locations.\n  const allPermissionedSensorKeys = useMemo(() => {\n    return allPermissionedSensors.map(({repoAddress, sensorName}) =>\n      makeSensorKey(repoAddress, sensorName),\n    );\n  }, [allPermissionedSensors]);\n\n  const [{checkedIds: checkedKeys}, {onToggleFactory, onToggleAll}] =\n    useSelectionReducer(allPermissionedSensorKeys);\n\n  // Filter to find keys that are visible given any text search.\n  const permissionedKeysOnScreen = useMemo(() => {\n    const filteredKeys = new Set(\n      filteredBySearch\n        .map(({repoAddress, sensors}) => {\n          return sensors.map(({name}) => makeSensorKey(repoAddress, name));\n        })\n        .flat(),\n    );\n    return allPermissionedSensorKeys.filter((key) => filteredKeys.has(key));\n  }, [allPermissionedSensorKeys, filteredBySearch]);\n\n  // Determine the list of sensor objects that have been checked by the viewer.\n  // These are the sensors that will be operated on by the bulk start/stop action.\n  const checkedSensors = useMemo(() => {\n    const checkedKeysOnScreen = new Set(\n      permissionedKeysOnScreen.filter((key: string) => checkedKeys.has(key)),\n    );\n    return allPermissionedSensors.filter(({repoAddress, sensorName}) => {\n      return checkedKeysOnScreen.has(makeSensorKey(repoAddress, sensorName));\n    });\n  }, [permissionedKeysOnScreen, allPermissionedSensors, checkedKeys]);\n\n  const viewerHasAnyInstigationPermission = allPermissionedSensorKeys.length > 0;\n  const checkedCount = checkedSensors.length;\n\n  const loading = workspaceLoading && queryLoading && !data;\n  const content = () => {\n    if (loading) {\n      return (\n        <Box flex={{direction: 'row', justifyContent: 'center'}} style={{paddingTop: '100px'}}>\n          <Box flex={{direction: 'row', alignItems: 'center', gap: 16}}>\n            <Spinner purpose=\"body-text\" />\n            <div style={{color: Colors.textLight()}}>Loading sensors…</div>\n          </Box>\n        </Box>\n      );\n    }\n\n    const anyReposHidden = allRepos.length > visibleRepos.length;\n\n    if (!filteredBySearch.length) {\n      if (anySearch) {\n        return (\n          <Box padding={{top: 20}}>\n            <NonIdealState\n              icon=\"search\"\n              title=\"No matching sensors\"\n              description={\n                anyReposHidden ? (\n                  <div>\n                    No sensors matching <strong>{searchValue}</strong> were found in the selected\n                    code locations\n                  </div>\n                ) : (\n                  <div>\n                    No sensors matching <strong>{searchValue}</strong> were found in your\n                    definitions\n                  </div>\n                )\n              }\n            />\n          </Box>\n        );\n      }\n\n      return (\n        <Box padding={{top: 20}}>\n          <NonIdealState\n            icon=\"search\"\n            title=\"No sensors\"\n            description={\n              anyReposHidden\n                ? 'No sensors were found in the selected code locations'\n                : 'No sensors were found in your definitions'\n            }\n          />\n        </Box>\n      );\n    }\n\n    return (\n      <OverviewSensorTable\n        headerCheckbox={\n          viewerHasAnyInstigationPermission ? (\n            <CheckAllBox\n              checkedCount={checkedCount}\n              totalCount={permissionedKeysOnScreen.length}\n              onToggleAll={onToggleAll}\n            />\n          ) : undefined\n        }\n        repos={filteredBySearch}\n        checkedKeys={checkedKeys}\n        onToggleCheckFactory={onToggleFactory}\n      />\n    );\n  };\n\n  const showSearchSpinner = queryLoading && !data;\n\n  return (\n    <>\n      <Box\n        padding={{horizontal: 24, vertical: 16}}\n        flex={{\n          direction: 'row',\n          alignItems: 'center',\n          justifyContent: 'space-between',\n          gap: 12,\n          grow: 0,\n        }}\n      >\n        <Box flex={{direction: 'row', gap: 12}}>\n          {filterButton}\n          <TextInput\n            icon=\"search\"\n            value={searchValue}\n            rightElement={\n              showSearchSpinner ? (\n                <SearchInputSpinner tooltipContent=\"Loading sensors…\" />\n              ) : undefined\n            }\n            onChange={(e) => setSearchValue(e.target.value)}\n            placeholder=\"Filter by sensor name…\"\n            style={{width: '340px'}}\n          />\n        </Box>\n        <Box flex={{direction: 'row', gap: 12, alignItems: 'center'}}>\n          <QueryRefreshCountdown refreshState={refreshState} />\n          <Tooltip\n            content=\"You do not have permission to start or stop these schedules\"\n            canShow={anySensorsVisible && !viewerHasAnyInstigationPermission}\n            placement=\"top-end\"\n            useDisabledButtonTooltipFix\n          >\n            <SensorBulkActionMenu sensors={checkedSensors} onDone={() => refreshState.refetch()} />\n          </Tooltip>\n        </Box>\n      </Box>\n      {activeFiltersJsx.length ? (\n        <Box\n          padding={{vertical: 8, horizontal: 24}}\n          border=\"top-and-bottom\"\n          flex={{direction: 'row', gap: 8}}\n        >\n          {activeFiltersJsx}\n        </Box>\n      ) : null}\n      {loading ? (\n        <Box padding={64}>\n          <Spinner purpose=\"page\" />\n        </Box>\n      ) : (\n        <>\n          <SensorInfo\n            daemonHealth={data?.instance.daemonHealth}\n            padding={{vertical: 16, horizontal: 24}}\n            border=\"top\"\n          />\n          {content()}\n        </>\n      )}\n    </>\n  );\n};\n\nconst buildBuckets = (\n  locationEntries:\n    | Extract<\n        OverviewSensorsQuery['workspaceOrError'],\n        {__typename: 'Workspace'}\n      >['locationEntries']\n    | Extract<WorkspaceLocationNodeFragment, {__typename: 'WorkspaceLocationEntry'}>[],\n) => {\n  const entries = locationEntries.map((entry) => entry.locationOrLoadError);\n\n  const buckets = [];\n\n  for (const entry of entries) {\n    if (entry?.__typename !== 'RepositoryLocation') {\n      continue;\n    }\n\n    for (const repo of entry.repositories) {\n      const {name, sensors} = repo;\n      const repoAddress = buildRepoAddress(name, entry.name);\n\n      if (sensors.length > 0) {\n        buckets.push({\n          repoAddress,\n          sensors,\n        });\n      }\n    }\n  }\n\n  return sortRepoBuckets(buckets);\n};\n\nconst OVERVIEW_SENSORS_QUERY = gql`\n  query OverviewSensorsQuery {\n    workspaceOrError {\n      ... on Workspace {\n        id\n        locationEntries {\n          id\n          locationOrLoadError {\n            ... on RepositoryLocation {\n              id\n              name\n              repositories {\n                id\n                name\n                sensors {\n                  id\n                  name\n                  description\n                  sensorType\n                  sensorState {\n                    id\n                    ...BasicInstigationStateFragment\n                  }\n                }\n              }\n            }\n            ...PythonErrorFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n    instance {\n      id\n      ...InstanceHealthFragment\n    }\n  }\n\n  ${BASIC_INSTIGATION_STATE_FRAGMENT}\n  ${PYTHON_ERROR_FRAGMENT}\n  ${INSTANCE_HEALTH_FRAGMENT}\n`;\n","import {useCallback, useMemo} from 'react';\n\nimport {useStateWithStorage} from '../hooks/useStateWithStorage';\n\nconst HOUR_WINDOW_KEY = 'dagster.run-timeline-hour-window';\n\nexport type HourWindow = '1' | '6' | '12' | '24';\n\nexport const useHourWindow = (\n  defaultValue: HourWindow,\n  storageKey = HOUR_WINDOW_KEY,\n): [HourWindow, (value: HourWindow) => void] => {\n  const validate = useCallback(\n    (value: string) => {\n      switch (value) {\n        case '1':\n        case '6':\n        case '12':\n        case '24':\n          return value;\n        default:\n          return defaultValue;\n      }\n    },\n    [defaultValue],\n  );\n\n  const [hourWindow, setHourWindow] = useStateWithStorage(storageKey, validate);\n  const setHourWindowWithDefault = useCallback(\n    (value: HourWindow) => {\n      setHourWindow(value || defaultValue);\n    },\n    [defaultValue, setHourWindow],\n  );\n\n  return useMemo(\n    () => [hourWindow, setHourWindowWithDefault],\n    [hourWindow, setHourWindowWithDefault],\n  );\n};\n","import {Box, Button, ButtonGroup, ErrorBoundary, TextInput} from '@dagster-io/ui-components';\nimport * as React from 'react';\nimport {useDeferredValue} from 'react';\n\nimport {RefreshState} from '../app/QueryRefresh';\nimport {useTrackPageView} from '../app/analytics';\nimport {useDocumentTitle} from '../hooks/useDocumentTitle';\nimport {useQueryPersistedState} from '../hooks/useQueryPersistedState';\nimport {RepoFilterButton} from '../instance/RepoFilterButton';\nimport {usePageLoadTrace} from '../performance';\nimport {RunTimeline} from '../runs/RunTimeline';\nimport {HourWindow, useHourWindow} from '../runs/useHourWindow';\nimport {makeJobKey, useRunsForTimeline} from '../runs/useRunsForTimeline';\nimport {WorkspaceContext} from '../workspace/WorkspaceContext';\nimport {buildRepoAddress} from '../workspace/buildRepoAddress';\n\nconst LOOKAHEAD_HOURS = 1;\nconst ONE_HOUR = 60 * 60 * 1000;\nconst POLL_INTERVAL = 30 * 1000;\n\nconst hourWindowToOffset = (hourWindow: HourWindow) => {\n  switch (hourWindow) {\n    case '1':\n      return ONE_HOUR;\n    case '6':\n      return 6 * ONE_HOUR;\n    case '12':\n      return 12 * ONE_HOUR;\n    case '24':\n      return 24 * ONE_HOUR;\n  }\n};\n\ntype Props = {\n  Header: React.ComponentType<{refreshState: RefreshState}>;\n  TabButton: React.ComponentType<{selected: 'timeline' | 'assets'}>;\n};\n\nexport function useTimelineRange({\n  maxNowMs,\n  hourWindowStorageKey,\n  lookaheadHours = LOOKAHEAD_HOURS,\n}: {\n  maxNowMs?: number;\n  hourWindowStorageKey?: string;\n  lookaheadHours?: number;\n}) {\n  const [hourWindow, setHourWindow] = useHourWindow('12', hourWindowStorageKey);\n  const [now, setNow] = React.useState(() => maxNowMs || Date.now());\n  const [offsetMsec, setOffsetMsec] = React.useState(() => 0);\n\n  const rangeMs: [number, number] = React.useMemo(\n    () => [\n      now - Number(hourWindow) * ONE_HOUR + offsetMsec,\n      now + lookaheadHours * ONE_HOUR + offsetMsec,\n    ],\n    [hourWindow, now, lookaheadHours, offsetMsec],\n  );\n\n  React.useEffect(() => {\n    const timer = setInterval(() => {\n      setNow(maxNowMs ? Math.min(maxNowMs, Date.now()) : Date.now());\n    }, POLL_INTERVAL);\n\n    return () => {\n      clearInterval(timer);\n    };\n  }, [hourWindow, maxNowMs]);\n\n  const onPageEarlier = React.useCallback(() => {\n    setOffsetMsec((current) => current - hourWindowToOffset(hourWindow));\n  }, [hourWindow]);\n\n  const onPageLater = React.useCallback(() => {\n    setOffsetMsec((current) => current + hourWindowToOffset(hourWindow));\n  }, [hourWindow]);\n\n  const onPageNow = React.useCallback(() => {\n    setOffsetMsec(0);\n  }, []);\n\n  return {rangeMs, hourWindow, setHourWindow, onPageEarlier, onPageLater, onPageNow};\n}\n\nexport const OverviewTimelineRoot = ({Header, TabButton}: Props) => {\n  useTrackPageView();\n  useDocumentTitle('Overview | Timeline');\n  const trace = usePageLoadTrace('OverviewTimelineRoot');\n\n  const {allRepos, visibleRepos} = React.useContext(WorkspaceContext);\n  const {rangeMs, hourWindow, setHourWindow, onPageEarlier, onPageLater, onPageNow} =\n    useTimelineRange({});\n\n  const [searchValue, setSearchValue] = useQueryPersistedState<string>({\n    queryKey: 'search',\n    defaults: {search: ''},\n  });\n\n  const runsForTimelineRet = useRunsForTimeline({rangeMs});\n\n  // Use deferred value to allow paginating quickly with the UI feeling more responsive.\n  const {jobs, loading, refreshState} = useDeferredValue(runsForTimelineRet);\n\n  React.useEffect(() => {\n    if (!loading) {\n      trace.endTrace();\n    }\n  }, [loading, trace]);\n\n  const visibleJobKeys = React.useMemo(() => {\n    const searchLower = searchValue.toLocaleLowerCase().trim();\n    const flat = visibleRepos.flatMap((repo) => {\n      const repoAddress = buildRepoAddress(repo.repository.name, repo.repositoryLocation.name);\n      return repo.repository.pipelines\n        .filter(({name}) => name.toLocaleLowerCase().includes(searchLower))\n        .map((job) => makeJobKey(repoAddress, job.name));\n    });\n    return new Set(flat);\n  }, [visibleRepos, searchValue]);\n\n  const visibleJobs = React.useMemo(\n    () => jobs.filter(({key}) => visibleJobKeys.has(key)),\n    [jobs, visibleJobKeys],\n  );\n\n  return (\n    <>\n      <Header refreshState={refreshState} />\n      <Box\n        padding={{horizontal: 24, vertical: 16}}\n        flex={{alignItems: 'center', justifyContent: 'space-between'}}\n      >\n        <Box flex={{direction: 'row', alignItems: 'center', gap: 12, grow: 0}}>\n          {TabButton && <TabButton selected=\"timeline\" />}\n          {allRepos.length > 1 && <RepoFilterButton />}\n          <TextInput\n            icon=\"search\"\n            value={searchValue}\n            onChange={(e) => setSearchValue(e.target.value)}\n            placeholder=\"Filter by job name…\"\n            style={{width: '200px'}}\n          />\n        </Box>\n        <Box flex={{direction: 'row', gap: 16, alignItems: 'center'}}>\n          <ButtonGroup<HourWindow>\n            activeItems={new Set([hourWindow])}\n            buttons={[\n              {id: '1', label: '1hr'},\n              {id: '6', label: '6hr'},\n              {id: '12', label: '12hr'},\n              {id: '24', label: '24hr'},\n            ]}\n            onClick={(hrWindow: HourWindow) => setHourWindow(hrWindow)}\n          />\n          <Box flex={{direction: 'row', gap: 4, alignItems: 'center'}}>\n            <Button onClick={onPageEarlier}>&larr;</Button>\n            <Button onClick={onPageNow}>Now</Button>\n            <Button onClick={onPageLater}>&rarr;</Button>\n          </Box>\n        </Box>\n      </Box>\n      <ErrorBoundary region=\"timeline\">\n        <RunTimeline loading={loading} rangeMs={rangeMs} jobs={visibleJobs} />\n      </ErrorBoundary>\n    </>\n  );\n};\n","import {repoAddressAsHumanString} from '../workspace/repoAddressAsString';\nimport {RepoAddress} from '../workspace/types';\n\ninterface Bucket {\n  repoAddress: RepoAddress;\n}\n\nexport const sortRepoBuckets = <B extends Bucket>(buckets: B[]) => {\n  return [...buckets].sort((a, b) => {\n    const aString = repoAddressAsHumanString(a.repoAddress);\n    const bString = repoAddressAsHumanString(b.repoAddress);\n    return aString.localeCompare(bString);\n  });\n};\n","import {DagsterRepoOption} from '../workspace/WorkspaceContext';\nimport {buildRepoAddress} from '../workspace/buildRepoAddress';\nimport {repoAddressAsHumanString} from '../workspace/repoAddressAsString';\n\nexport const visibleRepoKeys = (visibleRepos: DagsterRepoOption[]) => {\n  return new Set(\n    visibleRepos.map((option) =>\n      repoAddressAsHumanString(\n        buildRepoAddress(option.repository.name, option.repositoryLocation.name),\n      ),\n    ),\n  );\n};\n","import {cache} from 'idb-lru-cache';\n\ntype TimeWindow<T> = {start: number; end: number; data: T[]};\n\nexport const ONE_HOUR_S = 60 * 60;\n\ntype Subscription<T> = (data: T[]) => void;\n\nexport const defaultOptions = {\n  expiry: new Date('3030-01-01'), // never expire,\n};\n\nexport class HourlyDataCache<T> {\n  private cache: Map<number, Array<TimeWindow<T>>> = new Map();\n  private subscriptions: Array<{hour: number; callback: Subscription<T>}> = [];\n  private indexedDBCache?: ReturnType<typeof cache<string, typeof this.cache>>;\n  private indexedDBKey: string;\n\n  /**\n   * @param id A unique ID for the hourly data cache in this deployment\n   * @param [keyPrefix=''] A unique key identifying the timeline view [incorporating filters, etc.]\n   */\n  constructor(id?: string | false, keyPrefix = '', keyMaxCount = 1) {\n    this.indexedDBKey = keyPrefix ? `${keyPrefix}-hourlyData` : 'hourlyData';\n\n    // Delete old database from before the prefix, remove this at some point\n    indexedDB.deleteDatabase('HourlyDataCache:useRunsForTimeline');\n\n    if (id) {\n      this.indexedDBCache = cache<string, typeof this.cache>({\n        dbName: `HourlyDataCache:${id}`,\n        maxCount: keyMaxCount,\n      });\n      this.loadCacheFromIndexedDB();\n      this.clearOldEntries();\n    }\n  }\n\n  loadPromise: Promise<void> | undefined;\n\n  public async loadCacheFromIndexedDB() {\n    if (!this.indexedDBCache) {\n      return;\n    }\n    if (this.loadPromise) {\n      return await this.loadPromise;\n    }\n    this.loadPromise = new Promise(async (res) => {\n      if (!this.indexedDBCache) {\n        return;\n      }\n      if (!(await this.indexedDBCache.has(this.indexedDBKey))) {\n        res();\n        return;\n      }\n      const cachedData = await this.indexedDBCache.get(this.indexedDBKey);\n      if (cachedData) {\n        this.cache = new Map(cachedData.value);\n      }\n      res();\n    });\n    return await this.loadPromise;\n  }\n\n  private saveTimeout?: ReturnType<typeof setTimeout>;\n  private registeredUnload: boolean = false;\n  private async saveCacheToIndexedDB() {\n    if (typeof jest !== 'undefined') {\n      if (!this.indexedDBCache) {\n        return;\n      }\n      this.indexedDBCache.set(this.indexedDBKey, this.cache, defaultOptions);\n      return;\n    }\n    clearTimeout(this.saveTimeout);\n    this.saveTimeout = setTimeout(() => {\n      if (!this.indexedDBCache) {\n        return;\n      }\n      this.indexedDBCache.set(this.indexedDBKey, this.cache, defaultOptions);\n    }, 10000);\n    if (!this.registeredUnload) {\n      this.registeredUnload = true;\n      window.addEventListener('beforeunload', () => {\n        if (!this.indexedDBCache) {\n          return;\n        }\n        this.indexedDBCache.set(this.indexedDBKey, this.cache, defaultOptions);\n      });\n    }\n  }\n\n  public async clearOldEntries() {\n    const oneWeekAgo = Date.now() - 7 * 24 * 60 * 60 * 1000;\n    const hour = Math.floor(oneWeekAgo / (ONE_HOUR_S * 1000));\n\n    await this.loadCacheFromIndexedDB();\n    for (const ts of this.cache.keys()) {\n      if (ts < hour) {\n        this.cache.delete(ts);\n      }\n    }\n  }\n\n  /**\n   * Adds data to the cache for the specified time range.\n   * @param start - The start time in seconds.\n   * @param end - The end time in seconds.\n   * @param data - The data to cache.\n   */\n  addData(start: number, end: number, data: T[]): void {\n    const startHour = Math.floor(start / ONE_HOUR_S);\n    const endHour = Math.floor(end / ONE_HOUR_S);\n\n    if (endHour - startHour > 1) {\n      throw new Error('Expected all data to fit within an hour');\n    }\n\n    this.addPartialData(startHour, start, end, data);\n    this.notifySubscribers(startHour);\n    this.saveCacheToIndexedDB();\n  }\n\n  /**\n   * Adds data to the partial cache for a specific hour.\n   * @param hour - The hour for which to add data.\n   * @param start - The start time in seconds.\n   * @param end - The end time in seconds.\n   * @param data - The data to cache.\n   */\n  private addPartialData(hour: number, start: number, end: number, data: T[]): void {\n    if (!this.cache.has(hour)) {\n      this.cache.set(hour, []);\n    }\n    this.cache.get(hour)!.push({start, end, data});\n    this.cache.set(hour, this.mergeIntervals(this.cache.get(hour)!));\n  }\n\n  /**\n   * Retrieves the data for a specific hour.\n   * @param s - The time in seconds.\n   * @returns The data for the specified hour.\n   */\n  getHourData(s: number): T[] {\n    const hour = Math.floor(s / ONE_HOUR_S);\n    if (this.cache.has(hour)) {\n      return this.cache.get(hour)!.flatMap((interval) => interval.data);\n    }\n    return [];\n  }\n\n  /**\n   * Returns the missing ranges for a specific hour.\n   * @param s - The time in seconds.\n   * @returns An array of missing ranges for the specified hour.\n   */\n  getMissingIntervals(s: number): Array<[number, number]> {\n    const hour = Math.floor(s / ONE_HOUR_S);\n    if (\n      this.cache.has(hour) &&\n      this.cache.get(hour)!.length === 1 &&\n      this.cache.get(hour)![0]!.end - this.cache.get(hour)![0]!.start === ONE_HOUR_S\n    ) {\n      return [];\n    }\n\n    const missingIntervals: Array<[number, number]> = [];\n    const hourStart = hour * ONE_HOUR_S;\n    const hourEnd = (hour + 1) * ONE_HOUR_S;\n    let currentStart = hourStart;\n\n    if (this.cache.has(hour)) {\n      for (const {start: cachedStart, end: cachedEnd} of this.cache.get(hour)!) {\n        if (cachedStart > currentStart) {\n          missingIntervals.push([currentStart, cachedStart]);\n        }\n        currentStart = Math.max(currentStart, cachedEnd);\n      }\n    }\n\n    if (currentStart < hourEnd) {\n      missingIntervals.push([currentStart, hourEnd]);\n    }\n\n    return missingIntervals;\n  }\n\n  /**\n   * Checks if a range is completely cached.\n   * @param start - The start time in seconds.\n   * @param end - The end time in seconds.\n   * @returns True if the range is completely cached, false otherwise.\n   */\n  isCompleteRange(start: number, end: number): boolean {\n    const startHour = Math.floor(start / ONE_HOUR_S);\n    const endHour = Math.floor(end / ONE_HOUR_S);\n\n    if (endHour - startHour > 1) {\n      throw new Error('Expected the input range to be within a single hour');\n    }\n\n    if (this.cache.has(startHour)) {\n      const intervals = this.cache.get(startHour)!;\n      let currentStart = start;\n\n      for (const {start: cachedStart, end: cachedEnd} of intervals) {\n        if (cachedStart > currentStart) {\n          return false;\n        }\n        if (cachedEnd >= end) {\n          return true;\n        }\n        currentStart = Math.max(currentStart, cachedEnd);\n      }\n\n      return currentStart >= end;\n    }\n\n    return false;\n  }\n\n  /**\n   * Merges overlapping intervals.\n   * @param intervals - The intervals to merge.\n   * @returns An array of merged intervals.\n   */\n  private mergeIntervals(intervals: Array<TimeWindow<T>>): Array<TimeWindow<T>> {\n    if (intervals.length === 0) {\n      return [];\n    }\n\n    intervals.sort((a, b) => a.start - b.start);\n    const mergedIntervals: Array<TimeWindow<T>> = [intervals[0]!];\n\n    for (const current of intervals.slice(1)) {\n      const lastMerged = mergedIntervals[mergedIntervals.length - 1]!;\n\n      if (current.start <= lastMerged.end) {\n        lastMerged.end = Math.max(lastMerged.end, current.end);\n        lastMerged.data = lastMerged.data.concat(current.data);\n      } else {\n        mergedIntervals.push(current);\n      }\n    }\n\n    return mergedIntervals;\n  }\n\n  /**\n   * Subscribes to data added to a specific hourly bucket and subsequent hours.\n   * @param startHour - The hour bucket to subscribe to.\n   * @param callback - The callback function to notify when new data is added.\n   */\n  subscribe(ts: number, callback: Subscription<T>) {\n    const startHour = Math.floor(ts / ONE_HOUR_S);\n    const sub = {hour: startHour, callback};\n    this.subscriptions.push(sub);\n    this.notifyExistingData(startHour, callback);\n\n    return () => {\n      this.subscriptions = this.subscriptions.filter((subB) => subB !== sub);\n    };\n  }\n\n  /**\n   * Notifies subscribers of new data added to a specific hour and subsequent hours.\n   * @param hour - The hour bucket to notify subscribers of.\n   * @param data - The new data added.\n   */\n  private notifySubscribers(hour: number): void {\n    for (const {hour: subHour, callback} of this.subscriptions) {\n      if (hour >= subHour) {\n        const combinedData = this.getCombinedData(subHour);\n        callback(combinedData);\n      }\n    }\n  }\n\n  /**\n   * Notifies a new subscriber of all existing data for the subscribed hour and subsequent hours.\n   * @param startHour - The starting hour for the subscription.\n   * @param callback - The callback function to notify with existing data.\n   */\n  private notifyExistingData(startHour: number, callback: Subscription<T>): void {\n    const combinedData = this.getCombinedData(startHour);\n    if (combinedData.length > 0) {\n      callback(combinedData);\n    }\n  }\n\n  /**\n   * Combines data from the given hour and subsequent hours.\n   * @param startHour - The starting hour.\n   * @returns Combined data.\n   */\n  private getCombinedData(startHour: number): T[] {\n    let combinedData: T[] = [];\n    for (const [hour, intervals] of this.cache) {\n      if (hour >= startHour) {\n        combinedData = combinedData.concat(intervals.flatMap((interval) => interval.data));\n      }\n    }\n    return combinedData;\n  }\n}\n\n/**\n * Breaks a time range into hourly buckets.\n * @param startTime - The start time in seconds.\n * @param endTime - The end time in seconds.\n * @returns An array of [start, end] pairs representing each hourly bucket.\n */\nexport function getHourlyBuckets(startTime: number, endTime: number): [number, number][] {\n  const buckets: [number, number][] = [];\n\n  // Convert start and end times to the number of hours since epoch\n  const startHour = Math.floor(startTime / ONE_HOUR_S) * ONE_HOUR_S;\n\n  // Handle the first partial bucket\n  if (startTime !== startHour) {\n    const firstBucketEnd = startHour + ONE_HOUR_S;\n    buckets.push([startTime, Math.min(firstBucketEnd, endTime)]);\n  }\n\n  // Add full hourly buckets\n  let currentStart = startHour + (startTime === startHour ? 0 : ONE_HOUR_S);\n  while (currentStart + ONE_HOUR_S <= endTime) {\n    const nextHour = currentStart + ONE_HOUR_S;\n    buckets.push([currentStart, nextHour]);\n    currentStart = nextHour;\n  }\n\n  // Handle the last partial bucket\n  if (currentStart < endTime) {\n    buckets.push([currentStart, endTime]);\n  }\n\n  return buckets;\n}\n","export type QueryResultData<DataType> = {\n  data: DataType[] | undefined;\n  loading: boolean;\n  error: any;\n  called: boolean;\n};\n\n/**\n * Don't use this function, its an awkward API really meant just for the RunTimeline\n * setQueryData doesn't actually set any data, you have to do it yourself.\n * In the case of the RunTimeline it doesn't set any data because it persists it to a cache instead\n */\nexport async function fetchPaginatedBucketData<BucketType, DataType, CursorType, ErrorType>({\n  buckets,\n  fetchData,\n  setQueryData,\n}: {\n  buckets: BucketType[];\n  fetchData: (\n    bucket: BucketType,\n    cursor: CursorType | undefined,\n  ) => Promise<{\n    hasMore: boolean;\n    cursor: CursorType | undefined;\n    error: ErrorType;\n  }>;\n  setQueryData: React.Dispatch<React.SetStateAction<QueryResultData<DataType>>>;\n}) {\n  setQueryData((queryData) => ({\n    ...queryData,\n    loading: true,\n    called: true,\n    error: undefined,\n  }));\n  try {\n    await Promise.all(\n      buckets.map((bucket) =>\n        fetchPaginatedData<DataType, CursorType, ErrorType>({\n          fetchData: async (cursor) => {\n            const res = await fetchData(bucket, cursor);\n            return {...res, data: []};\n          },\n        }),\n      ),\n    );\n    setQueryData((queryData) => ({\n      ...queryData,\n      loading: false,\n      called: true,\n      error: undefined,\n    }));\n  } catch (error) {\n    setQueryData((queryData) => ({\n      ...queryData,\n      loading: false,\n      called: true,\n      error,\n    }));\n  }\n}\n\nexport async function fetchPaginatedData<DataType, CursorType, ErrorType>({\n  fetchData,\n}: {\n  fetchData: (cursor: CursorType | undefined) => Promise<{\n    data: DataType[];\n    hasMore: boolean;\n    cursor: CursorType | undefined;\n    error: ErrorType;\n  }>;\n}): Promise<DataType[]> {\n  let hasMoreData = true;\n  const dataSoFar: DataType[] = [];\n  let currentCursor: CursorType | undefined = undefined;\n\n  while (hasMoreData) {\n    const {cursor, hasMore, data, error} = await fetchData(currentCursor);\n    if (error) {\n      throw error;\n    }\n    dataSoFar.push(...data);\n    currentCursor = cursor;\n    hasMoreData = hasMore;\n  }\n\n  return dataSoFar;\n}\n","import {gql} from '@apollo/client';\n\nexport const SCHEDULE_FUTURE_TICKS_FRAGMENT = gql`\n  fragment ScheduleFutureTicksFragment on Schedule {\n    id\n    executionTimezone\n    scheduleState {\n      id\n      status\n    }\n    futureTicks(cursor: $tickCursor, until: $ticksUntil) {\n      results {\n        timestamp\n      }\n    }\n  }\n`;\n","import {QueryResult, gql, useApolloClient} from '@apollo/client';\nimport {useCallback, useContext, useLayoutEffect, useMemo, useRef, useState} from 'react';\n\nimport {HourlyDataCache, getHourlyBuckets} from './HourlyDataCache/HourlyDataCache';\nimport {doneStatuses} from './RunStatuses';\nimport {TimelineJob, TimelineRun} from './RunTimeline';\nimport {RUN_TIME_FRAGMENT} from './RunUtils';\nimport {overlap} from './batchRunsForTimeline';\nimport {fetchPaginatedBucketData, fetchPaginatedData} from './fetchPaginatedBucketData';\nimport {\n  CompletedRunTimelineQuery,\n  CompletedRunTimelineQueryVariables,\n  FutureTicksQuery,\n  FutureTicksQueryVariables,\n  OngoingRunTimelineQuery,\n  OngoingRunTimelineQueryVariables,\n  RunTimelineFragment,\n} from './types/useRunsForTimeline.types';\nimport {AppContext} from '../app/AppContext';\nimport {FIFTEEN_SECONDS, useRefreshAtInterval} from '../app/QueryRefresh';\nimport {isHiddenAssetGroupJob} from '../asset-graph/Utils';\nimport {InstigationStatus, RunStatus, RunsFilter} from '../graphql/types';\nimport {SCHEDULE_FUTURE_TICKS_FRAGMENT} from '../instance/NextTick';\nimport {useBlockTraceOnQueryResult} from '../performance/TraceContext';\nimport {buildRepoAddress} from '../workspace/buildRepoAddress';\nimport {repoAddressAsHumanString} from '../workspace/repoAddressAsString';\nimport {RepoAddress} from '../workspace/types';\nimport {workspacePipelinePath} from '../workspace/workspacePath';\n\nconst BATCH_LIMIT = 500;\n\nexport const useRunsForTimeline = ({\n  rangeMs,\n  filter,\n  batchLimit = BATCH_LIMIT,\n  refreshInterval = 2 * FIFTEEN_SECONDS,\n  showTicks = true,\n}: {\n  rangeMs: readonly [number, number];\n  filter?: RunsFilter;\n  refreshInterval?: number;\n  batchLimit?: number;\n  showTicks?: boolean;\n}) => {\n  const runsFilter = useMemo(() => {\n    return filter ?? {};\n  }, [filter]);\n  const [start, _end] = rangeMs;\n  const end = useMemo(() => {\n    return Math.min(Date.now(), _end);\n  }, [_end]);\n\n  const startSec = start / 1000.0;\n  const endSec = end / 1000.0;\n\n  const buckets = useMemo(() => getHourlyBuckets(startSec, endSec), [startSec, endSec]);\n\n  const client = useApolloClient();\n\n  const {localCacheIdPrefix} = useContext(AppContext);\n  const completedRunsCache = useMemo(() => {\n    if (filter) {\n      return new HourlyDataCache<RunTimelineFragment>(\n        localCacheIdPrefix ? `${localCacheIdPrefix}-useRunsForTimeline-filtered` : false,\n        JSON.stringify(filter),\n        3,\n      );\n    }\n    return new HourlyDataCache<RunTimelineFragment>(\n      localCacheIdPrefix ? `${localCacheIdPrefix}-useRunsForTimeline` : false,\n    );\n  }, [filter, localCacheIdPrefix]);\n  const [completedRuns, setCompletedRuns] = useState<RunTimelineFragment[]>([]);\n\n  useLayoutEffect(() => {\n    // Fetch runs matching:\n    // 1. updatedAfter (startSec) -> updatedBefore (endSec)\n    // 2. updatedAfter (endSec) -> createdBefore (endSec).\n    // For (2) we rely on the fact that runs are fetched in adjacent intervals from \"now\" going backwards\n    // so we can assume a future bucket that is being or was fetched will have the runs we need.\n    return completedRunsCache.subscribe(startSec, (runs) => {\n      setCompletedRuns(\n        runs.filter(\n          (run) =>\n            (run.startTime! <= endSec && run.updateTime! >= endSec) ||\n            (run.updateTime! >= startSec && run.updateTime! <= endSec),\n        ),\n      );\n    });\n  }, [completedRunsCache, end, endSec, startSec]);\n\n  const [completedRunsQueryData, setCompletedRunsData] = useState<{\n    // TODO: Remove data property here since we grab the data from the cache instead of here.\n    data: RunTimelineFragment[] | undefined;\n    loading: boolean;\n    error: any;\n    called: boolean;\n  }>({\n    data: undefined,\n    loading: true,\n    error: undefined,\n    called: false,\n  });\n  const [ongoingRunsQueryData, setOngoingRunsData] = useState<{\n    data: RunTimelineFragment[] | undefined;\n    loading: boolean;\n    error: any;\n    called: boolean;\n  }>({\n    data: undefined,\n    loading: true,\n    error: undefined,\n    called: false,\n  });\n\n  const {data: ongoingRunsData} = ongoingRunsQueryData;\n\n  const fetchCompletedRunsQueryData = useCallback(async () => {\n    await completedRunsCache.loadCacheFromIndexedDB();\n    return await fetchPaginatedBucketData({\n      buckets: buckets\n        .filter((bucket) => !completedRunsCache.isCompleteRange(bucket[0], bucket[1]))\n        .map((bucket) => {\n          let updatedAfter = bucket[0];\n          let updatedBefore = bucket[1];\n          const missingRange = completedRunsCache.getMissingIntervals(updatedAfter);\n          if (missingRange[0]) {\n            // When paginating backwards the missing range will be at the beginning of the hour\n            // When looking the current time the missing range will be at the end of the hour\n            updatedAfter = Math.max(missingRange[0][0], updatedAfter);\n            updatedBefore = Math.min(missingRange[0][1], updatedBefore);\n          }\n          return [updatedAfter, updatedBefore] as [number, number];\n        }),\n      setQueryData: setCompletedRunsData,\n      async fetchData(bucket, cursor: string | undefined) {\n        const updatedBefore = bucket[1];\n        const updatedAfter = bucket[0];\n\n        if (completedRunsCache.isCompleteRange(updatedAfter, updatedBefore) && !cursor) {\n          // If there's a cursor then that means the current range is being paginated so\n          // it is not complete even though there is some data for the time range\n\n          return {\n            // TODO: Remove data property here\n            data: [],\n            cursor: undefined,\n            hasMore: false,\n            error: undefined,\n          };\n        }\n\n        const {data} = await client.query<\n          CompletedRunTimelineQuery,\n          CompletedRunTimelineQueryVariables\n        >({\n          query: COMPLETED_RUN_TIMELINE_QUERY,\n          notifyOnNetworkStatusChange: true,\n          fetchPolicy: 'no-cache',\n          variables: {\n            completedFilter: {\n              ...runsFilter,\n              statuses: Array.from(doneStatuses),\n              updatedBefore,\n              updatedAfter,\n            },\n            cursor,\n            limit: batchLimit,\n          },\n        });\n\n        if (data.completed.__typename !== 'Runs') {\n          return {\n            data: [],\n            cursor: undefined,\n            hasMore: false,\n            error: data.completed,\n          };\n        }\n        const runs: RunTimelineFragment[] = data.completed.results;\n        completedRunsCache.addData(updatedAfter, updatedBefore, runs);\n\n        const hasMoreData = runs.length === batchLimit;\n        const nextCursor = hasMoreData ? runs[runs.length - 1]!.id : undefined;\n\n        return {\n          data: [],\n          cursor: nextCursor,\n          hasMore: hasMoreData,\n          error: undefined,\n        };\n      },\n    });\n  }, [batchLimit, buckets, client, completedRunsCache, runsFilter]);\n\n  // If the user paginates backwards quickly then there will be multiple outstanding fetches\n  // but we only want the most recent fetch to change loading back to false.\n  // fetchIdRef will help us tell if this fetch is the most recent fetch.\n  const fetchIdRef = useRef(0);\n  const ongoingRunFetchIdRef = useRef(0);\n  const futureTicksFetchIdRef = useRef(0);\n  const fetchOngoingRunsQueryData = useCallback(async () => {\n    const id = ++ongoingRunFetchIdRef.current;\n    setOngoingRunsData(({data}) => ({\n      data, // preserve existing data\n      loading: true,\n      called: true,\n      error: undefined,\n    }));\n    try {\n      const data = await fetchPaginatedData({\n        async fetchData(cursor: string | undefined) {\n          const {data} = await client.query<\n            OngoingRunTimelineQuery,\n            OngoingRunTimelineQueryVariables\n          >({\n            query: ONGOING_RUN_TIMELINE_QUERY,\n            notifyOnNetworkStatusChange: true,\n            fetchPolicy: 'no-cache',\n            variables: {\n              inProgressFilter: {\n                ...runsFilter,\n                statuses: [RunStatus.CANCELING, RunStatus.STARTED],\n              },\n              cursor,\n              limit: batchLimit,\n            },\n          });\n\n          if (data.ongoing.__typename !== 'Runs') {\n            return {\n              data: [],\n              cursor: undefined,\n              hasMore: false,\n              error: data.ongoing,\n            };\n          }\n          const runs = data.ongoing.results;\n          const hasMoreData = runs.length === batchLimit;\n          const nextCursor = hasMoreData ? runs[runs.length - 1]!.id : undefined;\n          return {\n            data: runs,\n            cursor: nextCursor,\n            hasMore: hasMoreData,\n            error: undefined,\n          };\n        },\n      });\n      if (ongoingRunFetchIdRef.current === id) {\n        setOngoingRunsData({\n          data,\n          loading: false,\n          called: true,\n          error: undefined,\n        });\n      }\n    } catch (e) {\n      if (ongoingRunFetchIdRef.current === id) {\n        setOngoingRunsData(({data}) => ({\n          data, // preserve existing data\n          loading: false,\n          called: true,\n          error: e,\n        }));\n      }\n    }\n  }, [client, runsFilter, batchLimit]);\n\n  const [futureTicksQueryData, setFutureTicksQueryData] = useState<\n    Pick<QueryResult<FutureTicksQuery>, 'data' | 'error' | 'called' | 'loading'>\n  >({data: undefined, called: true, loading: true, error: undefined});\n\n  const fetchFutureTicks = useCallback(async () => {\n    const id = ++futureTicksFetchIdRef.current;\n    const queryData = await client.query<FutureTicksQuery, FutureTicksQueryVariables>({\n      query: FUTURE_TICKS_QUERY,\n      variables: showTicks\n        ? {tickCursor: startSec, ticksUntil: _end / 1000.0}\n        : {tickCursor: startSec, ticksUntil: startSec},\n      fetchPolicy: 'no-cache',\n    });\n    if (id === futureTicksFetchIdRef.current) {\n      setFutureTicksQueryData({...queryData, called: true});\n    }\n  }, [startSec, _end, client, showTicks]);\n\n  useBlockTraceOnQueryResult(ongoingRunsQueryData, 'OngoingRunTimelineQuery');\n  useBlockTraceOnQueryResult(completedRunsQueryData, 'CompletedRunTimelineQuery');\n\n  const {data: futureTicksData} = futureTicksQueryData;\n\n  const {workspaceOrError} = futureTicksData || {workspaceOrError: undefined};\n\n  const [loading, setLoading] = useState(false);\n\n  const previousRunsByJobKey = useRef<{\n    jobInfo: Record<string, {repoAddress: RepoAddress; pipelineName: string; isAdHoc: boolean}>;\n    runsByJobKey: {\n      [jobKey: string]: {\n        [id: string]: TimelineRun;\n      };\n    };\n  }>({jobInfo: {}, runsByJobKey: {}});\n  const {runsByJobKey, jobInfo} = useMemo(() => {\n    if (loading) {\n      // While we're loading data just keep returning the last result so that we're not\n      // re-rendering 24+ times while we populate the cache asynchronously via our batching/chunking.\n      return previousRunsByJobKey.current;\n    }\n    const jobInfo: Record<\n      string,\n      {repoAddress: RepoAddress; pipelineName: string; isAdHoc: boolean}\n    > = {};\n    const map: {\n      [jobKey: string]: {\n        [id: string]: TimelineRun;\n      };\n    } = {};\n    const now = Date.now();\n\n    function saveRunInfo(run: (typeof completedRuns)[0]) {\n      if (run.startTime === null) {\n        return;\n      }\n      if (!run.repositoryOrigin) {\n        return;\n      }\n\n      const runJobKey = makeJobKey(\n        {\n          name: run.repositoryOrigin.repositoryName,\n          location: run.repositoryOrigin.repositoryLocationName,\n        },\n        run.pipelineName,\n      );\n\n      map[runJobKey] = map[runJobKey] || {};\n      map[runJobKey]![run.id] = {\n        id: run.id,\n        status: run.status,\n        startTime: run.startTime * 1000,\n        endTime: run.endTime ? run.endTime * 1000 : now,\n      };\n      if (!jobInfo[runJobKey] && run.repositoryOrigin) {\n        const pipelineName = run.pipelineName;\n        const isAdHoc = isHiddenAssetGroupJob(pipelineName);\n\n        const repoAddress = buildRepoAddress(\n          run.repositoryOrigin!.repositoryName,\n          run.repositoryOrigin!.repositoryLocationName,\n        );\n        jobInfo[runJobKey] = {\n          repoAddress,\n          isAdHoc,\n          pipelineName,\n        };\n      }\n    }\n\n    // fetch all the runs in the given range\n    completedRuns.forEach(saveRunInfo);\n    ongoingRunsData?.forEach(saveRunInfo);\n    const current = {jobInfo, runsByJobKey: map};\n    previousRunsByJobKey.current = current;\n    return current;\n  }, [loading, ongoingRunsData, completedRuns]);\n\n  const jobsWithCompletedRunsAndOngoingRuns = useMemo(() => {\n    const jobs: Record<string, TimelineJob> = {};\n    if (!Object.keys(runsByJobKey).length) {\n      return jobs;\n    }\n\n    Object.entries(runsByJobKey).forEach(([jobKey, jobRunsInfo]) => {\n      const runs = Object.values(jobRunsInfo);\n      const info = jobInfo[jobKey];\n      if (!info) {\n        return;\n      }\n\n      const {pipelineName, isAdHoc, repoAddress} = info;\n\n      jobs[jobKey] = {\n        key: jobKey,\n        jobName: isAdHoc ? 'Ad hoc materializations' : pipelineName,\n        jobType: isAdHoc ? 'asset' : 'job',\n        repoAddress,\n        path: workspacePipelinePath({\n          repoName: repoAddress.name,\n          repoLocation: repoAddress.location,\n          pipelineName,\n          isJob: true,\n        }),\n        runs,\n      } as TimelineJob;\n    });\n\n    return jobs;\n  }, [jobInfo, runsByJobKey]);\n\n  const jobsWithCompletedRunsAndOngoingRunsValues = useMemo(() => {\n    return Object.values(jobsWithCompletedRunsAndOngoingRuns);\n  }, [jobsWithCompletedRunsAndOngoingRuns]);\n\n  const unsortedJobs: TimelineJob[] = useMemo(() => {\n    if (!workspaceOrError || workspaceOrError.__typename === 'PythonError' || _end < Date.now()) {\n      return jobsWithCompletedRunsAndOngoingRunsValues;\n    }\n    const addedAdHocJobs = new Set();\n    const jobs: TimelineJob[] = [];\n    for (const locationEntry of workspaceOrError.locationEntries) {\n      if (\n        !locationEntry.locationOrLoadError ||\n        locationEntry.locationOrLoadError?.__typename === 'PythonError'\n      ) {\n        continue;\n      }\n\n      const now = Date.now();\n      for (const repository of locationEntry.locationOrLoadError.repositories) {\n        const repoAddress = buildRepoAddress(\n          repository.name,\n          locationEntry.locationOrLoadError.name,\n        );\n\n        for (const pipeline of repository.pipelines) {\n          const schedules = (repository.schedules || []).filter(\n            (schedule) => schedule.pipelineName === pipeline.name,\n          );\n\n          const jobTicks: TimelineRun[] = [];\n          for (const schedule of schedules) {\n            if (schedule.scheduleState.status === InstigationStatus.RUNNING) {\n              schedule.futureTicks.results.forEach(({timestamp}) => {\n                const startTime = timestamp! * 1000;\n                if (\n                  startTime > now &&\n                  overlap({start, end: _end}, {start: startTime, end: startTime})\n                ) {\n                  jobTicks.push({\n                    id: `${schedule.pipelineName}-future-run-${timestamp}`,\n                    status: 'SCHEDULED',\n                    startTime,\n                    endTime: startTime + 5 * 1000,\n                  });\n                }\n              });\n            }\n          }\n\n          const isAdHoc = isHiddenAssetGroupJob(pipeline.name);\n          const jobKey = makeJobKey(repoAddress, pipeline.name);\n\n          if (isAdHoc) {\n            if (addedAdHocJobs.has(jobKey)) {\n              continue;\n            }\n            addedAdHocJobs.add(jobKey);\n          }\n\n          const jobName = isAdHoc ? 'Ad hoc materializations' : pipeline.name;\n\n          const jobRuns = Object.values(runsByJobKey[jobKey] || {});\n          if (!jobTicks.length && !jobRuns.length) {\n            continue;\n          }\n\n          const runs = [...jobRuns, ...jobTicks];\n\n          let job = jobsWithCompletedRunsAndOngoingRuns[jobKey];\n          if (job) {\n            job = {\n              ...job,\n              runs,\n            };\n          } else {\n            job = {\n              key: jobKey,\n              jobName,\n              jobType: isAdHoc ? 'asset' : 'job',\n              repoAddress,\n              path: workspacePipelinePath({\n                repoName: repoAddress.name,\n                repoLocation: repoAddress.location,\n                pipelineName: pipeline.name,\n                isJob: pipeline.isJob,\n              }),\n              runs,\n            } as TimelineJob;\n          }\n\n          jobs.push(job);\n        }\n      }\n    }\n    return jobs;\n    // Don't add start/end time as a dependency here since it changes often.\n    // Instead rely on the underlying runs changing in response to start/end changing\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [\n    workspaceOrError,\n    jobsWithCompletedRunsAndOngoingRunsValues,\n    runsByJobKey,\n    jobsWithCompletedRunsAndOngoingRuns,\n  ]);\n\n  const jobsWithRuns = useMemo(() => {\n    const earliest = unsortedJobs.reduce(\n      (accum, job) => {\n        const startTimes = job.runs.map((job) => job.startTime);\n        accum[job.key] = Math.min(...startTimes);\n        return accum;\n      },\n      {} as {[jobKey: string]: number},\n    );\n\n    return unsortedJobs.sort((a, b) => earliest[a.key]! - earliest[b.key]!);\n  }, [unsortedJobs]);\n\n  const lastFetchRef = useRef({ongoing: 0, future: 0});\n  const lastRangeMs = useRef([0, 0] as readonly [number, number]);\n  if (Math.abs(lastRangeMs.current[0] - rangeMs[0]) > 30000) {\n    lastFetchRef.current.future = 0;\n  }\n  lastRangeMs.current = rangeMs;\n\n  const refreshState = useRefreshAtInterval({\n    refresh: useCallback(async () => {\n      const loadId = ++fetchIdRef.current;\n      setLoading(true);\n      await Promise.all([\n        // Only fetch ongoing runs once every 30 seconds\n        (async () => {\n          if (lastFetchRef.current.ongoing < Date.now() - 30 * 1000) {\n            await fetchOngoingRunsQueryData();\n            lastFetchRef.current.ongoing = Date.now();\n          }\n        })(),\n        // Only fetch future ticks once a minute\n        (async () => {\n          // If the the time range is in the past then future ticks are not visible on the timeline\n          if (_end > Date.now() && lastFetchRef.current.future < Date.now() - 60 * 1000) {\n            fetchFutureTicks();\n          }\n        })(),\n        fetchCompletedRunsQueryData(),\n      ]);\n      if (loadId === fetchIdRef.current) {\n        setLoading(false);\n      }\n    }, [fetchCompletedRunsQueryData, fetchFutureTicks, fetchOngoingRunsQueryData, _end]),\n    intervalMs: refreshInterval,\n    leading: true,\n  });\n\n  return {\n    jobs: jobsWithRuns,\n    loading,\n    refreshState,\n  };\n};\n\nexport const makeJobKey = (repoAddress: RepoAddress, jobName: string) =>\n  `${isHiddenAssetGroupJob(jobName) ? '__adhoc__' : jobName}-${repoAddressAsHumanString(\n    repoAddress,\n  )}`;\n\nconst RUN_TIMELINE_FRAGMENT = gql`\n  fragment RunTimelineFragment on Run {\n    id\n    pipelineName\n    repositoryOrigin {\n      id\n      repositoryName\n      repositoryLocationName\n    }\n    ...RunTimeFragment\n  }\n  ${RUN_TIME_FRAGMENT}\n`;\n\nexport const ONGOING_RUN_TIMELINE_QUERY = gql`\n  query OngoingRunTimelineQuery($inProgressFilter: RunsFilter!, $limit: Int!, $cursor: String) {\n    ongoing: runsOrError(filter: $inProgressFilter, limit: $limit, cursor: $cursor) {\n      ... on Runs {\n        results {\n          id\n          ...RunTimelineFragment\n        }\n      }\n    }\n  }\n\n  ${RUN_TIMELINE_FRAGMENT}\n`;\n\nexport const COMPLETED_RUN_TIMELINE_QUERY = gql`\n  query CompletedRunTimelineQuery($completedFilter: RunsFilter!, $limit: Int!, $cursor: String) {\n    completed: runsOrError(filter: $completedFilter, limit: $limit, cursor: $cursor) {\n      ... on Runs {\n        results {\n          id\n          ...RunTimelineFragment\n        }\n      }\n    }\n  }\n\n  ${RUN_TIMELINE_FRAGMENT}\n`;\n\nexport const FUTURE_TICKS_QUERY = gql`\n  query FutureTicksQuery($tickCursor: Float, $ticksUntil: Float) {\n    workspaceOrError {\n      ... on Workspace {\n        id\n        locationEntries {\n          id\n          name\n          locationOrLoadError {\n            ... on RepositoryLocation {\n              id\n              name\n              repositories {\n                id\n                name\n                pipelines {\n                  id\n                  name\n                  isJob\n                }\n                schedules {\n                  id\n                  name\n                  pipelineName\n                  scheduleState {\n                    id\n                    status\n                  }\n                  ...ScheduleFutureTicksFragment\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n  ${SCHEDULE_FUTURE_TICKS_FRAGMENT}\n`;\n"],"names":["InstanceAutomaterializationEvaluationHistoryTable","queryResult","setSelectedTick","setTableView","setTimerange","setParentStatuses","param","statuses","setStatuses","useQueryPersistedState","queryKey","decode","useCallback","Set","JSON","parse","InstigationTickStatus","STARTED","SUCCESS","FAILURE","SKIPPED","encode","stringify","Array","from","raw","paginationProps","useCursorPaginatedQuery","query","ASSET_DAEMON_TICKS_QUERY","variables","useMemo","nextCursorForResult","ticks","data","autoMaterializeTicks","length","PAGE_SIZE","id","getResultArray","pageSize","useQueryRefreshAtInterval","hasPrevCursor","useEffect","start","timestamp","end","endTimestamp","undefined","jsx_runtime","jsx","AutomaterializationEvaluationHistoryTable","loading","GlobalAutomaterializationContent","automaterialize","useAutomaterializeDaemonStatus","confirm","useConfirmation","permissions","canToggleAutoMaterialize","useUnscopedPermissions","isPaused","setIsPaused","useState","timeRange","getVariables","now","Date","afterTimestamp","beforeTimestamp","TWENTY_MINUTES","fetch","useLazyQuery","refresh","useBlockTraceOnQueryResult","useRefreshAtInterval","enabled","intervalMs","leading","selectedTick","tableView","view","cursor","previousData","allTicks","map","tick","index","nextTick","isStuckStartedTick","copy","status","concat","onHoverTick","jsxs","Fragment","Box","padding","vertical","horizontal","flex","direction","gap","Alert","intent","title","description","a","href","target","rel","Table","tbody","tr","td","Spinner","purpose","Checkbox","format","checked","paused","disabled","onChange","e","setPaused","border","Subtitle2","LiveTickTimeline","onSelectTick","exactRange","tickGrid","timeAfter","AutomaterializationTickDetailDialog","isOpen","close","AutomaterializeRunHistoryTable","justifyContent","alignItems","div","style","color","Colors","labelForBackfillStatus","key","BulkActionStatus","CANCELED","CANCELING","COMPLETED","FAILED","REQUESTED","backfillStatusValues","Object","keys","label","value","match","InstanceBackfills","useTrackPageView","useDocumentTitle","queryData","useQuery","INSTANCE_HEALTH_FOR_BACKFILLS_QUERY","statusState","setStatusState","vals","size","join","qs","split","statusFilter","useStaticSetFilter","name","icon","allValues","allowMultipleSelections","closeOnSelect","renderLabel","react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__","getStringValue","state","onStateChanged","button","activeFiltersJsx","useFilters","filters","BACKFILLS_QUERY","result","partitionBackfillsOrError","__typename","results","refreshState","FIFTEEN_SECONDS","QueryRefreshCountdown","content","PythonErrorInfo","error","NonIdealState","backfillHealths","daemonHealths","instance","daemonHealth","allDaemonStatuses","filter","daemon","daemonType","required","healthy","isBackfillHealthy","every","x","DaemonNotRunningAlertBody","BackfillTable","backfills","slice","refetch","margin","top","CursorPaginationControls","gql","INSTANCE_HEALTH_FRAGMENT","PYTHON_ERROR_FRAGMENT","BACKFILL_TABLE_FRAGMENT","RepoFilterButton","allRepos","visibleRepos","toggleVisible","useContext","WorkspaceContext","open","setOpen","react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__","Dialog","canOutsideClickClose","canEscapeKeyClose","width","onClose","DialogHeader","RepoSelector","options","onBrowse","onToggle","selected","DialogFooter","Button","onClick","outlined","Icon","rightIcon","getResultsForBackfillLogsPage","partitionBackfillOrError","logEvents","events","getFetchStateForBackfillLogsPage","BackfillLogsTab","backfill","fetched","useCursorAccumulatedQuery","setFetched","fetchState","setFetchState","hasMore","skip","getNextFetchState","notifyOnNetworkStatusChange","next","BACKFILL_LOGS_PAGE_QUERY","backfillId","position","right","InstigationEventLogTable","INSTIGATION_EVENT_LOG_FRAGMENT","BackfillPartitionsTab","client","useApolloClient","history","useHistory","getRunsUrl","token","push","RunStatus","QUEUED","STARTING","NOT_STARTED","runsPathWithFilters","onShowAssetDetails","assetKey","isPartitioned","params","resp","BACKFILL_PARTITIONS_FOR_ASSET_KEY_QUERY","asAssetKeyInput","partitionsTargetedForAssetKey","ranges","default_range","r","assetDetailsPathForKey","assetBackfillData","assetBackfillStatuses","thead","th","Link","to","targeted","inProgress","completed","failed","asset","numPartitionsTargeted","numPartitionsInProgress","numPartitionsMaterialized","numPartitionsFailed","materialized","data-testid","testId","tokenForAssetKey","ButtonLink","path","StatusBar","Tag","borderRadius","backgroundColor","display","gridTemplateColumns","gridTemplateRows","height","overflow","background","DATE_TIME_HEIGHT","ONE_HOUR_MSEC","EMPTY_STATE_HEIGHT","LEFT_SIDE_SPACE_ALLOTTED","CONSTANTS","ExecutionTimeline","runs","rangeMs","annotations","props","parentRef","React","viewport","containerProps","ref","measureRef","useViewport","rowVirtualizer","useVirtualizer","count","getScrollElement","current","estimateSize","overscan","totalHeight","getTotalSize","items","getVirtualItems","left","fontSize","TimeDividers","interval","Container","Inner","$totalHeight","ExecutionTimelineRow","run","range","RunsEmptyOrLoading","includesTicks","containerWidth","chunk","batches","batchRunsForTimeline","minChunkWidth","minMultipleWidth","TimelineRowContainer","$height","$start","RunStatusDot","TimeElapsed","startUnix","startTime","endUnix","endTime","RunChunks","RunChunk","$background","mergeStatusToBackground","$multiple","BackfillRunsTab","setView","defaults","hourWindow","setHourWindow","onPageEarlier","onPageLater","onPageNow","useTimelineRange","maxNowMs","hourWindowStorageKey","lookaheadHours","tags","DagsterTag","Backfill","ms","actionBarComponents","ButtonGroup","activeItems","buttons","hrWindow","ExecutionRunTimeline","ExecutionRunTable","usePaginatedRunsTableRuns","pipelineRunsOrError","message","overflowY","StickyTableContainer","$top","RunTable","actionBarSticky","CursorHistoryControls","runsForTimelineRet","useRunsForTimeline","refreshInterval","showTicks","jobs","useDeferredValue","job","sort","b","zIndex","ErrorBoundary","region","dayjs","duration","relativeTime","BackfillPage","featureContext","CloudOSSContext","useParams","selectedTab","setSelectedTab","tab","BACKFILL_DETAILS_QUERY","isInProgress","includes","PageHeader","Heading","BackfillActionsMenu","canCancelRuns","wrap","Detail","detail","Timestamp","Number","timeFormat","showSeconds","showTimezone","Duration","TargetPartitionsDisplay","targetPartitionCount","numPartitions","targetPartitions","rootTargetedPartitions","BackfillStatusTagForPage","Tabs","selectedTabId","Tab","canSeeBackfillCoordinatorLogs","graphQLErrors","err","minHeight","minWidth","Label","styled","withConfig","_","rerender","useReducer","s","intervalId","setInterval","clearInterval","span","formatDuration","BACKFILL_ACTIONS_BACKFILL_FRAGMENT","minutes","Math","floor","hours","days","trim","OverviewScheduleTable","repos","headerCheckbox","checkedKeys","onToggleCheckFactory","allKeys","repoAddress","repoAddressAsHumanString","expandedKeys","onToggleAll","useRepoExpansionState","OVERVIEW_COLLAPSED_KEY","flattened","flat","forEach","schedules","type","scheduleCount","repoKey","schedule","duplicateRepoNames","findDuplicateRepoNames","row","ii","VirtualizedScheduleHeader","checkbox","RepoRow","expanded","showLocation","has","rightElement","Tooltip","placement","scheduleKey","makeScheduleKey","VirtualizedScheduleRow","scheduleState","showCheckboxColumn","onToggleChecked","OverviewSchedules","workspaceLoading","cachedData","repoCount","searchValue","setSearchValue","search","codeLocationFilter","useCodeLocationFilter","runningStateFilter","useInstigationStatusFilter","filterButton","queryResultOverview","OVERVIEW_SCHEDULES_QUERY","fetchPolicy","queryLoading","repoBuckets","visibleKeys","visibleRepoKeys","cachedEntries","values","location","workspaceOrError","buildBuckets","locationEntries","runningState","filteredBuckets","rest","sanitizedSearch","toLocaleLowerCase","anySearch","filteredBySearch","searchToLower","anySchedulesVisible","some","allPermissionedSchedules","filterPermissionedInstigationState","scheduleName","allPermissionedScheduleKeys","checkedIds","onToggleFactory","useSelectionReducer","permissionedKeysOnScreen","filteredKeys","checkedSchedules","checkedKeysOnScreen","viewerHasAnyInstigationPermission","checkedCount","showSearchSpinner","TextInput","SearchInputSpinner","tooltipContent","placeholder","canShow","useDisabledButtonTooltipFix","ScheduleBulkActionMenu","onDone","SchedulerInfo","paddingTop","anyReposHidden","CheckAllBox","totalCount","strong","entries","entry","locationOrLoadError","buckets","repo","repositories","buildRepoAddress","scheduleNames","sortRepoBuckets","BASIC_INSTIGATION_STATE_FRAGMENT","OverviewSensorTable","sensors","sensorCount","sensor","VirtualizedSensorHeader","sensorKey","makeSensorKey","VirtualizedSensorRow","sensorState","toSetFilterValue","SENSOR_TYPE_META","SENSOR_TYPE_TO_FILTER","SensorType","ASSET","AUTO_MATERIALIZE","AUTOMATION","FRESHNESS_POLICY","MULTI_ASSET","RUN_STATUS","STANDARD","ALL_SENSOR_TYPE_FILTERS","OverviewSensors","sensorTypes","setSensorTypes","sensorType","sensorTypeFilter","OVERVIEW_SENSORS_QUERY","anySensorsVisible","allPermissionedSensors","sensorName","allPermissionedSensorKeys","checkedSensors","grow","SensorBulkActionMenu","SensorInfo","useHourWindow","defaultValue","storageKey","validate","useStateWithStorage","setHourWindowWithDefault","hourWindowToOffset","setNow","offsetMsec","setOffsetMsec","timer","min","OverviewTimelineRoot","Header","TabButton","trace","usePageLoadTrace","endTrace","visibleJobKeys","searchLower","flatMap","repository","repositoryLocation","pipelines","makeJobKey","visibleJobs","RunTimeline","aString","bString","localeCompare","option","defaultOptions","expiry","HourlyDataCache","loadCacheFromIndexedDB","indexedDBCache","loadPromise","Promise","res","indexedDBKey","get","cache","Map","saveCacheToIndexedDB","jest","set","clearTimeout","saveTimeout","setTimeout","registeredUnload","window","addEventListener","clearOldEntries","hour","oneWeekAgo","ONE_HOUR_S","ts","delete","addData","startHour","endHour","addPartialData","notifySubscribers","mergeIntervals","getHourData","getMissingIntervals","missingIntervals","hourStart","hourEnd","currentStart","cachedStart","cachedEnd","max","isCompleteRange","intervals","mergedIntervals","lastMerged","subscribe","callback","sub","subscriptions","notifyExistingData","subB","subHour","getCombinedData","combinedData","constructor","keyPrefix","keyMaxCount","indexedDB","deleteDatabase","dbName","maxCount","fetchPaginatedBucketData","fetchData","setQueryData","called","all","fetchPaginatedData","bucket","currentCursor","hasMoreData","dataSoFar","SCHEDULE_FUTURE_TICKS_FRAGMENT","batchLimit","runsFilter","_end","startSec","endSec","getHourlyBuckets","nextHour","localCacheIdPrefix","AppContext","completedRunsCache","completedRuns","setCompletedRuns","useLayoutEffect","updateTime","completedRunsQueryData","setCompletedRunsData","ongoingRunsQueryData","setOngoingRunsData","ongoingRunsData","fetchCompletedRunsQueryData","updatedAfter","updatedBefore","missingRange","COMPLETED_RUN_TIMELINE_QUERY","completedFilter","doneStatuses","limit","fetchIdRef","useRef","ongoingRunFetchIdRef","futureTicksFetchIdRef","fetchOngoingRunsQueryData","ONGOING_RUN_TIMELINE_QUERY","inProgressFilter","ongoing","nextCursor","futureTicksQueryData","setFutureTicksQueryData","fetchFutureTicks","FUTURE_TICKS_QUERY","tickCursor","ticksUntil","futureTicksData","setLoading","previousRunsByJobKey","jobInfo","runsByJobKey","saveRunInfo","repositoryOrigin","runJobKey","repositoryName","repositoryLocationName","pipelineName","isAdHoc","isHiddenAssetGroupJob","jobsWithCompletedRunsAndOngoingRuns","jobKey","jobRunsInfo","info","jobName","jobType","workspacePipelinePath","repoName","repoLocation","isJob","jobsWithCompletedRunsAndOngoingRunsValues","unsortedJobs","addedAdHocJobs","locationEntry","pipeline","jobTicks","InstigationStatus","RUNNING","futureTicks","overlap","add","jobRuns","jobsWithRuns","earliest","reduce","accum","startTimes","lastFetchRef","future","lastRangeMs","abs","loadId","RUN_TIMELINE_FRAGMENT","RUN_TIME_FRAGMENT"],"sourceRoot":""}