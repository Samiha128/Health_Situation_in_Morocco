"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6023,7265],{6023:function(e,n,t){t.r(n),t.d(n,{ConcurrencyLimits:function(){return em},FREE_CONCURRENCY_SLOTS_MUTATION:function(){return e_},INSTANCE_CONCURRENCY_LIMITS_QUERY:function(){return eT},InstanceConcurrencyPage:function(){return ed},InstanceConcurrencyPageContent:function(){return ea},RunConcurrencyContent:function(){return ey},default:function(){return ex}});var r=t(73235),i=t(52322),c=t(40794),s=t(33379),o=t(89130),l=t(14934),u=t(79106),a=t(49308),d=t(74580),x=t(35292),y=t(90441),h=t(20156),m=t(38491),p=t(92917),j=t(37483),g=t(89891),f=t(43212),C=t(74159),v=t(92506),b=t(55010),S=t(60603),I=t(35002),K=t(39013),w=t(1747),k=t(2784),T=t(47933),q=t(9108),R=t(77265),_=t(3842),N=t(88510),E=t(35505),F=t(16336),L=t(34219),Q=t(17008),$=t(83738);function z(){let e=(0,r._)(["\n  query SingleConcurrencyKeyQuery($concurrencyKey: String!) {\n    instance {\n      id\n      concurrencyLimit(concurrencyKey: $concurrencyKey) {\n        concurrencyKey\n        slotCount\n        claimedSlots {\n          runId\n          stepKey\n        }\n        pendingSteps {\n          runId\n          stepKey\n          enqueuedTimestamp\n          assignedTimestamp\n          priority\n        }\n      }\n    }\n  }\n"]);return z=function(){return e},e}let O="1fr 150px 150px 150px 150px 150px",P=e=>{let{concurrencyKeys:n,onEdit:t,onDelete:r,onSelect:c}=e,s=(0,k.useRef)(null),o=(0,N.MG)({count:n.length,getScrollElement:()=>s.current,estimateSize:()=>64,overscan:10}),l=o.getTotalSize(),u=o.getVirtualItems();return(0,i.jsx)("div",{style:{overflow:"hidden"},children:(0,i.jsxs)(Q.W2,{ref:s,children:[(0,i.jsx)(V,{}),(0,i.jsx)(Q.Nh,{$totalHeight:l,children:u.map(e=>{let{index:s,key:o,size:l,start:u}=e,a=n[s];return(0,i.jsx)(D,{concurrencyKey:a,onEdit:t,onDelete:r,onSelect:c,height:l,start:u},o)})})]})})},V=()=>(0,i.jsxs)(Q.VJ,{templateColumns:O,sticky:!0,children:[(0,i.jsx)(Q.qN,{children:"Concurrency key"}),(0,i.jsx)(Q.qN,{children:"Total slots"}),(0,i.jsx)(Q.qN,{children:"Assigned steps"}),(0,i.jsx)(Q.qN,{children:"Pending steps"}),(0,i.jsx)(Q.qN,{children:"All steps"}),(0,i.jsx)(Q.qN,{})]}),D=e=>{let{concurrencyKey:n,onEdit:t,onDelete:r,onSelect:c,height:s,start:o}=e,[u,a]=(0,_.t)(A,{variables:{concurrencyKey:n}});(0,L.Hu)(a,"SingleConcurrencyKeyQuery"),(0,$.v5)(u),(0,F.C4)(a,F.dT);let{data:d}=a,x=null==d?void 0:d.instance.concurrencyLimit;return(0,i.jsx)(Q.X2,{$height:s,$start:o,children:(0,i.jsxs)(J,{border:"bottom",children:[(0,i.jsx)(Q.E5,{children:(0,i.jsx)(i.Fragment,{children:n})}),(0,i.jsx)(Q.E5,{children:x?(0,i.jsx)("div",{children:x.slotCount}):(0,i.jsx)($.mq,{queryResult:a})}),(0,i.jsx)(Q.E5,{children:x?(0,i.jsx)(i.Fragment,{children:x.pendingSteps.filter(e=>!!e.assignedTimestamp).length}):(0,i.jsx)($.mq,{queryResult:a})}),(0,i.jsx)(Q.E5,{children:x?(0,i.jsx)(i.Fragment,{children:x.pendingSteps.filter(e=>!e.assignedTimestamp).length}):(0,i.jsx)($.mq,{queryResult:a})}),(0,i.jsx)(Q.E5,{children:x?(0,i.jsxs)(l.x,{flex:{direction:"row",gap:16,alignItems:"center"},children:[(0,i.jsx)("span",{children:x.pendingSteps.length}),(0,i.jsx)(f.V,{intent:"primary",interactive:!0,children:(0,i.jsx)(g.Z,{onClick:()=>{c(x.concurrencyKey)},children:"View all"})})]}):(0,i.jsx)($.mq,{queryResult:a})}),(0,i.jsx)(Q.E5,{children:(0,i.jsx)(U,{concurrencyKey:n,onEdit:t,onDelete:r})})]})})},U=e=>{let{concurrencyKey:n,onDelete:t,onEdit:r}=e;return(0,i.jsx)(b.J,{content:(0,i.jsxs)(S.v2,{children:[(0,i.jsx)(S.sN,{icon:"edit",text:"Edit",onClick:()=>r(n)}),(0,i.jsx)(S.sN,{icon:"delete",intent:"danger",text:"Delete",onClick:()=>t(n)})]}),position:"bottom-left",children:(0,i.jsx)(m.zx,{icon:(0,i.jsx)(p.JO,{name:"expand_more"})})})},A=(0,o.Ps)(z()),J=(0,E.ZP)(l.x).withConfig({componentId:"sc-586bb5ca-0"})(["display:grid;grid-template-columns:",";height:100%;"],O);var Y=t(50309),B=t(71406),H=t(69737),Z=t(20171),M=t(4378),W=t(54516),G=t(59351),X=t(33182),ee=t(2278);function en(){let e=(0,r._)(["\n  fragment ConcurrencyStepFragment on PendingConcurrencyStep {\n    runId\n    stepKey\n    enqueuedTimestamp\n    assignedTimestamp\n    priority\n  }\n"]);return en=function(){return e},e}function et(){let e=(0,r._)(["\n  fragment ConcurrencyLimitFragment on ConcurrencyKeyInfo {\n    concurrencyKey\n    slotCount\n    claimedSlots {\n      runId\n      stepKey\n    }\n    pendingSteps {\n      ...ConcurrencyStepFragment\n    }\n  }\n  ","\n"]);return et=function(){return e},e}function er(){let e=(0,r._)(["\n  fragment RunQueueConfigFragment on RunQueueConfig {\n    maxConcurrentRuns\n    tagConcurrencyLimitsYaml\n  }\n"]);return er=function(){return e},e}function ei(){let e=(0,r._)(["\n  query InstanceConcurrencyLimitsQuery {\n    instance {\n      id\n      info\n      supportsConcurrencyLimits\n      runQueuingSupported\n      runQueueConfig {\n        ...RunQueueConfigFragment\n      }\n      minConcurrencyLimitValue\n      maxConcurrencyLimitValue\n      concurrencyLimits {\n        concurrencyKey\n      }\n    }\n  }\n\n  ","\n"]);return ei=function(){return e},e}function ec(){let e=(0,r._)(["\n  mutation SetConcurrencyLimit($concurrencyKey: String!, $limit: Int!) {\n    setConcurrencyLimit(concurrencyKey: $concurrencyKey, limit: $limit)\n  }\n"]);return ec=function(){return e},e}function es(){let e=(0,r._)(["\n  mutation DeleteConcurrencyLimit($concurrencyKey: String!) {\n    deleteConcurrencyLimit(concurrencyKey: $concurrencyKey)\n  }\n"]);return es=function(){return e},e}function eo(){let e=(0,r._)(["\n  mutation FreeConcurrencySlots($runId: String!, $stepKey: String) {\n    freeConcurrencySlots(runId: $runId, stepKey: $stepKey)\n  }\n"]);return eo=function(){return e},e}function el(){let e=(0,r._)(["\n  query ConcurrencyKeyDetailsQuery($concurrencyKey: String!) {\n    instance {\n      id\n      concurrencyLimit(concurrencyKey: $concurrencyKey) {\n        ...ConcurrencyLimitFragment\n      }\n    }\n  }\n  ","\n"]);return el=function(){return e},e}function eu(){let e=(0,r._)(["\n  query RunsForConcurrencyKeyQuery($filter: RunsFilter, $limit: Int) {\n    pipelineRunsOrError(filter: $filter, limit: $limit) {\n      ... on Runs {\n        results {\n          id\n          status\n        }\n      }\n    }\n  }\n"]);return eu=function(){return e},e}let ea=k.memo(()=>{(0,H.Px)(),(0,Z.j)("Concurrency");let[e,n]=(0,M.q)({queryKey:"key"}),t=(0,c.a)(eT,{notifyOnNetworkStatusChange:!0});(0,L.Hu)(t,"InstanceConcurrencyLimitsQuery");let r=(0,F.C4)(t,F.dT),{data:s}=t;return(0,i.jsx)("div",{style:{overflowY:"auto"},children:s?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(l.x,{margin:{bottom:64},children:(0,i.jsx)(ey,{refreshState:r,hasRunQueue:!!(null==s?void 0:s.instance.runQueuingSupported),runQueueConfig:null==s?void 0:s.instance.runQueueConfig})}),(0,i.jsx)(em,{instanceConfig:s.instance.info,concurrencyKeys:s.instance.concurrencyLimits.map(e=>e.concurrencyKey),hasSupport:s.instance.supportsConcurrencyLimits,refetch:t.refetch,minValue:s.instance.minConcurrencyLimitValue,maxValue:s.instance.maxConcurrencyLimitValue,selectedKey:e,onSelectKey:n})]}):(0,i.jsx)(l.x,{padding:{vertical:64},children:(0,i.jsx)(u.$,{purpose:"section"})})})}),ed=()=>{let{pageTitle:e}=k.useContext(q.N);return(0,i.jsxs)(a.T,{style:{padding:0},children:[(0,i.jsx)(d.m,{title:(0,i.jsx)(x.X6,{children:e}),tabs:(0,i.jsx)(R.Z,{tab:"concurrency"})}),(0,i.jsx)(ea,{})]})};var ex=ed;let ey=e=>{let{hasRunQueue:n,runQueueConfig:t,onEdit:r,refreshState:c}=e;if(!n)return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(l.x,{padding:{vertical:16,horizontal:24},border:"bottom",flex:{direction:"row",alignItems:"center",justifyContent:"space-between"},children:[(0,i.jsx)(x.pm,{children:"Run concurrency"}),c?(0,i.jsx)(F.xi,{refreshState:c}):null]}),(0,i.jsxs)(l.x,{padding:{vertical:16,horizontal:24},children:["Run concurrency is not supported with this run coordinator. To enable run concurrency limits, configure your instance to use the ",(0,i.jsx)(x.fv,{children:"QueuedRunCoordinator"})," in your"," ",(0,i.jsx)(x.fv,{children:"dagster.yaml"}),". See the"," ",(0,i.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://docs.dagster.io/deployment/dagster-instance#queuedruncoordinator",children:"QueuedRunCoordinator documentation"})," ","for more information."]})]});let s=(0,i.jsxs)(l.x,{padding:{vertical:16,horizontal:24},children:["Run concurrency can be set in your run queue settings. See the"," ",(0,i.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://docs.dagster.io/guides/limiting-concurrency-in-data-pipelines#configuring-run-level-concurrency",children:"run concurrency documentation"})," ","for more information."]}),o=t?(0,i.jsx)(y.fJ,{children:(0,i.jsxs)("tbody",{children:[(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"Max concurrent runs:"}),(0,i.jsx)("td",{children:t.maxConcurrentRuns})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"Tag concurrency limits:"}),(0,i.jsx)("td",{children:t.tagConcurrencyLimitsYaml?(0,i.jsx)(h.u,{value:t.tagConcurrencyLimitsYaml,options:{readOnly:!0,lineNumbers:!0,mode:"yaml"}}):"-"})]})]})}):null;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(eh,{onEdit:r,refreshState:c}),s,o]})},eh=e=>{let{onEdit:n,refreshState:t}=e;return(0,i.jsxs)(l.x,{flex:{justifyContent:"space-between",alignItems:"center"},padding:{vertical:16,horizontal:24},border:"bottom",children:[(0,i.jsx)(x.pm,{children:"Run concurrency"}),(0,i.jsxs)(l.x,{flex:{direction:"row",alignItems:"center",gap:8},children:[t?(0,i.jsx)(F.xi,{refreshState:t}):null,n?(0,i.jsx)(m.zx,{icon:(0,i.jsx)(p.JO,{name:"edit"}),onClick:()=>n(),children:"Edit configuration"}):null]})]})},em=e=>{let{instanceConfig:n,hasSupport:t,concurrencyKeys:r,refetch:c,minValue:s,maxValue:o,selectedKey:u,onSelectKey:a}=e,[d,x]=k.useState(),y=k.useCallback(()=>{a(void 0)},[a]),[h,m]=k.useState(""),p=k.useMemo(()=>[...r].filter(e=>e.includes(h)).sort((e,n)=>B.Bl.compare(e,n)),[r,h]),f=()=>{x({actionType:"add"})};return!t&&n&&n.includes("SqliteEventLogStorage")?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(ep,{}),(0,i.jsx)(l.x,{margin:24,children:(0,i.jsx)(j.t,{icon:"error",title:"No concurrency support",description:"This instance does not support global concurrency limits. You will need to configure a different storage implementation (e.g. Postgres/MySQL) to use this feature."})})]}):!1===t?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(ep,{}),(0,i.jsx)(l.x,{margin:24,children:(0,i.jsx)(j.t,{icon:"error",title:"No concurrency support",description:"This instance does not currently support global concurrency limits. You may need to run `dagster instance migrate` to add the necessary tables to your dagster storage to support this feature."})})]}):(0,i.jsxs)(l.x,{flex:{direction:"column"},style:{overflow:"auto",height:"100%"},children:[(0,i.jsx)(ep,{onAdd:f,search:h,setSearch:m}),0===r.length?(0,i.jsx)(l.x,{margin:24,children:(0,i.jsx)(j.t,{icon:"error",title:"No concurrency limits",description:(0,i.jsxs)(i.Fragment,{children:["No concurrency limits have been configured for this instance.\xa0",(0,i.jsx)(g.Z,{onClick:()=>f(),children:"Add a concurrency limit"}),"."]})})}):(0,i.jsx)(P,{concurrencyKeys:p,onDelete:e=>{x({actionType:"delete",concurrencyKey:e})},onEdit:e=>{x({actionType:"edit",concurrencyKey:e})},onSelect:a}),(0,i.jsx)(eg,{open:(null==d?void 0:d.actionType)==="add",onClose:()=>x(void 0),onComplete:c,minValue:null!=s?s:1,maxValue:null!=o?o:1e3}),(0,i.jsx)(eC,{concurrencyKey:d&&"delete"===d.actionType?d.concurrencyKey:"",open:(null==d?void 0:d.actionType)==="delete",onClose:()=>x(void 0),onComplete:c}),(0,i.jsx)(ef,{open:(null==d?void 0:d.actionType)==="edit",onClose:()=>x(void 0),onComplete:c,concurrencyKey:(null==d?void 0:d.actionType)==="edit"?d.concurrencyKey:"",minValue:null!=s?s:1,maxValue:null!=o?o:1e3}),(0,i.jsx)(eb,{title:(0,i.jsxs)("span",{children:["Concurrency steps for ",(0,i.jsx)("strong",{children:u})]}),onClose:y,concurrencyKey:u,onUpdate:c})]})},ep=e=>{let{onAdd:n,setSearch:t,search:r}=e;return(0,i.jsxs)(l.x,{flex:{direction:"column"},children:[(0,i.jsxs)(l.x,{flex:{justifyContent:"space-between",alignItems:"center"},padding:{vertical:16,horizontal:24},border:"top-and-bottom",children:[(0,i.jsxs)(l.x,{flex:{alignItems:"center",direction:"row",gap:8},children:[(0,i.jsx)(x.pm,{children:"Global op/asset concurrency"}),(0,i.jsx)(f.V,{children:"Experimental"})]}),n?(0,i.jsx)(m.zx,{icon:(0,i.jsx)(p.JO,{name:"add_circle"}),onClick:()=>n(),children:"Add concurrency limit"}):null]}),t?(0,i.jsx)(l.x,{flex:{direction:"row"},padding:{vertical:16,horizontal:24},border:"bottom",children:(0,i.jsx)(C.oi,{value:r||"",style:{width:"30vw",minWidth:150,maxWidth:400},placeholder:"Filter concurrency keys",onChange:e=>t(e.target.value)})}):null]})},ej=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;if(!e)return!1;let r=parseInt(e);return!isNaN(r)&&String(r)===e.trim()&&r>=n&&r<=t},eg=e=>{let{open:n,onClose:t,onComplete:r,maxValue:c,minValue:o}=e,[u,a]=k.useState(!1),[d,x]=k.useState(""),[y,h]=k.useState("");k.useEffect(()=>{x(""),h("")},[n]);let[p]=(0,s.D)(eq),j=async()=>{a(!0),await p({variables:{concurrencyKey:y,limit:parseInt(d.trim())}}),a(!1),r(),t()};return(0,i.jsxs)(v.Vq,{isOpen:n,title:"Add concurrency limit",onClose:t,children:[(0,i.jsxs)(v.a7,{children:[(0,i.jsx)(l.x,{margin:{bottom:4},children:"Concurrency key:"}),(0,i.jsx)(l.x,{margin:{bottom:16},children:(0,i.jsx)(C.oi,{value:y||"",onChange:e=>h(e.target.value),placeholder:"Concurrency key"})}),(0,i.jsxs)(l.x,{margin:{bottom:4},children:["Concurrency limit (",o,"-",c,"):"]}),(0,i.jsx)(l.x,{children:(0,i.jsx)(C.oi,{value:d||"",onChange:e=>x(e.target.value),placeholder:"".concat(o," - ").concat(c)})})]}),(0,i.jsxs)(v.cN,{children:[(0,i.jsx)(m.zx,{intent:"none",onClick:t,children:"Cancel"}),(0,i.jsx)(m.zx,{intent:"primary",onClick:j,disabled:!ej(d.trim(),o,c)||!y||u,children:u?"Adding...":"Add limit"})]})]})},ef=e=>{let{concurrencyKey:n,open:t,onClose:r,onComplete:c,minValue:o,maxValue:u}=e,[a,d]=k.useState(!1),[y,h]=k.useState("");k.useEffect(()=>{h("")},[t]);let[p]=(0,s.D)(eq),j=async()=>{d(!0),await p({variables:{concurrencyKey:n,limit:parseInt(y.trim())}}),d(!1),c(),r()},g=(0,i.jsxs)(i.Fragment,{children:["Edit ",(0,i.jsx)(x.fv,{children:n})]});return(0,i.jsxs)(v.Vq,{isOpen:t,title:g,onClose:r,children:[(0,i.jsxs)(v.a7,{children:[(0,i.jsx)(l.x,{margin:{bottom:4},children:"Concurrency key:"}),(0,i.jsx)(l.x,{margin:{bottom:16},children:(0,i.jsx)("strong",{children:n})}),(0,i.jsxs)(l.x,{margin:{bottom:4},children:["Concurrency limit (",o,"-",u,"):"]}),(0,i.jsx)(l.x,{children:(0,i.jsx)(C.oi,{value:y||"",onChange:e=>h(e.target.value),placeholder:"".concat(o," - ").concat(u)})})]}),(0,i.jsxs)(v.cN,{children:[(0,i.jsx)(m.zx,{intent:"none",onClick:r,children:"Close"}),a?(0,i.jsx)(m.zx,{intent:"primary",disabled:!0,children:"Updating..."}):(0,i.jsx)(m.zx,{intent:"primary",onClick:j,disabled:!ej(y.trim(),o,u),children:"Update limit"})]})]})},eC=e=>{let{concurrencyKey:n,open:t,onClose:r,onComplete:c}=e,[o,l]=k.useState(!1),[u]=(0,s.D)(eR),a=async()=>{l(!0),await u({variables:{concurrencyKey:n}}),l(!1),c(),r()},d=(0,i.jsxs)(i.Fragment,{children:["Delete ",(0,i.jsx)(x.fv,{children:n})]});return(0,i.jsxs)(v.Vq,{isOpen:t,title:d,onClose:r,children:[(0,i.jsxs)(v.a7,{children:["Delete concurrency limit\xa0",(0,i.jsx)("strong",{children:n}),"?"]}),(0,i.jsxs)(v.cN,{children:[(0,i.jsx)(m.zx,{intent:"none",onClick:r,children:"Close"}),o?(0,i.jsx)(m.zx,{intent:"danger",disabled:!0,children:"Deleting..."}):(0,i.jsx)(m.zx,{intent:"danger",onClick:a,children:"Delete limit"})]})]})},ev=e=>{let{pendingStep:n,onUpdate:t}=e,[r]=(0,s.D)(e_);return(0,i.jsx)(b.J,{content:(0,i.jsxs)(S.v2,{children:[(0,i.jsx)(S.sN,{icon:"status",text:"Free concurrency slot for step",onClick:async()=>{var e;(null===(e=(await r({variables:{runId:n.runId,stepKey:n.stepKey}})).data)||void 0===e?void 0:e.freeConcurrencySlots)&&(t(),await (0,Y.B7)({intent:"success",icon:"copy_to_clipboard_done",message:"Freed concurrency slot"}))}},"free-concurrency-slots-step"),(0,i.jsx)(S.sN,{icon:"status",text:"Free all concurrency slots for run",onClick:async()=>{var e;await (0,Y.B7)({message:"Freeing concurrency slots..."}),(null===(e=(await r({variables:{runId:n.runId}})).data)||void 0===e?void 0:e.freeConcurrencySlots)&&(t(),await (0,Y.B7)({intent:"success",icon:"copy_to_clipboard_done",message:"Freed concurrency slots"}))}},"free-concurrency-slots-run")]}),position:"bottom-right",children:(0,i.jsx)(m.zx,{rightIcon:(0,i.jsx)(p.JO,{name:"expand_more"}),children:"Actions"})})},eb=e=>{let{concurrencyKey:n,onClose:t,title:r,onUpdate:s}=e,o=(0,c.a)(eN,{variables:{concurrencyKey:n||""},skip:!n});(0,L.Hu)(o,"ConcurrencyKeyDetailsQuery",{skip:!n}),(0,F.C4)(o,F.dT);let{data:a}=o,d=k.useCallback(()=>{o.refetch(),s()},[o,s]);return(0,i.jsxs)(v.Vq,{isOpen:!!n,title:r,onClose:t,style:{minWidth:"400px",maxWidth:"1000px",width:"90vw",maxHeight:"90vh"},children:[(0,i.jsx)(l.x,{padding:{vertical:16},flex:{grow:1},style:{overflowY:"auto"},children:a?(0,i.jsx)(eS,{keyInfo:a.instance.concurrencyLimit,refresh:d}):(0,i.jsx)(l.x,{padding:{vertical:64},children:(0,i.jsx)(u.$,{purpose:"section"})})}),(0,i.jsx)(v.cN,{children:(0,i.jsx)(m.zx,{intent:"none",onClick:t,children:"Close"})})]})},eS=e=>{var n;let{keyInfo:t,refresh:r}=e,s=[...new Set(t.pendingSteps.map(e=>e.runId))],o=(0,c.a)(eE,{variables:{filter:{runIds:s}},skip:!t.pendingSteps.length});(0,L.Hu)(o,"RunsForConcurrencyKeyQuery",{skip:!t.pendingSteps.length});let u={};((null===(n=o.data)||void 0===n?void 0:n.pipelineRunsOrError.__typename)==="Runs"?o.data.pipelineRunsOrError.results:[]).forEach(e=>{u[e.id]=e.status});let a=[...t.pendingSteps];a.sort((e,n)=>e.priority&&n.priority&&e.priority!==n.priority?e.priority-n.priority:e.enqueuedTimestamp-n.enqueuedTimestamp);let d=a.filter(e=>!!e.assignedTimestamp),x=a.filter(e=>!e.assignedTimestamp),y=(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{children:"Run ID"}),(0,i.jsx)("th",{children:"Step key"}),(0,i.jsx)("th",{children:"Assigned"}),(0,i.jsx)("th",{children:"Queued"}),(0,i.jsx)("th",{children:(0,i.jsxs)(l.x,{flex:{alignItems:"center",direction:"row",gap:4},children:["Priority",(0,i.jsx)(I.u,{placement:"top",content:"Priority can be set on each op/asset using the 'dagster/priority' tag. Higher priority steps will be assigned slots first.",children:(0,i.jsx)(p.JO,{name:"info",color:K.md()})})]})}),(0,i.jsx)("th",{})]})});return a.length?(0,i.jsxs)(w.i,{children:[y,(0,i.jsx)("tbody",{style:{backgroundColor:K.B5()},children:d.map(e=>(0,i.jsx)(eI,{step:e,statusByRunId:u,onUpdate:r},e.runId+e.stepKey))}),(0,i.jsx)("tbody",{children:x.map(e=>(0,i.jsx)(eI,{step:e,statusByRunId:u,onUpdate:r},e.runId+e.stepKey))})]}):(0,i.jsxs)(w.i,{children:[y,(0,i.jsx)("tbody",{children:(0,i.jsx)("tr",{children:(0,i.jsx)("td",{colSpan:6,children:(0,i.jsx)(l.x,{flex:{alignItems:"center",justifyContent:"center"},style:{color:K.$()},padding:16,children:"There are no active or pending steps for this concurrency key."})})})})]})},eI=e=>{let{step:n,statusByRunId:t,onUpdate:r}=e,c=t[n.runId];return(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:c?(0,i.jsx)(T.rU,{to:"/runs/".concat(n.runId),children:(0,i.jsxs)(l.x,{flex:{direction:"row",alignItems:"center",gap:8},children:[(0,i.jsx)(W.O_,{status:c,size:10}),(0,i.jsx)(x.fv,{children:(0,X.EI)({id:n.runId})}),G.hd.has(c)?(0,i.jsx)(I.u,{placement:"top",content:"Slots for canceled / failed runs can automatically be freed by configuring a run monitoring setting.",children:(0,i.jsx)(p.JO,{name:"info",color:K.md()})}):null]})}):(0,i.jsx)(x.fv,{children:(0,X.EI)({id:n.runId})})}),(0,i.jsx)("td",{children:(0,i.jsx)(x.fv,{children:n.stepKey})}),(0,i.jsx)("td",{children:n.assignedTimestamp?(0,i.jsx)(ee.Q,{startUnix:n.assignedTimestamp,endUnix:null}):"-"}),(0,i.jsx)("td",{children:n.enqueuedTimestamp?(0,i.jsx)(ee.Q,{startUnix:n.enqueuedTimestamp,endUnix:null}):"-"}),(0,i.jsx)("td",{children:n.priority}),(0,i.jsx)("td",{children:(0,i.jsx)(ev,{pendingStep:n,onUpdate:r})})]})},eK=(0,o.Ps)(en()),ew=(0,o.Ps)(et(),eK),ek=(0,o.Ps)(er()),eT=(0,o.Ps)(ei(),ek),eq=(0,o.Ps)(ec()),eR=(0,o.Ps)(es()),e_=(0,o.Ps)(eo()),eN=(0,o.Ps)(el(),ew),eE=(0,o.Ps)(eu())},77265:function(e,n,t){t.d(n,{Z:function(){return f}});var r=t(52322),i=t(14934),c=t(73407),s=t(2784),o=t(9108),l=t(35232),u=t(16336),a=t(92917),d=t(39013),x=t(29185),y=t(83613);let h=(0,s.memo)(()=>{let{daemons:e}=(0,s.useContext)(y.Z);return e?(0,r.jsx)(x.a,{content:e.content,position:"bottom",modifiers:{offset:{enabled:!0,options:{offset:[0,28]}}},children:(0,r.jsx)(a.JO,{name:"warning",color:d.qr()})}):null});var m=t(35002),p=t(79106);let j=(0,s.memo)(e=>{let{placeholder:n}=e,{codeLocations:t}=(0,s.useContext)(y.Z);return t?"spinner"===t.type?(0,r.jsx)(m.u,{content:t.content,placement:"bottom",children:(0,r.jsx)(p.$,{purpose:"body-text",fillColor:d.md()})}):(0,r.jsx)(x.a,{content:t.content,position:"bottom",modifiers:{offset:{enabled:!0,options:{offset:[0,28]}}},children:(0,r.jsx)(a.JO,{name:"warning",color:d.qr()})}):n?(0,r.jsx)("div",{style:{width:"16px"}}):null});var g=t(89918);let f=e=>{let{refreshState:n,tab:t}=e,{healthTitle:a}=(0,s.useContext)(o.N),d=(0,l._)();return(0,r.jsxs)(i.x,{flex:{direction:"row",justifyContent:"space-between",alignItems:"flex-end"},children:[(0,r.jsxs)(c.mQ,{selectedTabId:t,children:[(0,r.jsx)(g.f,{id:"locations",title:"Code locations",to:"/locations",icon:(0,r.jsx)(j,{placeholder:!1})}),(0,r.jsx)(g.f,{id:"health",title:a,to:"/health",icon:(0,r.jsx)(h,{})}),d?(0,r.jsx)(g.f,{id:"concurrency",title:"Concurrency limits",to:"/concurrency"}):null,d?(0,r.jsx)(g.f,{id:"config",title:"Configuration",to:"/config"}):null]}),n?(0,r.jsx)(i.x,{padding:{bottom:8},children:(0,r.jsx)(u.xi,{refreshState:n})}):null]})}}}]);
//# sourceMappingURL=6023.69f6e1f2bd514abc.js.map