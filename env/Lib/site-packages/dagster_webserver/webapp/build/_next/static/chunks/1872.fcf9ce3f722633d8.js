"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1872],{93812:function(e,n,t){t.d(n,{B:function(){return a},X:function(){return c}});var r=t(73235),i=t(89130),s=t(78491);function o(){let e=(0,r._)(["\n  fragment AssetDaemonTickFragment on InstigationTick {\n    id\n    timestamp\n    endTimestamp\n    status\n    instigationType\n    error {\n      ...PythonErrorFragment\n    }\n    requestedAssetKeys {\n      path\n    }\n    requestedAssetMaterializationCount\n    autoMaterializeAssetEvaluationId\n    requestedMaterializationsForAssets {\n      assetKey {\n        path\n      }\n      partitionKeys\n    }\n  }\n\n  ","\n"]);return o=function(){return e},e}function l(){let e=(0,r._)(["\n  query AssetDaemonTicksQuery(\n    $dayRange: Int\n    $dayOffset: Int\n    $statuses: [InstigationTickStatus!]\n    $limit: Int\n    $cursor: String\n    $beforeTimestamp: Float\n    $afterTimestamp: Float\n  ) {\n    autoMaterializeTicks(\n      dayRange: $dayRange\n      dayOffset: $dayOffset\n      statuses: $statuses\n      limit: $limit\n      cursor: $cursor\n      beforeTimestamp: $beforeTimestamp\n      afterTimestamp: $afterTimestamp\n    ) {\n      id\n      ...AssetDaemonTickFragment\n    }\n  }\n\n  ","\n"]);return l=function(){return e},e}let a=(0,i.Ps)(o(),s.B),c=(0,i.Ps)(l(),a)},4733:function(e,n,t){t.d(n,{V:function(){return f}});var r=t(52322),i=t(14934),s=t(51484),o=t(79106),l=t(89891),a=t(35292),c=t(80122),d=t(37504),u=t(1747),p=t(35505),h=t(22791),x=t(88257),m=t(2278),g=t(58905);let f=e=>{let{loading:n,ticks:t,statuses:d,setStatuses:u,setSelectedTick:p,setTableView:f,paginationProps:j}=e;return(0,r.jsxs)(i.x,{children:[(0,r.jsxs)(i.x,{flex:{justifyContent:"space-between",alignItems:"center"},padding:{vertical:12,horizontal:24},margin:{top:32},border:"top",children:[(0,r.jsxs)(i.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,r.jsx)(s.h,{activeItems:new Set(["evaluations"]),buttons:[{id:"evaluations",label:"Evaluations"},{id:"runs",label:"Runs"}],onClick:e=>{f(e)}}),!n||(null==t?void 0:t.length)?null:(0,r.jsx)(o.$,{purpose:"body-text"})]}),(0,r.jsxs)(i.x,{flex:{direction:"row",gap:12,alignItems:"center"},children:[(0,r.jsx)(v,{statuses:d,setStatuses:u,status:x.izS.STARTED}),(0,r.jsx)(v,{statuses:d,setStatuses:u,status:x.izS.SUCCESS}),(0,r.jsx)(v,{statuses:d,setStatuses:u,status:x.izS.FAILURE}),(0,r.jsx)(v,{statuses:d,setStatuses:u,status:x.izS.SKIPPED})]})]}),(0,r.jsxs)(y,{children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{style:{width:120},children:"Timestamp"}),(0,r.jsx)("th",{style:{width:90},children:"Status"}),(0,r.jsx)("th",{style:{width:90},children:"Duration"}),(0,r.jsx)("th",{style:{width:180},children:"Result"})]})}),(0,r.jsx)("tbody",{children:t.map((e,n)=>{let t=0!==n&&e.status===x.izS.STARTED&&!j.hasPrevCursor;return(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:(0,r.jsx)(h.E,{timestamp:{unix:e.timestamp},timeFormat:{showTimezone:!0}})}),(0,r.jsx)("td",{children:(0,r.jsx)(g.a,{tick:e,isStuckStarted:t})}),(0,r.jsx)("td",{children:t?" - ":(0,r.jsx)(m.Q,{startUnix:e.timestamp,endUnix:e.endTimestamp})}),(0,r.jsx)("td",{children:[x.izS.SKIPPED,x.izS.SUCCESS].includes(e.status)?(0,r.jsx)(l.Z,{onClick:()=>{p(e)},children:(0,r.jsxs)(a.pN,{children:[e.requestedAssetMaterializationCount," materializations requested"]})}):" - "})]},e.id)})})]}),(0,r.jsx)("div",{style:{paddingBottom:"16px"},children:(0,r.jsx)(c.pI,{...j})})]})},j={[x.izS.SKIPPED]:"None requested",[x.izS.STARTED]:"Started",[x.izS.FAILURE]:"Failed",[x.izS.SUCCESS]:"Requested"};function v(e){let{status:n,statuses:t,setStatuses:i}=e;return(0,r.jsx)(d.X,{label:j[n],checked:t.has(n),onChange:()=>{let e=new Set(t);t.has(n)?e.delete(n):e.add(n),i(e)}})}let y=(0,p.ZP)(u.i).withConfig({componentId:"sc-d9b5bf3f-0"})(["th,td{vertical-align:middle !important;}"])},76575:function(e,n,t){t.d(n,{d:function(){return N}});var r=t(73235),i=t(52322),s=t(40794),o=t(89130),l=t(14934),a=t(35292),c=t(39013),d=t(92917),u=t(79106),p=t(88510),h=t(2784),x=t(47933),m=t(35505),g=t(22791),f=t(44900),j=t(88257),v=t(44030),y=t(34219),S=t(17008),b=t(65822),w=t(10539),k=t(84842),E=t(37680),C=t(75442);function T(){let e=(0,r._)(["\n  query AssetGroupAndLocationQuery($assetKey: AssetKeyInput!) {\n    assetOrError(assetKey: $assetKey) {\n      ... on Asset {\n        id\n        definition {\n          id\n          groupName\n          repository {\n            id\n            name\n            location {\n              id\n              name\n            }\n          }\n        }\n      }\n    }\n  }\n"]);return T=function(){return e},e}let I="30% 17% 53%",N=(0,h.memo)(e=>{let{tick:n,isOpen:t,close:r}=e,[s,o]=(0,h.useState)(""),d=(0,h.useMemo)(()=>n?n.requestedAssetKeys.filter(e=>e.path.join("/").includes(s)):[],[n,s]),u=(null==n?void 0:n.requestedAssetKeys.length)||0,x=(0,h.useRef)(null),m=(0,p.MG)({count:d.length,getScrollElement:()=>x.current,estimateSize:()=>34,overscan:10}),y=m.getTotalSize(),b=m.getVirtualItems(),w=(0,h.useMemo)(()=>{let e={};return null==n||n.requestedMaterializationsForAssets.forEach(n=>{let{assetKey:t,partitionKeys:r}=n;e[(0,f.Je)(t)]=r}),e},[null==n?void 0:n.requestedMaterializationsForAssets]),k=(0,h.useMemo)(()=>s&&!d.length?(0,i.jsx)(E.LS,{title:"No matching asset keys",description:(0,i.jsxs)(i.Fragment,{children:["No matching asset keys for ",(0,i.jsx)("strong",{children:s})]})}):(null==n?void 0:n.requestedAssetKeys.length)?(0,i.jsxs)("div",{style:{overflow:"scroll"},ref:x,children:[(0,i.jsxs)(S.VJ,{templateColumns:I,sticky:!0,children:[(0,i.jsx)(S.qN,{children:"Asset"}),(0,i.jsx)(S.qN,{children:"Group"}),(0,i.jsx)(S.qN,{children:"Result"})]}),(0,i.jsx)(S.Nh,{$totalHeight:y,children:b.map(e=>{let{index:t,key:r,size:s,start:o}=e,l=d[t];return(0,i.jsx)(P,{$height:s,$start:o,assetKey:l,partitionKeys:w[(0,f.Je)(l)],evaluationId:n.autoMaterializeAssetEvaluationId},r)})})]}):(0,i.jsx)(l.x,{padding:{vertical:12,horizontal:24},children:(0,i.jsx)(a.YS,{color:c.$(),children:"None"})}),[w,d,b,s,n,y]);return(0,i.jsx)(E.Vm,{isOpen:t,setIsOpen:r,height:400,header:(0,i.jsx)(E.Lv,{title:n?(0,i.jsx)("div",{children:(0,i.jsx)(g.E,{timestamp:{unix:n.timestamp},timeFormat:{showTimezone:!0}})}):"",showSearch:u>0,placeholder:"Filter by asset keyâ€¦",queryString:s,setQueryString:o}),content:(0,i.jsxs)("div",{style:{display:"grid",gridTemplateRows:"auto auto minmax(0, 1fr)",height:"100%"},children:[(0,i.jsx)(l.x,{padding:{vertical:12,horizontal:24},border:"bottom",children:n?(0,i.jsx)(v.c,{tick:n}):null}),(null==n?void 0:n.status)===j.izS.STARTED?null:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(l.x,{padding:{vertical:12,horizontal:24},border:d.length>0?void 0:"bottom",children:(0,i.jsx)(a.Tj,{children:"Materializations requested"})}),k]})]})})}),P=e=>{let{$start:n,$height:t,assetKey:r,partitionKeys:o,evaluationId:p}=e,h=(null==o?void 0:o.length)||1,m=(0,s.a)(A,{fetchPolicy:"cache-and-network",variables:{assetKey:{path:r.path}}}),{data:g}=m;(0,y.Hu)(m,"AssetGroupAndLocationQuery");let f=(null==g?void 0:g.assetOrError.__typename)==="Asset"?g.assetOrError:null,j=null==f?void 0:f.definition,v=j?(0,b.kQ)(j.repository.name,j.repository.location.name):null;return(0,i.jsx)(S.X2,{$start:n,$height:t,children:(0,i.jsxs)(R,{border:"bottom",children:[(0,i.jsx)(S.E5,{children:(0,i.jsx)(k.R,{path:r.path,icon:"asset",textStyle:"middle-truncate"})}),(0,i.jsx)(S.E5,{children:g?j&&j.groupName&&v?(0,i.jsx)(x.rU,{to:(0,w.$U)(v,"/asset-groups/".concat(j.groupName)),children:(0,i.jsxs)(l.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,i.jsx)(d.JO,{color:c.$(),name:"asset_group"}),j.groupName]})}):(0,i.jsx)(a.YS,{color:c.$(),children:"Asset not found"}):(0,i.jsx)(u.$,{purpose:"body-text"})}),(0,i.jsx)(S.E5,{children:(0,i.jsxs)(x.rU,{to:(0,C.p)(r,{view:"automation",evaluation:"".concat(p)}),children:[h," materialization",1===h?"":"s"," requested"]})})]})})},R=(0,m.ZP)(l.x).withConfig({componentId:"sc-3c2a5bf5-0"})(["display:grid;grid-template-columns:",";height:100%;> *{justify-content:center;}"],I),A=(0,o.Ps)(T())},28363:function(e,n,t){t.d(n,{o:function(){return h}});var r=t(52322),i=t(14934),s=t(51484),o=t(80122),l=t(35505),a=t(16336),c=t(34219),d=t(89010),u=t(6268),p=t(15332);let h=e=>{var n;let{filterTags:t,setTableView:l}=e,{queryResult:h,paginationProps:m}=(0,p.l)({nextCursorForResult:e=>{var n;if("Runs"===e.pipelineRunsOrError.__typename)return null===(n=e.pipelineRunsOrError.results[14])||void 0===n?void 0:n.id},getResultArray:e=>e&&"Runs"===e.pipelineRunsOrError.__typename?e.pipelineRunsOrError.results:[],variables:{filter:{tags:[...t||[],{key:"dagster/auto_materialize",value:"true"}]}},query:u.RUNS_ROOT_QUERY,pageSize:15});(0,c.Hu)(h,"RunsRootQuery"),(0,a.C4)(h,15e3);let g=null===(n=h.data||h.previousData)||void 0===n?void 0:n.pipelineRunsOrError;return(0,r.jsxs)(i.x,{children:[(0,r.jsxs)(x,{children:[(0,r.jsx)(i.x,{padding:{vertical:12,horizontal:24},margin:{top:32},border:"top",children:(0,r.jsx)(s.h,{activeItems:new Set(["runs"]),buttons:[{id:"evaluations",label:"Evaluations"},{id:"runs",label:"Runs"}],onClick:e=>{l(e)}})}),(0,r.jsx)(d.AL,{runs:(null==g?void 0:g.__typename)==="Runs"?g.results:[]})]}),(0,r.jsx)("div",{style:{paddingBottom:"16px"},children:(0,r.jsx)(o.pI,{...m})})]})},x=l.ZP.div.withConfig({componentId:"sc-247be95d-0"})(["position:relative;> *:nth-child(2){position:absolute;right:0;top:0;}"])},84927:function(e,n,t){t.d(n,{V2:function(){return H},WH:function(){return B},qG:function(){return U}});var r=t(73235),i=t(52322),s=t(33379),o=t(89130),l=t(34147),a=t(55010),c=t(60603),d=t(38491),u=t(92917),p=t(2784),h=t(7267),x=t(92506),m=t(71291),g=t(9875),f=t(43984),j=t(65822),v=t(20718);function y(){let e=(0,r._)(["\n  fragment BackfillStepStatusDialogBackfillFragment on PartitionBackfill {\n    id\n    partitionNames\n    partitionSet {\n      name\n      pipelineName\n      repositoryOrigin {\n        repositoryName\n        repositoryLocationName\n      }\n    }\n  }\n"]);return y=function(){return e},e}function S(e){return!!e&&null!==e.partitionSet&&null!==e.partitionNames}let b=e=>{let{backfill:n,onClose:t}=e;return(0,i.jsxs)(x.Vq,{isOpen:!!(null==n?void 0:n.partitionSet),title:"Step status for backfill: ".concat(null==n?void 0:n.id),onClose:t,style:{width:"80vw"},children:[(()=>{if(!S(n))return null;let e=(0,j.kQ)(n.partitionSet.repositoryOrigin.repositoryName,n.partitionSet.repositoryOrigin.repositoryLocationName);return(0,i.jsx)(k,{backfill:n,partitionSet:n.partitionSet,partitionNames:n.partitionNames,repoAddress:e,onClose:t})})(),(0,i.jsx)(x.cN,{topBorder:!0,children:(0,i.jsx)(d.zx,{onClick:t,children:"Done"})})]})},w=(0,o.Ps)(y()),k=e=>{let{backfill:n,partitionSet:t,partitionNames:r,repoAddress:s}=e,[o,l]=(0,p.useState)(60),[a,c]=(0,p.useState)(0),d=(0,p.useMemo)(()=>[{token:"tag",value:"dagster/backfill=".concat(n.id)}],[n.id]),u=(0,g.T)({partitionSetName:t.name,partitionTagName:f.H.Partition,partitionNames:r,pageSize:o,runsFilter:d,repositorySelector:(0,v.$)(s),jobName:t.pipelineName,offset:a,skipQuery:!n});return(0,i.jsx)(m.ux,{partitionNames:r,partitions:u,pipelineName:null==t?void 0:t.pipelineName,repoAddress:s,setPageSize:l,offset:a,setOffset:c})};var E=t(40794),C=t(94655),T=t(78491),I=t(88257),N=t(59351),P=t(96569);function R(){let e=(0,r._)(["\n  fragment BackfillTerminationDialogBackfillFragment on PartitionBackfill {\n    id\n    status\n    isAssetBackfill\n    numCancelable\n  }\n"]);return R=function(){return e},e}function A(){let e=(0,r._)(["\n  mutation CancelBackfill($backfillId: String!) {\n    cancelPartitionBackfill(backfillId: $backfillId) {\n      ... on CancelBackfillSuccess {\n        backfillId\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n"]);return A=function(){return e},e}let O=e=>{let{backfill:n,onClose:t,onComplete:r}=e,[o]=(0,s.D)(z),{data:l}=(0,E.a)(C.cv,{variables:{backfillId:(null==n?void 0:n.id)||""},notifyOnNetworkStatusChange:!0,skip:!n}),[a,c]=(0,p.useState)(!1),u=(0,p.useMemo)(()=>{var e;if(!n||!l||"PartitionBackfill"!==l.partitionBackfillOrError.__typename)return{};let t=null===(e=l.partitionBackfillOrError.partitionStatuses)||void 0===e?void 0:e.results.filter(e=>e.runStatus&&e.runId&&N.oV.has(e.runStatus));return(null==t?void 0:t.reduce((e,n)=>(n&&n.runId&&(e[n.runId]=!0),e),{}))||{}},[n,l]);if(!n||!l)return null;let h=n.numCancelable,m=async()=>{c(!0),await o({variables:{backfillId:n.id}}),r(),c(!1),t()};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(x.Vq,{isOpen:!!n&&n.status!==I.Jv3.CANCELED&&(n.isAssetBackfill||!!h),title:"Cancel backfill",onClose:t,children:[n.isAssetBackfill?(0,i.jsx)(x.a7,{children:"Confirm cancellation of asset backfill? This will mark unfinished runs as canceled."}):(0,i.jsxs)(x.a7,{children:["There ",1===h?"is 1 partition ":"are ".concat(h," partitions "),"yet to be queued or launched."]}),(0,i.jsxs)(x.cN,{children:[(0,i.jsx)(d.zx,{intent:"none",onClick:t,children:"Close"}),a?(0,i.jsx)(d.zx,{intent:"danger",disabled:!0,children:"Canceling..."}):(0,i.jsx)(d.zx,{intent:"danger",onClick:m,children:"Cancel backfill"})]})]}),u&&(0,i.jsx)(P.A,{isOpen:!!n&&(!h||"REQUESTED"!==n.status)&&!!Object.keys(u).length,onClose:t,onComplete:r,selectedRuns:u})]})},_=(0,o.Ps)(R()),z=(0,o.Ps)(A(),T.B);var F=t(57755),D=t(8068),L=t(50309),M=t(23399),$=t(18856);function q(){let e=(0,r._)(["\n  fragment BackfillActionsBackfillFragment on PartitionBackfill {\n    id\n    hasCancelPermission\n    hasResumePermission\n    isAssetBackfill\n    status\n    numCancelable\n\n    ...BackfillStepStatusDialogBackfillFragment\n    ...BackfillTerminationDialogBackfillFragment\n  }\n\n  ","\n  ","\n"]);return q=function(){return e},e}function U(e,n){if(!e.hasCancelPermission||!n)return!1;let t=n[I.VOA.QUEUED]||0,r=n[I.VOA.STARTED]||0;return t>0||r>0}let B=e=>{let{backfill:n,canCancelRuns:t,refetch:r}=e,o=(0,h.k6)(),x=(0,$.it)([{token:"tag",value:"dagster/backfill=".concat(n.id)}]),[m,g]=(0,p.useState)(!1),[f,j]=(0,p.useState)(!1),[v]=(0,s.D)(F.g),y=async()=>{let{data:e}=await v({variables:{backfillId:n.id}});if(e&&"ResumeBackfillSuccess"===e.resumePartitionBackfill.__typename)r();else if(e&&"UnauthorizedError"===e.resumePartitionBackfill.__typename)await (0,L.B7)({message:(0,i.jsx)(l.Z,{direction:"column",spacing:4,children:(0,i.jsx)("div",{children:"Attempted to retry the backfill in read-only mode. This backfill was not retried."})}),icon:"error",intent:"danger"});else if(e&&"PythonError"===e.resumePartitionBackfill.__typename){let n=e.resumePartitionBackfill;await (0,L.B7)({message:(0,i.jsx)("div",{children:"An unexpected error occurred. This backfill was not retried."}),icon:"error",intent:"danger",action:{text:"View error",onClick:()=>(0,D._K)({body:(0,i.jsx)(M.T9,{error:n})})}})}},w=n.hasCancelPermission&&(n.isAssetBackfill&&n.status===I.Jv3.REQUESTED||n.numCancelable>0);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a.J,{position:"bottom-right",content:(0,i.jsxs)(c.v2,{children:[(0,i.jsx)(c.sN,{text:"View backfill runs",icon:"settings_backup_restore",onClick:()=>o.push(x)}),(0,i.jsx)(c.sN,{disabled:!S(n),text:"View step status",icon:"view_list",onClick:()=>{j(!0)}}),(0,i.jsx)(c.sN,{disabled:!(n.hasResumePermission&&n.status===I.Jv3.FAILED&&n.partitionSet),text:"Resume failed backfill",title:"Submits runs for all partitions in the backfill that do not have a corresponding run. Does not retry failed runs.",icon:"refresh",onClick:()=>y()}),(0,i.jsx)(c.sN,{text:w?"Cancel backfill submission":"Terminate unfinished runs",icon:"cancel",intent:"danger",disabled:!(w||t),onClick:()=>g(!0)})]}),children:(0,i.jsx)(d.zx,{icon:(0,i.jsx)(u.JO,{name:"expand_more"})})}),(0,i.jsx)(b,{backfill:f?n:void 0,onClose:()=>j(!1)}),(0,i.jsx)(O,{backfill:m?n:void 0,onClose:()=>g(!1),onComplete:()=>r()})]})},H=(0,o.Ps)(q(),w,_)},94655:function(e,n,t){t.d(n,{FW:function(){return q},cv:function(){return W}});var r=t(73235),i=t(52322),s=t(3842),o=t(89130),l=t(39013),a=t(35292),c=t(14934),d=t(92917),u=t(43212),p=t(24471),h=t.n(p),x=t(2784),m=t(47933),g=t(7267),f=t(35505),j=t(84927),v=t(32959),y=t(8068),S=t(23399),b=t(16336),w=t(44900),k=t(88257),E=t(32996),C=t(34219),T=t(33847),I=t(40250),N=t(66463),P=t(59351),R=t(96850),A=t(18856),O=t(86269),_=t(83738),z=t(100),F=t(65822),D=t(22563),L=t(10539);function M(){let e=(0,r._)(["\n  query SingleBackfillCountsQuery($backfillId: String!) {\n    partitionBackfillOrError(backfillId: $backfillId) {\n      ... on PartitionBackfill {\n        id\n        partitionStatusCounts {\n          runStatus\n          count\n        }\n      }\n    }\n  }\n"]);return M=function(){return e},e}function $(){let e=(0,r._)(["\n  query SingleBackfillQuery($backfillId: String!) {\n    partitionBackfillOrError(backfillId: $backfillId) {\n      ... on PartitionBackfill {\n        id\n        partitionStatuses {\n          ...PartitionStatusesForBackfill\n        }\n      }\n    }\n  }\n\n  fragment PartitionStatusesForBackfill on PartitionStatuses {\n    results {\n      id\n      partitionName\n      runId\n      runStatus\n    }\n  }\n"]);return $=function(){return e},e}let q=e=>null===e.backfill.numPartitions||null===e.backfill.partitionNames||e.backfill.isAssetBackfill?(0,i.jsx)(B,{...e,counts:null,statuses:null,statusQueryResult:null}):(0,i.jsx)(U,{backfillId:e.backfill.id,numPartitions:e.backfill.numPartitions,children:n=>(0,i.jsx)(B,{...e,...n})}),U=e=>{let{backfillId:n,numPartitions:t}=e,r=(0,s.t)(W,{variables:{backfillId:n},notifyOnNetworkStatusChange:!0});(0,C.Hu)(r[1],"SingleBackfillQuery");let i=(0,s.t)(G,{variables:{backfillId:n},notifyOnNetworkStatusChange:!0});(0,C.Hu)(i[1],"SingleBackfillCountsQuery");let[o,l]=(t||0)>H?i:r;(0,_.v5)(o),(0,b.C4)(l,b.dT);let{data:a}=l,{counts:c,statuses:d}=x.useMemo(()=>{var e;if((null==a?void 0:a.partitionBackfillOrError.__typename)!=="PartitionBackfill")return{counts:null,statuses:null};if("partitionStatusCounts"in a.partitionBackfillOrError)return{counts:Object.fromEntries(a.partitionBackfillOrError.partitionStatusCounts.map(e=>[e.runStatus,e.count])),statuses:null};let n=(null===(e=a.partitionBackfillOrError.partitionStatuses)||void 0===e?void 0:e.results)||null;return{counts:h()(n,e=>e.runStatus),statuses:n}},[a]);return e.children({counts:c,statuses:d,statusQueryResult:l})},B=e=>{let{backfill:n,allPartitions:t,showBackfillTarget:r,onShowPartitionsRequested:s,refetch:o,counts:c,statuses:d,statusQueryResult:u}=e,p=n.partitionSet?(0,F.kQ)(n.partitionSet.repositoryOrigin.repositoryName,n.partitionSet.repositoryOrigin.repositoryLocationName):null;return(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{style:{width:120},children:(0,i.jsx)(a.fv,{children:(0,i.jsx)(m.rU,{to:n.isAssetBackfill?"/overview/backfills/".concat(n.id):(0,A.it)([{token:"tag",value:"dagster/backfill=".concat(n.id)}]),children:n.id})})}),(0,i.jsx)("td",{style:{width:220},children:n.timestamp?(0,i.jsx)(O.v,{timestamp:n.timestamp}):"-"}),r?(0,i.jsx)("td",{style:{width:"20%"},children:(0,i.jsx)(Z,{backfill:n,repoAddress:p})}):null,(0,i.jsx)("td",{style:{width:t?300:140},children:(0,i.jsx)(V,{backfill:n,allPartitions:t,onExpand:()=>s(n)})}),(0,i.jsx)("td",{style:{width:160},children:(0,i.jsx)(N.f,{tags:n.tags,repoAddress:p})}),(0,i.jsx)("td",{style:{width:140},children:(null==u?void 0:u.loading)?(0,i.jsx)("div",{style:{color:l.$()},children:"Loading"}):(0,i.jsx)(Q,{backfill:n,counts:c})}),(0,i.jsx)("td",{children:n.isValidSerialization?(null==u?void 0:u.loading)?(0,i.jsx)("div",{style:{color:l.$()},children:"Loading"}):c?(0,i.jsx)(K,{backfill:n,counts:c,statuses:d}):(0,i.jsx)("div",{style:{color:l.$()},children:"â€“"}):(0,i.jsx)("p",{children:"A partitions definition has changed since this backfill ran."})}),(0,i.jsx)("td",{children:(0,i.jsx)(j.WH,{backfill:n,canCancelRuns:(0,j.qG)(n,c),refetch:o})})]})},H=1e3,K=e=>{let{backfill:n,statuses:t,counts:r}=e,s=(0,g.k6)(),o=Object.entries(r).reduce((e,n)=>{let[t,r]=n;return e[t]=(e[t]||0)+r,e},{}),l=x.useMemo(()=>({runStatusForPartitionKey:e=>{var n;return(null==t?void 0:null===(n=t.filter(n=>n.partitionName===e)[0])||void 0===n?void 0:n.runStatus)||k.VOA.NOT_STARTED}}),[t]);return t&&n.partitionNames?(0,i.jsx)(E.b,{partitionNames:n.partitionNames,health:l,splitPartitions:!0,onClick:e=>{let n=t.find(n=>n.partitionName===e);(null==n?void 0:n.runId)&&s.push("/runs/".concat(n.runId))}}):(0,i.jsx)(R.Yo,{succeededCount:o[k.VOA.SUCCESS]||0,inProgressCount:o[k.VOA.STARTED]||0,failedCount:o[k.VOA.FAILURE]||0})},Z=e=>{let{backfill:n,repoAddress:t}=e,r=(0,z.Ux)(t),{assetSelection:s,partitionSet:o,partitionSetName:a}=n,u=(0,w.pv)(a||"");return(0,i.jsxs)(c.x,{flex:{direction:"column",gap:8},children:[u?null:o&&r?(0,i.jsx)(m.rU,{style:{fontWeight:500},to:(0,L.jT)({repoName:o.repositoryOrigin.repositoryName,repoLocation:o.repositoryOrigin.repositoryLocationName,pipelineName:o.pipelineName,isJob:(0,z.E8)(r,o.pipelineName),path:"/partitions?partitionSet=".concat(encodeURIComponent(o.name))}),children:o.name}):a?(0,i.jsx)("span",{style:{fontWeight:500},children:a}):null,(0,i.jsxs)(c.x,{flex:{direction:"column",gap:4},style:{fontSize:"12px"},children:[t?(0,i.jsxs)(c.x,{flex:{direction:"row",gap:8,alignItems:"center"},style:{fontSize:"12px"},children:[(0,i.jsx)(d.JO,{name:"repo",color:l.$()}),(0,i.jsx)(m.rU,{to:(0,L.$U)(t),children:(0,D.Uz)(t)})]}):void 0,(null==s?void 0:s.length)?(0,i.jsx)(I.h,{assetKeys:s,dialogTitle:"Assets in backfill"}):o&&r?(0,i.jsx)(T.h,{showIcon:!0,size:"small",pipelineName:o.pipelineName,pipelineHrefContext:{name:o.repositoryOrigin.repositoryName,location:o.repositoryOrigin.repositoryLocationName},isJob:(0,z.E8)(r,o.pipelineName)}):null]})]})},V=e=>{let{allPartitions:n,backfill:t,onExpand:r}=e,{partitionNames:s,numPartitions:o}=t;if(null===o)return(0,i.jsx)("span",{});let l="".concat(o.toLocaleString()," ").concat(1===o?"partition":"partitions");return(0,i.jsxs)(c.x,{flex:{direction:"column",gap:8},children:[(0,i.jsx)("div",{children:s?(0,i.jsx)(Y,{onClick:r,children:(0,i.jsx)(u.V,{intent:"primary",interactive:!0,children:l})}):(0,i.jsx)(u.V,{intent:"primary",children:l})}),n&&s&&(0,i.jsx)(J,{all:n,requested:s})]})},J=e=>{let{all:n,requested:t}=e,r=x.useMemo(()=>({runStatusForPartitionKey:e=>t&&t.includes(e)?k.VOA.QUEUED:k.VOA.NOT_STARTED}),[t]);return(0,i.jsx)(E.b,{small:!0,hideStatusTooltip:!0,partitionNames:n,health:r})},Q=e=>{let{backfill:n,counts:t}=e;if(n.isAssetBackfill)return(0,i.jsx)(v.w,{backfill:n});switch(n.status){case k.Jv3.REQUESTED:return(0,i.jsx)(u.V,{children:"In progress"});case k.Jv3.FAILED:return(0,i.jsx)(c.x,{margin:{bottom:12},children:(0,i.jsx)(Y,{onClick:()=>n.error&&(0,y._K)({title:"Error",body:(0,i.jsx)(S.T9,{error:n.error})}),children:(0,i.jsx)(u.V,{intent:"danger",children:"Failed"})})});case k.Jv3.COMPLETED:if(null===n.partitionNames)return(0,i.jsx)(u.V,{intent:"success",children:"Completed"});if(!t)return(0,i.jsx)("div",{style:{color:l.$()},children:"None"});if(t[k.VOA.SUCCESS]===n.partitionNames.length)return(0,i.jsx)(u.V,{intent:"success",children:"Completed"});if(Array.from(P.Ys).some(e=>t[e]))return(0,i.jsx)(u.V,{intent:"primary",children:"In progress"});return(0,i.jsx)(u.V,{intent:"warning",children:"Incomplete"});case k.Jv3.CANCELING:return(0,i.jsx)(u.V,{children:"Canceling"});case k.Jv3.CANCELED:return(0,i.jsx)(u.V,{children:"Canceled"})}return(0,i.jsx)("span",{})},Y=f.ZP.button.withConfig({componentId:"sc-ac2bd124-0"})(["border:none;background:none;cursor:pointer;padding:0;margin:0;:focus{outline:none;}"]),G=(0,o.Ps)(M()),W=(0,o.Ps)($())},32959:function(e,n,t){t.d(n,{w:function(){return d}});var r=t(52322),i=t(14934),s=t(43212),o=t(35505),l=t(8068),a=t(23399),c=t(88257);let d=e=>{let{backfill:n}=e,{status:t,error:o}=n;function d(e){return(0,r.jsx)(i.x,{margin:{bottom:12},children:(0,r.jsx)(u,{onClick:()=>o&&(0,l._K)({title:"Error",body:(0,r.jsx)(a.T9,{error:o})}),children:(0,r.jsx)(s.V,{intent:"danger",children:e})})})}switch(t){case c.Jv3.REQUESTED:return(0,r.jsx)(s.V,{children:"In progress"});case c.Jv3.CANCELING:return d("Canceling");case c.Jv3.CANCELED:return d("Canceled");case c.Jv3.FAILED:return d("Failed");case c.Jv3.COMPLETED:return(0,r.jsx)(s.V,{intent:"success",children:"Completed"});default:return(0,r.jsx)(s.V,{children:t})}},u=o.ZP.button.withConfig({componentId:"sc-b7ae553d-0"})(["border:none;background:none;cursor:pointer;padding:0;margin:0;:focus{outline:none;}"])},90731:function(e,n,t){t.d(n,{b:function(){return S},G:function(){return y}});var r=t(73235),i=t(52322),s=t(89130),o=t(1747),l=t(2784),a=t(84927),c=t(92506),d=t(74188),u=t(38491),p=t(90483),h=t(81732);let x=new Intl.Collator(navigator.language,{sensitivity:"base",numeric:!0}),m=e=>{let{backfill:n,onClose:t}=e;return(0,i.jsxs)(c.Vq,{isOpen:!!n,title:(0,i.jsxs)("span",{children:["Partitions requested for backfill:"," ",(0,i.jsx)("span",{style:{fontSize:"16px",fontFamily:d.b.monospace},children:null==n?void 0:n.id})]}),onClose:t,children:[(0,i.jsx)(g,{partitionNames:(null==n?void 0:n.partitionNames)||[]}),(0,i.jsx)(c.cN,{topBorder:!0,children:(0,i.jsx)(u.zx,{onClick:t,children:"Done"})})]})},g=e=>{let{partitionNames:n}=e,t=(0,l.useMemo)(()=>[...n||[]].sort((e,n)=>x.compare(e,n)),[n]);return(0,i.jsx)("div",{style:{height:"340px",overflow:"hidden"},children:(0,i.jsx)(h.Y,{items:t,renderItem:e=>(0,i.jsx)("div",{children:(0,i.jsx)(p.rd,{text:e})},e)})})};var f=t(94655),j=t(78491);function v(){let e=(0,r._)(["\n  fragment BackfillTableFragment on PartitionBackfill {\n    id\n    status\n    isAssetBackfill\n    isValidSerialization\n    partitionNames\n    numPartitions\n    timestamp\n    partitionSetName\n    partitionSet {\n      id\n      ...PartitionSetForBackfillTable\n    }\n    assetSelection {\n      path\n    }\n    tags {\n      key\n      value\n    }\n    error {\n      ...PythonErrorFragment\n    }\n    ...BackfillActionsBackfillFragment\n  }\n\n  fragment PartitionSetForBackfillTable on PartitionSet {\n    id\n    name\n    mode\n    pipelineName\n    repositoryOrigin {\n      id\n      repositoryName\n      repositoryLocationName\n    }\n  }\n\n  ","\n  ","\n"]);return v=function(){return e},e}let y=e=>{let{showBackfillTarget:n=!0,allPartitions:t,backfills:r,refetch:s}=e,[a,c]=(0,l.useState)();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(o.i,{children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{children:"Backfill ID"}),(0,i.jsx)("th",{children:"Created"}),n?(0,i.jsx)("th",{children:"Backfill target"}):null,(0,i.jsx)("th",{children:"Requested"}),(0,i.jsx)("th",{children:"Launched by"}),(0,i.jsx)("th",{children:"Backfill status"}),(0,i.jsx)("th",{children:"Run status"}),(0,i.jsx)("th",{style:{width:80}})]})}),(0,i.jsx)("tbody",{children:r.map(e=>(0,i.jsx)(f.FW,{showBackfillTarget:n,backfill:e,allPartitions:t,onShowPartitionsRequested:c,refetch:s},e.id))})]}),(0,i.jsx)(m,{backfill:a,onClose:()=>c(void 0)})]})},S=(0,s.Ps)(v(),j.B,a.V2)},59502:function(e,n,t){t.d(n,{p:function(){return k}});var r=t(52322),i=t(39013),s=t(60129),o=t(35292),l=t(35002),a=t(40191),c=t(28879),d=t.n(c),u=t(77491),p=t.n(u),h=t(30733),x=t.n(h),m=t(2784),g=t(35505),f=t(57758),j=t(68903),v=t(72045),y=t(88257);d().extend(p());let S={[y.izS.SUCCESS]:i.fA(),[y.izS.FAILURE]:i.FY(),[y.izS.STARTED]:i.v4(),[y.izS.SKIPPED]:i.A8()},b={[y.izS.SUCCESS]:i.Lv(),[y.izS.FAILURE]:i.MP(),[y.izS.STARTED]:i.Jq(),[y.izS.SKIPPED]:i.$l()},w=x()(e=>new Intl.DateTimeFormat(navigator.language,{hour:"2-digit",minute:"2-digit",second:"2-digit",hourCycle:"h23",timeZone:"Automatic"===e?(0,v.cw)():e,timeZoneName:"short"})),k=e=>{let{ticks:n,onHoverTick:t,onSelectTick:i,exactRange:a,timeRange:c=3e5,tickGrid:d=6e4,timeAfter:u=6e4}=e,[p,h]=(0,m.useState)(Date.now()),[x,g]=(0,m.useState)(!1);(0,m.useEffect)(()=>{if(!x&&!a){let e=setInterval(()=>{h(Date.now())},100);return()=>clearInterval(e)}return()=>{}},[a,x]);let v=(null==a?void 0:a[1])?1e3*a[1]:p+u,y=(null==a?void 0:a[0])?1e3*a[0]:p-c,S=v-y,{viewport:b,containerProps:k}=(0,s.S)(),O=(0,m.useMemo)(()=>n.filter(e=>!e.endTimestamp||1e3*e.endTimestamp>y).reverse(),[n,y]),_=(0,m.useMemo)(()=>O.map((e,n)=>{var t,r;let i=(t=1e3*e.timestamp,b.width*(t-y)/S),s=(r=(0,f.g6)(e,O.length-n-1)?e.timestamp:e.endTimestamp?1e3*e.endTimestamp:p,b.width*(r-y)/S);return{...e,width:Math.max(s-i,8),startX:i}}),[y,p,O,S,b.width]),z=Math.max((v-y)/25,d),F=z/5,D=Math.ceil(y/F)*F,L=(0,m.useMemo)(()=>{let e=[];for(let t=D;t<=v;t+=F){var n;e.push({time:t,x:(n=t,b.width*(n-y)/S),showLabel:t%z==0})}return e},[v,D,F,b.width,y,S,z]),{timezone:[M]}=(0,m.useContext)(j.JB);return(0,r.jsx)("div",{style:{marginRight:"8px"},children:(0,r.jsxs)("div",{...k,children:[(0,r.jsxs)(C,{children:[L.map(e=>(0,r.jsxs)(N,{style:{transform:"translateX(".concat(e.x,"px)")},children:[(0,r.jsx)(P,{}),e.showLabel?(0,r.jsx)(R,{children:(0,r.jsx)(o.YS,{children:w(M).format(new Date(e.time))})}):null]},e.time)),_.map(e=>{var n,s;let o=null!==(s="requestedAssetMaterializationCount"in e?e.requestedAssetMaterializationCount:null===(n=e.runIds)||void 0===n?void 0:n.length)&&void 0!==s?s:0;return(0,r.jsx)(I,{style:{transform:"translateX(".concat(e.startX,"px)"),width:"".concat(e.width,"px")},status:e.status,onMouseEnter:()=>{t(e),g(!0)},onMouseLeave:()=>{t(),g(!1)},onClick:()=>{i(e)},children:(0,r.jsx)(l.u,{content:(0,r.jsx)(E,{tick:e}),children:(0,r.jsx)("div",{style:{width:e.width+"px",height:"80px"},children:o>0?o:null})})},e.id)}),(0,r.jsx)(A,{style:{transform:"translateX(".concat(b.width*(p-y)/S,"px)")}})]}),(0,r.jsx)(T,{})]})})},E=(0,m.memo)(e=>{let{tick:n}=e,t=(0,m.useMemo)(()=>{var e,t;return n.status===y.izS.FAILURE?"Evaluation failed":n.status===y.izS.STARTED?"Evaluatingâ€¦":"requestedAssetMaterializationCount"in n?"".concat(n.requestedAssetMaterializationCount," materialization").concat((0,a.I)(n.requestedAssetMaterializationCount,"","s")," requested"):"".concat((null===(e=n.runs)||void 0===e?void 0:e.length)||0," run").concat((0,a.I)(null===(t=n.runs)||void 0===t?void 0:t.length,"","s")," requested")},[n]),s=d()(1e3*n.timestamp),l=d()(n.endTimestamp?1e3*n.endTimestamp:Date.now()),c=s.to(l,!0);return(0,r.jsxs)("div",{children:[(0,r.jsxs)(o.YS,{as:"div",children:[t," (",c,")"]}),n.status===y.izS.STARTED?null:(0,r.jsx)(o.YS,{color:i.$(),children:"Click for details"})]})}),C=g.ZP.div.withConfig({componentId:"sc-44a8a894-0"})(["position:relative;height:100px;padding:10px 2px;border-bottom:1px solid ",";"],i.wL()),T=g.ZP.div.withConfig({componentId:"sc-44a8a894-1"})(["height:24px;"]),I=g.ZP.div.withConfig({componentId:"sc-44a8a894-2"})(["cursor:pointer;position:absolute;top:10px;height:80px;will-change:transform,width;border-radius:2px;div{place-content:center;display:grid;}color:",";",""],i.v8(),e=>{let{status:n}=e;return"\n    background: ".concat(S[n],";\n    &:hover {\n      background: ").concat(b[n],";\n    }\n  ")}),N=g.ZP.div.withConfig({componentId:"sc-44a8a894-3"})(["position:absolute;top:0;height:124px;will-change:transform;"]),P=g.ZP.div.withConfig({componentId:"sc-44a8a894-4"})(["position:absolute;top:0;height:108px;width:1px;background:",";"],i.wL()),R=g.ZP.div.withConfig({componentId:"sc-44a8a894-5"})(["height:16px;position:absolute;bottom:0;width:100px;margin-left:-24px;"]),A=g.ZP.div.withConfig({componentId:"sc-44a8a894-6"})(["position:absolute;top:0;height:126px;width:2px;background:",";&:after{content:'Now';position:absolute;left:0;background:",";color:",";bottom:0;font-size:12px;padding:3px 4px;}"],i.Bj(),i.Bj(),i.KH())},9790:function(e,n,t){t.d(n,{C:function(){return Z},H:function(){return K}});var r=t(73235),i=t(52322);t(84678);var s=t(40794),o=t(89130),l=t(14934),a=t(79106),c=t(37483),d=t(37504),u=t(80122),p=t(35292),h=t(74188),x=t(92917),m=t(89891),g=t(40191),f=t(39013),j=t(1747),v=t(65511),y=t(42418),S=t(2784),b=t(35505),w=t(77837),k=t(581),E=t(59502),C=t(44030),T=t(57758),I=t(50309),N=t(78491),P=t(23399),R=t(16336),A=t(85227),O=t(88257),_=t(4378),z=t(34219),F=t(2278),D=t(15332),L=t(86269),M=t(57397),$=t(58905),q=t(20718);function U(){let e=(0,r._)(["\n  query TickHistoryQuery(\n    $instigationSelector: InstigationSelector!\n    $dayRange: Int\n    $limit: Int\n    $cursor: String\n    $statuses: [InstigationTickStatus!]\n    $beforeTimestamp: Float\n    $afterTimestamp: Float\n  ) {\n    instigationStateOrError(instigationSelector: $instigationSelector) {\n      ... on InstigationState {\n        id\n        instigationType\n        ticks(\n          dayRange: $dayRange\n          limit: $limit\n          cursor: $cursor\n          statuses: $statuses\n          beforeTimestamp: $beforeTimestamp\n          afterTimestamp: $afterTimestamp\n        ) {\n          id\n          ...HistoryTick\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n  ","\n  ","\n"]);return U=function(){return e},e}v.kL.register(y.ZP);let B={[O.izS.SUCCESS]:!0,[O.izS.FAILURE]:!0,[O.izS.STARTED]:!0,[O.izS.SKIPPED]:!0},H={[O.izS.SUCCESS]:"Requested",[O.izS.FAILURE]:"Failed",[O.izS.STARTED]:"In progress",[O.izS.SKIPPED]:"Skipped"},K=e=>{var n;let{name:t,repoAddress:r,tabs:s,setTimerange:o,setParentStatuses:p}=e,[h,x]=(0,_.q)({encode:e=>{let n={};return Object.keys(e).map(t=>{n[t.toLowerCase()]=String(e[t])}),n},decode:e=>{let n={...B};return Object.keys(B).forEach(t=>{t.toLowerCase() in e&&(n[t]="false"!==e[t.toLowerCase()])}),n}}),m={...(0,q.$)(r),name:t},g=S.useMemo(()=>Object.keys(h).filter(e=>h[e]).map(e=>e),[h]),{queryResult:f,paginationProps:j}=(0,D.l)({nextCursorForResult:e=>{var n;if("InstigationState"===e.instigationStateOrError.__typename)return null===(n=e.instigationStateOrError.ticks[24])||void 0===n?void 0:n.id},getResultArray:e=>e&&"InstigationState"===e.instigationStateOrError.__typename?e.instigationStateOrError.ticks:[],variables:{instigationSelector:m,statuses:g},query:J,pageSize:25});(0,z.Hu)(f,"TickHistoryQuery"),(0,R.C4)(f,R.dT);let v=null==f?void 0:null===(n=f.data)||void 0===n?void 0:n.instigationStateOrError,y=S.useMemo(()=>(null==v?void 0:v.__typename)==="InstigationState"?v.ticks:[],[v]);S.useEffect(()=>{if(j.hasPrevCursor){if(y&&y.length){var e,n;let t=null===(e=y[y.length-1])||void 0===e?void 0:e.timestamp,r=null===(n=y[0])||void 0===n?void 0:n.endTimestamp;t&&r&&(null==o||o([t,r]))}}else null==o||o(void 0)},[j.hasPrevCursor,y,o]),S.useEffect(()=>{j.hasPrevCursor?null==p||p(Array.from(g)):null==p||p(void 0)},[j.hasPrevCursor,p,g]),S.useEffect(()=>{!j.hasPrevCursor||y.length||f.loading||j.reset()},[y,f.loading,j.hasPrevCursor]);let[b,w]=S.useState(),{data:k}=f;if(!k)return(0,i.jsx)(l.x,{padding:{vertical:48},children:(0,i.jsx)(a.$,{purpose:"page"})});if("PythonError"===k.instigationStateOrError.__typename)return(0,i.jsx)(P.T9,{error:k.instigationStateOrError});if("InstigationStateNotFoundError"===k.instigationStateOrError.__typename)return(0,i.jsx)(l.x,{padding:{vertical:32},flex:{justifyContent:"center"},children:(0,i.jsx)(c.t,{icon:"no-results",title:"No ticks to display"})});let{instigationType:E}=k.instigationStateOrError;if(!y.length&&g.length===Object.keys(B).length)return null;let C=e=>{let{status:n}=e;return(0,i.jsx)(d.X,{label:H[n],checked:h[n],onChange:e=>{x({...h,[n]:e.target.checked})}})};return(0,i.jsxs)(i.Fragment,{children:[b?(0,i.jsx)(M.l,{tick:b,instigationSelector:m,onClose:()=>w(void 0)}):null,(0,i.jsx)(l.x,{padding:{vertical:8,horizontal:24},children:(0,i.jsxs)(l.x,{flex:{direction:"row",justifyContent:"space-between",alignItems:"center"},children:[s,(0,i.jsxs)(l.x,{flex:{direction:"row",gap:16},children:[(0,i.jsx)(C,{status:O.izS.STARTED}),(0,i.jsx)(C,{status:O.izS.SUCCESS}),(0,i.jsx)(C,{status:O.izS.FAILURE}),(0,i.jsx)(C,{status:O.izS.SKIPPED})]})]})}),y.length?(0,i.jsxs)(Y,{children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{style:{width:120},children:"Timestamp"}),(0,i.jsx)("th",{style:{width:90},children:"Status"}),(0,i.jsx)("th",{style:{width:90},children:"Duration"}),E===O._5b.SENSOR?(0,i.jsx)("th",{style:{width:120},children:"Cursor"}):null,(0,i.jsx)("th",{style:{width:180},children:"Result"})]})}),(0,i.jsx)("tbody",{children:y.map((e,n)=>(0,i.jsx)(V,{tick:e,instigationSelector:m,index:n},e.id))})]}):(0,i.jsx)(l.x,{padding:{vertical:32},flex:{justifyContent:"center"},children:(0,i.jsx)(c.t,{icon:"no-results",title:"No ticks to display"})}),y.length>0?(0,i.jsx)("div",{style:{marginTop:"16px"},children:(0,i.jsx)(u.pI,{...j})}):null]})},Z=e=>{let{name:n,repoAddress:t,onHighlightRunIds:r,beforeTimestamp:o,afterTimestamp:c,statuses:d}=e,[u,h]=(0,_.q)({encode:e=>({tickId:e}),decode:e=>e.tickId?Number(e.tickId):void 0}),[x,m]=S.useState(!1),g={...(0,q.$)(t),name:n},f=(0,s.a)(J,{variables:{instigationSelector:g,beforeTimestamp:o,afterTimestamp:c,statuses:d,limit:o?void 0:15},notifyOnNetworkStatusChange:!0});(0,z.Hu)(f,"TickHistoryQuery"),(0,R.C4)(f,1e3,!(x||o&&c));let{data:j,error:v}=f;if(!j||v)return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(l.x,{padding:{top:16,horizontal:24},border:"bottom",children:(0,i.jsx)(p.pm,{children:"Recent ticks"})}),(0,i.jsx)(l.x,{padding:{vertical:64},children:(0,i.jsx)(a.$,{purpose:"section"})})]});if("PythonError"===j.instigationStateOrError.__typename)return(0,i.jsx)(P.T9,{error:j.instigationStateOrError});if("InstigationStateNotFoundError"===j.instigationStateOrError.__typename)return null;let{ticks:y=[]}=j.instigationStateOrError,b=e=>{h(e?Number(e.tickId):void 0)};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(C.X,{isOpen:!!u,tickId:u,instigationSelector:g,onClose:()=>b(void 0)}),(0,i.jsx)(l.x,{padding:{vertical:16,horizontal:24},children:(0,i.jsx)(p.pm,{children:"Recent ticks"})}),(0,i.jsx)(l.x,{border:"top",children:(0,i.jsx)(E.p,{ticks:y,onHoverTick:e=>{e||m(!1),(null==e?void 0:e.runIds)&&(r&&r(e.runIds),m(!0))},onSelectTick:b,exactRange:o&&c?[c,o]:void 0})})]})};function V(e){let{tick:n,instigationSelector:t,index:r}=e,s=(0,A.m)(),[o,a]=S.useState(!1),[c,d]=S.useMemo(()=>{let e=n.dynamicPartitionsRequestResults;return[(0,T.sw)(e,O.Dq2.ADD_PARTITIONS),(0,T.sw)(e,O.Dq2.DELETE_PARTITIONS)]},[null==n?void 0:n.dynamicPartitionsRequestResults]),u=(0,T.g6)(n,r);return(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)(L.v,{timestamp:n.timestamp,timeFormat:{showTimezone:!1,showSeconds:!0}})}),(0,i.jsx)("td",{children:(0,i.jsx)($.a,{tick:n,isStuckStarted:u})}),(0,i.jsx)("td",{children:u?"- ":(0,i.jsx)(F.Q,{startUnix:n.timestamp,endUnix:n.endTimestamp||Date.now()/1e3})}),n.instigationType===O._5b.SENSOR?(0,i.jsx)("td",{style:{width:120},children:n.cursor?(0,i.jsxs)(l.x,{flex:{direction:"row",alignItems:"center",gap:8},children:[(0,i.jsx)("div",{style:{fontFamily:h.b.monospace,fontSize:"14px"},children:(0,T.$G)(n.cursor||"")}),(0,i.jsx)(Q,{onClick:async()=>{s(n.cursor||""),await (0,I.B7)({message:(0,i.jsx)("div",{children:"Copied value"}),intent:"success"})},children:(0,i.jsx)(x.JO,{name:"assignment"})})]}):(0,i.jsx)(i.Fragment,{children:"â€”"})}):null,(0,i.jsx)("td",{children:(0,i.jsxs)(l.x,{flex:{direction:"column",gap:6},children:[(0,i.jsxs)(l.x,{flex:{alignItems:"center",gap:8},children:[(0,i.jsx)(m.Z,{onClick:()=>{a(!0)},children:1===n.runIds.length?"1 run requested":"".concat(n.runIds.length," runs requested")}),1===n.runs.length?n.runs.map(e=>(0,i.jsx)(S.Fragment,{children:(0,i.jsx)(k.RX,{run:e})},e.id)):null]}),c||d?(0,i.jsxs)(p.YS,{children:["(",c?(0,i.jsxs)("span",{children:[c," partition",(0,g.I)(c,"","s")," created",d?",":""]}):null,d?(0,i.jsxs)("span",{children:[d," partition",(0,g.I)(d,"","s")," deleted,"]}):null,")"]}):null,(0,i.jsx)(C.X,{isOpen:o,tickId:Number(n.tickId),instigationSelector:t,onClose:()=>{a(!1)}})]})})]})}let J=(0,o.Ps)(U(),k.S9,N.B,w.dY,k.vw),Q=b.ZP.button.withConfig({componentId:"sc-a8fb3695-0"})(["background:transparent;border:0;cursor:pointer;padding:8px;margin:-6px;outline:none;","{background-color:",";transition:background-color 100ms;}:hover ","{background-color:",";}:focus ","{background-color:",";}"],x.a1,f.md(),x.a1,f.$l(),x.a1,f.Es()),Y=(0,b.ZP)(j.i).withConfig({componentId:"sc-a8fb3695-1"})(["th,td{vertical-align:middle !important;}"])},77044:function(e,n,t){t.d(n,{i:function(){return i}});var r=t(88257);let i=e=>e.hasStartPermission&&e.status===r.ynu.STOPPED||e.hasStopPermission&&e.status===r.ynu.RUNNING},69557:function(e,n,t){t.d(n,{H:function(){return i}});var r=t(88257);let i=e=>{let n=!1,t=!1;for(let i of e){let{status:e}=i;if(e===r.ynu.RUNNING?t=!0:e===r.ynu.STOPPED&&(n=!0),t&&n)break}return{anyOff:n,anyOn:t}}},54724:function(e,n,t){t.d(n,{s:function(){return o}});var r=t(2784);let i={step:"initial",completion:{completed:0,errors:{}}},s=(e,n)=>{switch(n.type){case"reset":return i;case"start":return{...e,step:"updating"};case"update-success":{let{completion:n}=e;return{step:"updating",completion:{...n,completed:n.completed+1}}}case"update-error":{let{completion:t}=e;return{step:"updating",completion:{...t,completed:t.completed+1,errors:{...t.errors,[n.name]:n.error}}}}case"complete":return{...e,step:"completed"}}},o=()=>(0,r.useReducer)(s,i)},57758:function(e,n,t){t.d(n,{$G:function(){return i},g6:function(){return s},sw:function(){return o}});var r=t(88257);let i=e=>e.length>100?"".concat(e.slice(0,95),"â€¦"):e;function s(e,n){return!e.endTimestamp&&(0!==n&&e.status===r.izS.STARTED||1e3*e.timestamp<Date.now()-259200)}function o(e,n){return e.reduce((e,t)=>{if(t.type===n){var r;return e+((null===(r=t.partitionKeys)||void 0===r?void 0:r.length)||0)}return e},0)}},22921:function(e,n,t){t.d(n,{y:function(){return r}});let r="overview-collapsed-state"},71291:function(e,n,t){t.d(n,{ac:function(){return q},ux:function(){return B},Rc:function(){return M}});var r=t(73235),i=t(52322),s=t(40794),o=t(89130),l=t(60129),a=t(92506),c=t(14934),d=t(38491),u=t(53664),p=t(92917),h=t(39013),x=t(55010),m=t(60603),g=t(2784),f=t(35505),j=t(79106),v=t(37483),y=t(78491),S=t(34219),b=t(89010),w=t(43984);function k(){let e=(0,r._)(["\n  query PartitionRunListQuery($filter: RunsFilter!) {\n    pipelineRunsOrError(filter: $filter, limit: 500) {\n      ... on PipelineRuns {\n        results {\n          ...RunTableRunFragment\n          id\n        }\n      }\n      ... on InvalidPipelineRunsFilterError {\n        message\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"]);return k=function(){return e},e}let E=e=>{let n=(0,s.a)(C,{variables:{filter:{pipelineName:e.pipelineName,tags:[{key:w.H.Partition,value:e.partitionName}]}}});(0,S.Hu)(n,"PartitionRunListQuery");let{data:t,loading:r}=n;return r||!t?(0,i.jsx)(j.$,{purpose:"section"}):"Runs"!==t.pipelineRunsOrError.__typename?(0,i.jsx)(v.t,{icon:"error",title:"Query Error",description:t.pipelineRunsOrError.message}):(0,i.jsx)("div",{children:(0,i.jsx)(b.AL,{runs:t.pipelineRunsOrError.results})})},C=(0,o.Ps)(k(),b.ZZ,y.B);var T=t(95590),I=t(15365),N=t(44900),P=t(65470),R=t(65152),A=t(27052),O=t(77432),_=t(88257),z=t(33182),F=t(43),D=t(20718);function L(){let e=(0,r._)(["\n  query PartitionStepStatusPipelineQuery($pipelineSelector: PipelineSelector) {\n    pipelineSnapshotOrError(activePipelineSelector: $pipelineSelector) {\n      ... on PipelineSnapshot {\n        id\n        name\n        solidHandles {\n          ...PartitionMatrixSolidHandleFragment\n        }\n      }\n    }\n  }\n\n  ","\n"]);return L=function(){return e},e}let M=e=>Math.ceil(e/T.Bj)-3,$=e=>{let[n,t]=[Date.now()/1e3,1];for(let r of e)for(let e of r.steps)0!==e.unix&&([n,t]=[Math.min(n,e.unix),Math.max(t,e.unix)]);return[n,t]},q=e=>{let{assetHealth:n,rangeDimension:t,rangeDimensionIdx:r,assetQueryItems:s,...o}=e,l={};for(let e of n){var a;if((null===(a=e.dimensions[r])||void 0===a?void 0:a.name)!==t.name)continue;let n=e.rangesForSingleDimension(r);l[(0,N.Je)(e.assetKey)]=n}let c=(0,O.tc)({nodes:s,mode:A.hS.FLAT}).boxes.filter(e=>!!l[e.node.name]),d={stepRows:c.map(e=>({x:e.x,name:e.node.name,totalFailurePercent:0,finalFailurePercent:0})),partitions:[],partitionColumns:t.partitionKeys.map((e,n)=>({idx:n,name:e,runsLoaded:!0,runs:[],steps:c.map(e=>({name:e.node.name,unix:0,color:U((0,R.h1)(l[e.node.name],n))}))}))};return(0,i.jsx)(H,{...o,partitionNames:t.partitionKeys,data:d,showLatestRun:!1})},U=e=>e.includes(P.yo.MATERIALIZED)&&e.includes(P.yo.MISSING)?"SUCCESS-MISSING":e.includes(P.yo.MATERIALIZED)?"SUCCESS":e.includes(P.yo.FAILED)&&e.includes(P.yo.MISSING)?"FAILURE-MISSING":e.includes(P.yo.FAILED)?"FAILURE":"MISSING",B=e=>{var n;let{repoAddress:t,pipelineName:r,partitions:o,partitionNames:l,...a}=e,c={...(0,D.$)(t),pipelineName:r},d=(0,s.a)(J,{variables:{pipelineSelector:c}});(0,S.Hu)(d,"PartitionStepStatusPipelineQuery");let u=(null===(n=d.data)||void 0===n?void 0:n.pipelineSnapshotOrError.__typename)==="PipelineSnapshot"&&d.data.pipelineSnapshotOrError.solidHandles,p=(0,I.J2)({partitionNames:l,partitions:o,stepQuery:"",solidHandles:u});return p?(0,i.jsx)(H,{...a,showLatestRun:!0,pipelineName:r,partitionNames:l,data:p}):(0,i.jsx)("span",{})},H=e=>{let{viewport:n,containerProps:t}=(0,l.S)(),[r,s]=(0,g.useState)(null),[o,h]=(0,g.useState)(null),{setPageSize:x,data:m}=e;(0,g.useEffect)(()=>{n.width&&x(M(n.width))},[n.width,x]);let{stepRows:f,partitionColumns:j}=m,v=e=>{let n={};return e.forEach(e=>n[e.name]=e),f.map(e=>n[e.name])},y=M(n.width),S=Math.max(0,j.length-e.offset-y),b=Math.max(y,j.length-e.offset),w=j.slice(S,b),[k,C]=$(j),I=(0,T.G3)(j.map(e=>e.name));return(0,i.jsxs)(Z,{children:[(0,i.jsxs)(a.Vq,{isOpen:!!o,onClose:()=>h(null),style:{width:"90vw"},title:o?"".concat(o.partitionName," runs"):"",children:[(0,i.jsx)(c.x,{padding:{bottom:12},children:o&&(0,i.jsx)(E,{pipelineName:e.pipelineName,partitionName:o.partitionName})}),(0,i.jsx)(a.cN,{children:(0,i.jsx)(d.zx,{intent:"primary",autoFocus:!0,onClick:()=>h(null),children:"OK"})})]}),(0,i.jsxs)("div",{style:{position:"relative",display:"flex"},children:[(0,i.jsx)(T.NF,{floating:e.offset+y<e.partitionNames.length,children:(0,i.jsxs)(T.C4,{disabled:!0,style:{flex:1,flexShrink:1,overflow:"hidden"},children:[(0,i.jsx)(T.eh,{style:{height:I}}),e.showLatestRun&&(0,i.jsx)(T.p$,{style:{paddingLeft:24},children:"Last Run"}),(0,i.jsx)(V,{}),f.map(e=>(0,i.jsx)(T.p$,{style:{paddingLeft:8+e.x,paddingRight:8},"data-tooltip":e.name,hovered:e.name===(null==r?void 0:r.stepName),children:(0,i.jsx)(u.g,{text:e.name})},e.name))]})}),e.offset+y<e.partitionNames.length?(0,i.jsx)(K,{$direction:"left",onClick:()=>e.setOffset(Math.max(0,Math.min(e.offset+y-1,e.partitionNames.length-y))),children:(0,i.jsx)(p.JO,{name:"chevron_left"})}):null,(0,i.jsx)("div",{style:{flex:1,overflow:"hidden",position:"relative"},...t,children:(0,i.jsx)("div",{style:{width:j.length*T.Bj,position:"absolute",height:"100%",right:0,zIndex:1},children:w.map((n,t)=>(0,i.jsxs)(T.C4,{style:{zIndex:w.length-t,width:T.Bj,position:"absolute",right:(y-t)*T.Bj+20},children:[(0,i.jsx)(T.kD,{$height:I,label:n.name}),e.showLatestRun&&(0,i.jsx)(T.p$,{style:{textAlign:"center"},children:(0,i.jsx)(Y,{runs:n.runs,runsLoaded:n.runsLoaded,minUnix:k,maxUnix:C,hovered:r,setHovered:s,setFocused:h,partitionName:n.name},"".concat(n.name,":__full_status"))}),(0,i.jsx)(V,{}),v(n.steps).map(e=>(0,i.jsx)(Y,{step:e,runs:n.runs,runsLoaded:n.runsLoaded,minUnix:k,maxUnix:C,hovered:r,setHovered:s,setFocused:h,partitionName:n.name},e.name))]},n.name))})}),e.offset>0?(0,i.jsx)(K,{$direction:"right",onClick:()=>e.setOffset(Math.max(0,e.offset-y)),children:(0,i.jsx)(p.JO,{name:"chevron_right"})}):null]})]})},K=f.ZP.div.withConfig({componentId:"sc-2f82344-0"})(["width:30px;position:absolute;border:1px solid ",";border-radius:3px;display:flex;justify-content:center;align-items:center;top:calc(50% - 15px);bottom:calc(50% - 15px);"," background:",";z-index:10;justify-content:center;align-items:center;cursor:pointer;display:flex;&:hover{background:",";}"],h.wL(),e=>{let{$direction:n}=e;return"left"===n?"left: 315px;":"right: 0;"},h.v8(),h.Z$()),Z=f.ZP.div.withConfig({componentId:"sc-2f82344-1"})(["display:block;"]),V=f.ZP.div.withConfig({componentId:"sc-2f82344-2"})(["height:1px;width:100%;margin-top:5px;border-top:1px solid ",";"],h.wL()),J=(0,o.Ps)(L(),I.Tg),Q=JSON.stringify({top:20,left:10}),Y=e=>{let n,{step:t,runs:r,runsLoaded:s,hovered:o,setHovered:l,setFocused:a,partitionName:c}=e,[d,u]=(0,g.useState)(!1);if(s){if(t)n=t.color.toLowerCase();else if(0===r.length)n="empty";else{var p;let e=null===(p=[...r].reverse().find(e=>e.status!==_.VOA.CANCELED))||void 0===p?void 0:p.status;n=e?e.toLowerCase():"empty"}}else n="loading";let h=(0,i.jsx)("div",{className:"square ".concat(n),onMouseEnter:()=>l({stepName:null==t?void 0:t.name,partitionName:c}),onMouseLeave:()=>l(null),"data-tooltip":s&&!t?1===r.length?"1 run":"".concat(r.length," runs"):void 0,"data-tooltip-style":Q});return d||r.length&&(null==o?void 0:o.stepName)===(null==t?void 0:t.name)&&(null==o?void 0:o.partitionName)===c?(0,i.jsx)(x.J,{interactionKind:"click",placement:"bottom-start",onOpening:()=>u(!0),onClosed:()=>u(!1),content:(0,i.jsxs)(m.v2,{children:[(0,i.jsx)(F.U,{icon:"open_in_new",text:"Show logs from last run",to:(0,z.tA)(r[r.length-1],{stepKey:t?t.name:null})}),(0,i.jsx)(m.sN,{icon:"settings_backup_restore",text:"View runs (".concat(r.length,")"),onClick:()=>a({stepName:null==t?void 0:t.name,partitionName:c})})]}),children:h}):h}},95590:function(e,n,t){t.d(n,{AQ:function(){return g},Bj:function(){return o},C4:function(){return d},G3:function(){return h},NF:function(){return f},eh:function(){return p},kD:function(){return x},p$:function(){return u}});var r=t(52322),i=t(39013),s=t(35505);let o=32,l={SUCCESS:i.fA(),SUCCESS_SKIPPED:i.Lv(),FAILURE:i.FY(),FAILURE_SKIPPED:i.MP(),SKIPPED:i.qr(),IN_PROGRESS:i.L$()},a=e=>"linear-gradient(to left, ".concat(e," 0%, ").concat(e," 100%)"),c=e=>e.map(a).join(","),d=s.ZP.div.withConfig({componentId:"sc-4314cfb8-0"})(["display:flex;flex-direction:column;flex-shrink:0;line-height:0;"," "," "," "," .cell{height:","px;display:inline-block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-size:12px;padding:2px;box-sizing:border-box;line-height:initial;}.square{width:20px;height:20px;margin:6px;display:inline-block;&:hover:not(.empty):before{box-shadow:"," 0 0 0 3px;}&:before{content:' ';background:",";border-radius:10px;display:inline-block;width:20px;height:20px;}&.loading{&:before{background:radial-gradient( "," 0%,"," 45%,"," 60% );}}&.success{&:before{background:",";}}&.failure{&:before{background:",";}}&.success-missing{&:before{background:",";}}&.failure-missing{&:before{background:",";}}&.failure-blank{&:before{background:",";}}&.skipped{&:before{background:",";}}&.started,&.starting,&.canceling{&:before{background:",";}}}"],e=>{let{disabled:n,focused:t,multiselectFocused:r,hovered:s}=e;return!n&&!t&&!r&&"&".concat(s?"":":hover"," {\n      background: ").concat(i.Z$(),";\n      cursor: default;\n      ").concat(m," {\n        background: ").concat(i.Z$(),";\n        .tilted {\n          background: ").concat(i.gJ(),";\n        }\n      }\n      .square {\n        filter: brightness(95%);\n      }\n    }")},e=>{let{disabled:n}=e;return n&&"\n      ".concat(m," {\n        color: ").concat(i.$(),"\n      }\n    ")},e=>{let{focused:n}=e;return n&&"background: ".concat(i.L$(),";\n    ").concat(u," {\n      color: ").concat(i.KH(),";\n    }\n    ").concat(m," {\n      background: ").concat(i.Bj(),";\n      color: ").concat(i.KH(),";\n      .tilted {\n        background: ").concat(i.L$(),";\n      }\n    }\n  }")},e=>{let{multiselectFocused:n}=e;return n&&"background: ".concat(i.U9(),";\n    ").concat(u," {\n      color: ").concat(i.KH(),";\n    }\n    ").concat(m," {\n      background: ").concat(i.Bj(),";\n      color: ").concat(i.KH(),";\n      .tilted {\n        background: ").concat(i.U9(),";\n      }\n    }\n  }")},o,i.L$(),i.md(),i.wc(),i.wc(),i.Yj(),l.SUCCESS,l.FAILURE,l.SUCCESS_SKIPPED,l.FAILURE_SKIPPED,l.FAILURE_SKIPPED,l.SKIPPED,l.IN_PROGRESS),u=s.ZP.div.withConfig({componentId:"sc-4314cfb8-1"})(["height:","px;line-height:","px;font-size:13px;overflow:hidden;text-overflow:ellipsis;position:relative;background:",";"],o,o,e=>{let{hovered:n}=e;return c([n?i.gJ():"transparent"])}),p=s.ZP.div.withConfig({componentId:"sc-4314cfb8-2"})(["position:relative;height:70px;padding:4px;padding-bottom:0;min-width:15px;align-items:flex-end;display:flex;"]);function h(e){let n=Math.max(...e.map(e=>e.length));return(n>10?4.9*n:55)+15}let x=e=>{let{label:n,$height:t}=e;return(0,r.jsx)(m,{style:{height:t-15},children:(0,r.jsx)("div",{className:"tilted",children:n})})},m=s.ZP.div.withConfig({componentId:"sc-4314cfb8-3"})(["position:relative;height:unset;padding:4px;padding-bottom:0;min-width:15px;margin-bottom:","px;align-items:end;display:flex;line-height:normal;& > div.tilted{font-size:12px;white-space:nowrap;position:absolute;bottom:-20px;left:0;padding:2px;padding-right:4px;padding-left:0;transform:rotate(-","deg);transform-origin:top left;}"],15,41),g=330,f=s.ZP.div.withConfig({componentId:"sc-4314cfb8-4"})(["display:flex;border-right:1px solid ",";padding-bottom:16px;width:","px;z-index:1;",";"],i.im(),g,e=>{let{floating:n}=e;return n?"box-shadow: 1px 0 4px rgba(0, 0, 0, 0.15)":""})},15365:function(e,n,t){t.d(n,{J2:function(){return v},Tg:function(){return S},iv:function(){return y}});var r=t(73235),i=t(89130),s=t(37552),o=t(2784),l=t(98832),a=t(13549),c=t(77432),d=t(88257),u=t(67126),p=t(17298);function h(){let e=(0,r._)(["\n  fragment PartitionMatrixStepRunFragment on Run {\n    id\n    status\n    startTime\n    endTime\n    stepStats {\n      stepKey\n      startTime\n      endTime\n      status\n    }\n    tags {\n      key\n      value\n    }\n  }\n"]);return h=function(){return e},e}function x(){let e=(0,r._)(["\n  fragment PartitionMatrixSolidHandleFragment on SolidHandle {\n    handleID\n    solid {\n      name\n      definition {\n        name\n      }\n      inputs {\n        dependsOn {\n          solid {\n            name\n          }\n        }\n      }\n      outputs {\n        dependedBy {\n          solid {\n            name\n          }\n        }\n      }\n    }\n    ...GraphExplorerSolidHandleFragment\n  }\n\n  ","\n"]);return x=function(){return e},e}let m=new Set([d.SGm.IN_PROGRESS,d.SGm.SKIPPED]);function g(e){return e.startTime||0}function f(e,n){return g(e)-g(n)}function j(e,n){let t=RegExp(e+"\\[.*\\]");return n===e||n==="".concat(e,".compute")||n.match(t)}let v=e=>{let n=(0,o.useRef)();if(!e.solidHandles)return null;if(n.current&&(0,s.shallowCompareKeys)(e,n.current.inputs))return n.current.result;let t=(0,u.i)(e.solidHandles).map(e=>e.solid),r=(0,l.V)(t,e.stepQuery),i=function(e,n,t,r){let i={};t.forEach(e=>{e.runs.sort(f),i[e.name]=e});let s=n.map((n,t)=>{let r=i[n]||{name:n,runsLoaded:!1,runs:[]},s=e.boxes.map(e=>{var n,t;let i,{node:s}=e,o={name:s.name,color:"MISSING",unix:0};if(!r.runs.length)return o;let l=r.runs[r.runs.length-1],a=null===(n=l.stepStats.find(e=>j(s.name,e.stepKey)))||void 0===n?void 0:n.status;if(r.runs.length>1&&(!a||m.has(a))){let e=r.runs.length-2;for(;e>=0&&!i;){let n=null===(t=r.runs[e].stepStats.find(e=>j(s.name,e.stepKey)))||void 0===t?void 0:t.status;if(n&&!m.has(n)){i=n;break}e--}}if(!a&&!i)return o;let c=!a||m.has(a)?"".concat(i,"-MISSING"):a;return{name:s.name,unix:g(l),color:c}});return{...r,steps:s,idx:t}}),o=s.filter(e=>e.runs.length>0).length,l=e.boxes.map((e,n)=>{let t=s.filter(e=>e.steps[n].color.includes("FAILURE")),r=s.filter(e=>e.steps[n].color.endsWith("FAILURE"));return{x:e.x,name:e.node.name,totalFailurePercent:o?Math.round(t.length/o*100):0,finalFailurePercent:o?Math.round(r.length/o*100):0}});if(null==r?void 0:r.showFailuresAndGapsOnly){for(let e=l.length-1;e>=0;e--)0===l[e].finalFailurePercent&&(l.splice(e,1),s.forEach(n=>n.steps.splice(e,1)));for(let e=s.length-1;e>=0;e--)(0===s[e].runs.length||s[e].steps.every(e=>e.color.includes("SUCCESS")))&&s.splice(e,1)}return{stepRows:l,partitions:t,partitionColumns:s}}((0,c.tc)({nodes:r.all,mode:a.hS.FLAT}),e.partitionNames,e.partitions,e.options);return n.current={result:i,inputs:e},i},y=(0,i.Ps)(h()),S=(0,i.Ps)(x(),p.Q)},9875:function(e,n,t){t.d(n,{T:function(){return h}});var r=t(73235),i=t(56675),s=t(89130),o=t(2784),l=t(15365),a=t(78491),c=t(88257),d=t(43984);function u(){let e=(0,r._)(["\n  query PartitionStepLoaderQuery($filter: RunsFilter!, $cursor: String, $limit: Int) {\n    pipelineRunsOrError(filter: $filter, cursor: $cursor, limit: $limit) {\n      ... on Runs {\n        results {\n          id\n          ...PartitionMatrixStepRunFragment\n        }\n      }\n      ... on InvalidPipelineRunsFilterError {\n        message\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"]);return u=function(){return e},e}let p={runs:[],partitionNames:[],loading:!1,loadingCursorIdx:0};function h(e){let{partitionSetName:n,partitionTagName:t,partitionNames:r,pageSize:s,runsFilter:l,jobName:a,repositorySelector:u,offset:h,skipQuery:m}=e,g=(0,i.x)(),f=(0,o.useRef)(0),[j,v]=(0,o.useState)(p),y=JSON.stringify([...l.map(e=>{let[n,t]=e.value.split("=");return{key:n,value:t}}),{key:d.H.RepositoryLabelTag,value:"".concat(u.repositoryName,"@").concat(u.repositoryLocationName)}]);return(0,o.useEffect)(()=>{let e=f.current+1;f.current=e;let i=JSON.parse(y);v(e=>({...e,runs:[],loading:!0}));let o=async()=>{if(f.current!==e)return;let o=r.length-(h||0),l=Math.max(0,o-s);for(v(e=>({...e,partitionNames:r,loadingCursorIdx:o}));o>l;){let s=Math.max(o-5,0),l=r.slice(s,o),c=await Promise.all(l.map(e=>{let r={key:d.H.PartitionSet,value:n},s={key:t,value:e};return x(g,{limit:1e3,filter:a?{pipelineName:a,tags:[...i,s]}:{tags:[...i,s,r]}})}));if(f.current!==e)return;o=s,v(e=>({...e,runs:[...e.runs].concat(...c),loading:o>0,loadingCursorIdx:o}))}let u=setInterval(async()=>{if(f.current!==e)return clearInterval(u);v(e=>({...e,loading:!0}));let s=await x(g,{limit:10,filter:{tags:[...i,{key:d.H.PartitionSet,value:n}]}}),o=await x(g,{filter:{statuses:[c.VOA.STARTED],tags:[...i,{key:d.H.PartitionSet,value:n}]}});if(f.current!==e)return clearInterval(u);let l=[...o,...s].filter(e=>e.tags.find(e=>e.key===t&&r.includes(e.value)));v(e=>{let n=e.runs.filter(e=>!l.some(n=>n.id===e.id)).concat(l);return{...e,loading:!1,runs:n}})},1e4)};return m||o(),()=>{f.current+=1}},[s,g,n,t,y,a,h,r,m]),function(e,n){let t=[],r={};return e.partitionNames.forEach((n,i)=>{r[n]={name:n,runsLoaded:i>=e.loadingCursorIdx,runs:[]},t.push(r[n])}),e.runs.forEach(e=>{var t,i;null===(i=r[(null===(t=e.tags.find(e=>e.key===n))||void 0===t?void 0:t.value)||""])||void 0===i||i.runs.push(e)}),t}(j,t)}async function x(e,n){let t=await e.query({fetchPolicy:"network-only",query:m,variables:n});return"Runs"===t.data.pipelineRunsOrError.__typename&&t.data.pipelineRunsOrError.results||[]}let m=(0,s.Ps)(u(),l.iv,a.B)},96850:function(e,n,t){t.d(n,{AJ:function(){return et},CONSTANTS:function(){return F},Dv:function(){return es},G7:function(){return Z},Yo:function(){return $},oO:function(){return en},p0:function(){return ei},qE:function(){return D}});var r=t(52322),i=t(60129),s=t(14934),o=t(35002),l=t(43212),a=t(39013),c=t(74188),d=t(92917),u=t(53664),p=t(55010),h=t(79106),x=t(35292),m=t(88510),g=t(2784),f=t(47933),j=t(35505),v=t(54516),y=t(59351),S=t(2278),b=t(77539),w=t(79464),k=t(71406),E=t(22921),C=t(86269),T=t(88610),I=t(17008),N=t(98956),P=t(82145),R=t(50646),A=t(94853),O=t(83738),_=t(22563),z=t(4199);let F={ROW_HEIGHT:32,DATE_TIME_HEIGHT:64,TIME_HEADER_HEIGHT:32,ONE_HOUR_MSEC:36e5,EMPTY_STATE_HEIGHT:110,LEFT_SIDE_SPACE_ALLOTTED:320},D=e=>{let{loading:n=!1,jobs:t,rangeMs:o}=e,l=g.useRef(null),{viewport:{width:a},containerProps:{ref:c}}=(0,i.S)(),d=Date.now(),[u,p]=o,h=g.useMemo(()=>t.reduce((e,n)=>{let{repoAddress:t}=n,r=(0,_.Qj)(t);return e[r]=e[r]||[],e[r].push(n),e},{}),[t]),x=Object.keys(h),{expandedKeys:f,onToggle:j,onToggleAll:v}=(0,R.N)(E.y,x),y=g.useMemo(()=>{let e=[];return Object.entries(h).sort((e,n)=>k.Bl.compare(e[0],n[0])).forEach(n=>{let[t,r]=n,i=(0,z.g)(t);i&&(e.push({type:"header",repoAddress:i,jobCount:r.length}),f.includes(t)&&r.sort((e,n)=>k.Bl.compare(e.jobName,n.jobName)).forEach(n=>{e.push({type:"job",repoAddress:i,job:n})}))}),e},[h,f]),S=(0,m.MG)({count:y.length,getScrollElement:()=>l.current,estimateSize:e=>32,overscan:40}),b=S.getTotalSize(),w=S.getVirtualItems();if(!a)return(0,r.jsx)("div",{style:{height:174},ref:c});let C=Object.keys(h).sort((e,n)=>e.localeCompare(n)),T=C.filter(e=>f.includes(e)).reduce((e,n)=>e+h[n].length,0),P=C.length*A.l+32*T,O=(0,N.w)(C.map(e=>{var n;return(null===(n=(0,z.g)(e))||void 0===n?void 0:n.name)||""})),F=C.length>0;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{ref:c}),(0,r.jsx)(s.x,{padding:{left:24},flex:{direction:"column",justifyContent:"center"},style:{fontSize:"16px",flex:"0 0 ".concat(64,"px")},border:"top-and-bottom",children:"Jobs"}),(0,r.jsx)("div",{style:{position:"relative"},children:(0,r.jsx)(Z,{interval:36e5,rangeMs:o,height:F?P:0})}),C.length?(0,r.jsx)("div",{style:{overflow:"hidden",position:"relative"},children:(0,r.jsx)(I.W2,{ref:l,children:(0,r.jsx)(I.Nh,{$totalHeight:b,children:w.map(e=>{let{index:n,key:t,size:i,start:s}=e,l=y[n];if("header"===l.type){let e=(0,_.Qj)(l.repoAddress),n=l.repoAddress.name;return(0,r.jsx)(L,{expanded:f.includes(e),height:i,top:s,repoAddress:l.repoAddress,isDuplicateRepoName:!!(n&&O.has(n)),jobs:h[e],onToggle:j,onToggleAll:v},e)}return(0,r.jsx)(ee,{job:l.job,height:i,top:s,rangeMs:o,width:a},t)})})})}):(0,r.jsx)(en,{loading:n,includesTicks:d<=p})]})},L=e=>{let{expanded:n,onToggle:t,onToggleAll:i,repoAddress:s,isDuplicateRepoName:o,jobs:l,height:a,top:c}=e;return(0,r.jsx)(O.vG,{expanded:n,height:a,start:c,repoAddress:s,showLocation:o,onToggle:t,onToggleAll:i,rightElement:(0,r.jsx)(M,{jobs:l})})},M=g.memo(e=>{let{jobs:n}=e,t=g.useMemo(()=>{let e=0,t=0,r=0;return n.forEach(n=>{let{runs:i}=n;i.forEach(n=>{let{status:i}=n;"SCHEDULED"!==i&&(y.Ys.has(i)?e++:y.hd.has(i)?t++:y._m.has(i)&&r++)})}),{inProgressCount:e,failedCount:t,succeededCount:r}},[n]);return(0,r.jsx)($,{...t})}),$=e=>{let{inProgressCount:n,succeededCount:t,failedCount:i}=e,a=1===n?"1 run in progress":"".concat(n," runs in progress"),c=1===t?"1 run succeeded":"".concat(t," runs succeeded"),d=1===i?"1 run failed":"".concat(i," runs failed");return(0,r.jsxs)(s.x,{flex:{direction:"row",gap:4,alignItems:"center"},children:[n>0?(0,r.jsx)(o.u,{content:(0,r.jsx)(q,{children:a}),placement:"top",children:(0,r.jsx)(l.V,{intent:"primary",children:n})}):null,t>0?(0,r.jsx)(o.u,{content:(0,r.jsx)(q,{children:c}),placement:"top",children:(0,r.jsx)(l.V,{intent:"success",children:t})}):null,i>0?(0,r.jsx)(o.u,{content:(0,r.jsx)(q,{children:d}),placement:"top",children:(0,r.jsx)(l.V,{intent:"danger",children:i})}):null]})},q=j.ZP.span.withConfig({componentId:"sc-de0a50d3-0"})(["white-space:nowrap;"]),U={month:"numeric",day:"numeric",year:"numeric"},B={month:"short",day:"numeric",year:"numeric",timeZoneName:"short"},H={hour:"numeric",minute:"numeric"},K={hour:"numeric"},Z=e=>{let{interval:n,rangeMs:t,annotations:i,height:o,now:l}=e,[c,d]=t,u=(0,P.O)(),p=g.useMemo(()=>{let e=d-c,n=u(new Date(c),B,"en-US"),t=[],r=new Date(n);for(;r.valueOf()<d;){let e=r.getTime(),n=new Date(e).setDate(r.getDate()+1);r=new Date(n),t.push({dayStart:e,dayEnd:n})}return t.map(n=>{let{dayStart:t,dayEnd:r}=n,i=new Date(t),s=t-c,o=r-t,l=Math.max(0,s/e*100);return{label:u(i,U),key:i.toString(),left:l,width:Math.min(100,(s+o)/e*100)-l}})},[d,u,c]),h=g.useMemo(()=>{let e=d-c,t=c%n,r=c-t;return[...Array(Math.ceil(e/n)+1)].map((t,i)=>{let s=r+i*n,o=new Date(s);return{label:n<36e5?u(o,H).replace(" ",""):u(o,K).replace(" ",""),key:o.toString(),left:(s-c)/e*100}}).filter(e=>e.left>0)},[d,c,n,u]),x=l||Date.now(),m=e=>"".concat(((e-c)/(d-c)*100).toPrecision(3),"%");return(0,r.jsxs)(V,{style:{height:"".concat(o,"px"),top:"-".concat(64,"px")},children:[(0,r.jsx)(J,{children:p.map(e=>(0,r.jsx)(Q,{style:{left:"".concat(e.left.toPrecision(3),"%"),width:"".concat(e.width.toPrecision(3),"%")},children:e.width>10?(0,r.jsx)(s.x,{flex:{justifyContent:"center"},children:e.label}):null},e.key))}),(0,r.jsx)(J,{children:h.map(e=>(0,r.jsx)(Y,{style:{left:"".concat(e.left.toPrecision(3),"%")},children:e.label},e.key))}),(0,r.jsxs)(G,{children:[(0,r.jsx)(W,{style:{left:0,backgroundColor:a.wL()}}),h.map(e=>(0,r.jsx)(W,{style:{left:"".concat(e.left.toPrecision(3),"%")}},e.key)),x>=c&&x<=d?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(X,{style:{left:m(x)},children:"Now"}),(0,r.jsx)(W,{style:{left:m(x),backgroundColor:a.Bj(),zIndex:1}})]}):null,(i||[]).filter(e=>e.ms>=c&&e.ms<=d).map(e=>(0,r.jsxs)(g.Fragment,{children:[(0,r.jsx)(X,{style:{left:m(e.ms)},children:e.label}),(0,r.jsx)(W,{style:{left:m(e.ms),backgroundColor:a.Bj(),zIndex:1}})]},e.label))]})]})},V=j.ZP.div.withConfig({componentId:"sc-de0a50d3-1"})(["position:absolute;top:0;left:","px;right:0;font-family:",";color:",";"],320,c.b.monospace,a.Aw()),J=j.ZP.div.withConfig({componentId:"sc-de0a50d3-2"})(["display:flex;align-items:center;box-shadow:inset 1px 0 0 ",",inset 0 1px 0 ",",inset -1px 0 0 ",";height:","px;position:relative;user-select:none;font-size:12px;width:100%;overflow:hidden;:first-child{box-shadow:inset 1px 0 0 ",",inset -1px 0 0 ",";}"],a.wL(),a.wL(),a.wL(),32,a.wL(),a.wL()),Q=j.ZP.div.withConfig({componentId:"sc-de0a50d3-3"})(["position:absolute;padding:8px 0;white-space:nowrap;:not(:first-child){box-shadow:inset 1px 0 0 ",";}"],a.wL()),Y=j.ZP.div.withConfig({componentId:"sc-de0a50d3-4"})(["position:absolute;padding:8px;box-shadow:inset 1px 0 0 ",";white-space:nowrap;"],a.wL()),G=j.ZP.div.withConfig({componentId:"sc-de0a50d3-5"})(["height:100%;position:relative;width:100%;box-shadow:inset 1px 0 0 ",",inset -1px 0 0 ",";"],a.wL(),a.wL()),W=j.ZP.div.withConfig({componentId:"sc-de0a50d3-6"})(["background-color:",";height:100%;position:absolute;top:0;width:1px;"],a.wL()),X=j.ZP.div.withConfig({componentId:"sc-de0a50d3-7"})(["background-color:",";border-radius:1px;color:",";cursor:default;font-size:10px;line-height:12px;transform:translate(-50%,0);padding:1px 4px;position:absolute;top:-14px;user-select:none;"],a.Bj(),a.KH()),ee=e=>{let{job:n,top:t,height:i,rangeMs:o,width:l}=e,[c,h]=o,x=l-320,{runs:m}=n,j=g.useMemo(()=>(0,b.i)({runs:m,start:c,end:h,width:x,minChunkWidth:4,minMultipleWidth:12}),[m,c,h,x]);return n.runs.length?(0,r.jsxs)(et,{$height:i,$start:t,children:[(0,r.jsxs)(er,{children:[(0,r.jsx)(d.JO,{name:"asset"===n.jobType?"asset":"job"}),(0,r.jsx)("div",{style:{width:268},children:"asset"===n.jobType?(0,r.jsx)("span",{style:{color:a.Ep()},children:(0,r.jsx)(u.g,{text:n.jobName})}):(0,r.jsx)(f.rU,{to:n.path,children:(0,r.jsx)(u.g,{text:n.jobName})})})]}),(0,r.jsx)(ei,{children:j.map(e=>{let{left:t,width:i,runs:o}=e,l=o.length;return(0,r.jsx)(es,{$background:(0,w.v)(e.runs),$multiple:l>1,style:{left:"".concat(t,"px"),width:"".concat(i,"px")},children:(0,r.jsx)(p.J,{content:(0,r.jsx)(el,{job:n,batch:e}),position:"top",interactionKind:"hover",className:"chunk-popover-target",children:(0,r.jsx)(s.x,{flex:{direction:"row",justifyContent:"center",alignItems:"center"},style:{height:"100%"},children:l>1?(0,r.jsx)(eo,{children:e.runs.length}):null})})},e.runs[0].id)})})]}):null},en=e=>{let{loading:n,includesTicks:t}=e;return(0,r.jsx)(s.x,{background:a.v8(),padding:{vertical:24},flex:{direction:"row",justifyContent:"center"},border:"top-and-bottom",children:n?(0,r.jsxs)(s.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,r.jsx)(h.$,{purpose:"body-text"}),t?"Loading runs and scheduled ticks":"Loading runs"]}):(0,r.jsxs)(s.x,{flex:{direction:"column",gap:12,alignItems:"center"},children:[(0,r.jsx)("div",{children:t?"No runs or scheduled ticks in this time period.":"No runs in this time period."}),(0,r.jsxs)(s.x,{flex:{direction:"row",gap:12,alignItems:"center"},children:[(0,r.jsx)(T.A,{icon:(0,r.jsx)(d.JO,{name:"add_circle"}),to:"/overview/jobs",children:"Launch a run"}),(0,r.jsx)("span",{children:"or"}),(0,r.jsx)(T.A,{icon:(0,r.jsx)(d.JO,{name:"materialization"}),to:"/asset-groups",children:"Materialize an asset"})]})]})})},et=j.ZP.div.attrs(e=>{let{$height:n,$start:t}=e;return{style:{height:"".concat(n,"px"),transform:"translateY(".concat(t,"px)")}}}).withConfig({componentId:"sc-de0a50d3-8"})(["align-items:center;box-shadow:inset 0 -1px 0 ",";display:flex;flex-direction:row;width:100%;padding:1px 0;left:0;position:absolute;right:0;top:0;overflow:hidden;transition:background-color 100ms linear;:hover{background-color:",";}"],a.wL(),a.Z$()),er=j.ZP.div.withConfig({componentId:"sc-de0a50d3-9"})(["align-items:center;display:flex;font-size:13px;justify-content:flex-start;gap:8px;line-height:16px;overflow:hidden;padding:0 12px 0 24px;text-overflow:ellipsis;white-space:nowrap;width:","px;"],320),ei=j.ZP.div.withConfig({componentId:"sc-de0a50d3-10"})(["flex:1;position:relative;height:","px;"],32),es=j.ZP.div.withConfig({componentId:"sc-de0a50d3-11"})(["align-items:center;background:",";border-radius:1px;height:","px;position:absolute;top:4px;",";transition:background 200ms linear,opacity 200ms linear,width 200ms ease-in-out;:hover{opacity:0.7;}.chunk-popover-target{display:block;height:100%;width:100%;}"],e=>{let{$background:n}=e;return n},24,e=>{let{$multiple:n}=e;return n?"min-width: ".concat(12,"px"):null}),eo=j.ZP.div.withConfig({componentId:"sc-de0a50d3-12"})(["color:",";cursor:default;font-family:",";font-size:12px;font-weight:600;user-select:none;"],a.KH(),c.b.monospace),el=e=>{let{job:n,batch:t}=e,i=t.runs.slice(0,50),o=t.runs.length-i.length;return(0,r.jsxs)(s.x,{style:{width:"260px"},children:[(0,r.jsx)(s.x,{padding:12,border:"bottom",children:(0,r.jsx)(ea,{children:n.jobName})}),(0,r.jsx)("div",{style:{maxHeight:"240px",overflowY:"auto"},children:i.map((e,n)=>(0,r.jsxs)(s.x,{border:n>0?"top":null,flex:{direction:"row",justifyContent:"space-between",alignItems:"center"},padding:{vertical:8,horizontal:12},children:[(0,r.jsxs)(s.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,r.jsx)(v.O_,{status:e.status,size:8}),"SCHEDULED"===e.status?"Scheduled":(0,r.jsx)(f.rU,{to:"/runs/".concat(e.id),children:(0,r.jsx)(x.fv,{children:e.id.slice(0,8)})})]}),(0,r.jsx)(x.fv,{children:"SCHEDULED"===e.status?(0,r.jsx)(C.v,{timestamp:e.startTime/1e3}):(0,r.jsx)(S.Q,{startUnix:e.startTime/1e3,endUnix:e.endTime/1e3})})]},e.id))}),o>0?(0,r.jsx)(s.x,{padding:12,border:"top",children:(0,r.jsxs)(f.rU,{to:"".concat(n.path,"/runs"),children:["+ ",o," more"]})}):null]})},ea=j.ZP.strong.withConfig({componentId:"sc-de0a50d3-13"})(["display:block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;width:100%;"])},77539:function(e,n,t){t.d(n,{a:function(){return r},i:function(){return i}});let r=(e,n)=>!(e.end<n.start||n.end<e.start),i=e=>{let{runs:n,start:t,end:r,width:i,minChunkWidth:o,minMultipleWidth:l}=e,a=r-t,c=(Date.now()-t)/(r-t)*i+1,d=n.map(e=>{let n=e.startTime,r=e.endTime||Date.now();return{runs:[e],startTime:n,endTime:r,left:Math.max(0,Math.floor((n-t)/a*i)),width:Math.max(o,Math.min(Math.ceil((r-n)/a*i),Math.ceil((r-t)/a*i)))}}).sort((e,n)=>e.left-n.left),u=[];for(;d.length;){let e=d.shift(),n=d[0];if(e){if(n&&s(e,n,l,c)){d.shift(),e.runs=[...e.runs,...n.runs],e.startTime=Math.min(e.startTime,n.startTime),e.endTime=Math.max(e.endTime,n.endTime);let t=Math.max(e.left+l,e.left+e.width,n.left+n.width),r=Math.min(e.left,n.left);e.width=t-r,e.left=r,d.unshift(e)}else u.push(e)}}return u},s=(e,n,t,i)=>{let s=e.left,o=e.left+Math.max(e.width,t),l=n.left,a=n.left+Math.max(n.width,t),c=Math.min(e.left,n.left),d=Math.max(e.left+Math.max(e.width,t),n.left+Math.max(n.width,t));return r({start:s,end:o},{start:l,end:a})&&(c>i||d<i)}},79464:function(e,n,t){t.d(n,{v:function(){return o}});var r=t(39013),i=t(59351);let s=e=>{switch(e){case"queued":case"scheduled":return r.A8();case"inProgress":return r.L$();case"failed":return r.FY();case"succeeded":return r.fA()}},o=e=>{let n={scheduled:0,queued:0,inProgress:0,failed:0,succeeded:0};e.forEach(e=>{let{status:t}=e;"SCHEDULED"===t?n.scheduled++:i.sy.has(t)?n.queued++:i.Ys.has(t)?n.inProgress++:i.hd.has(t)?n.failed++:i._m.has(t)&&n.succeeded++});let t=Object.keys(n).filter(e=>n[e]>0);if(1===t.length){let[e]=t;return s(e)}let r=e.length,o=[n.failed>0?{status:"failed",pct:100*n.failed/r}:null,n.succeeded>0?{status:"succeeded",pct:100*n.succeeded/r}:null,n.inProgress>0?{status:"inProgress",pct:100*n.inProgress/r}:null,n.queued>0?{status:"queued",pct:100*n.queued/r}:null,n.scheduled>0?{status:"scheduled",pct:100*n.scheduled/r}:null].filter(Boolean),l="",a=0,c=0;for(let e=0;e<o.length;e++){let n=o[e];if(!n)continue;let{status:t,pct:r}=n;c=a,a+=r;let i=s(t);0===e?l+="".concat(i," ").concat(r.toFixed(1),"%, "):e===o.length-1?l+="".concat(i," ").concat(c.toFixed(1),"%"):l+="".concat(i," ").concat(c.toFixed(1),"% ").concat(a.toFixed(1),"%, ")}return"linear-gradient(to right, ".concat(l,")")}},70468:function(e,n,t){t.d(n,{_:function(){return v}});var r=t(52322),i=t(55010),s=t(60603),o=t(38491),l=t(92917),a=t(2784),c=t(33379),d=t(25212),u=t(34147),p=t(39013),h=t(92506),x=t(99417),m=t(54724),g=t(94062);let f=e=>{let{openWithIntent:n,onClose:t,onComplete:i,schedules:s}=e,f=s.length,[j,v]=(0,m.s)();(0,a.useEffect)(()=>{"not-open"===n&&v({type:"reset"})},[n,v]);let[y]=(0,c.D)(x.Wz),[S]=(0,c.D)(x.d0),b=async e=>{let{repoAddress:n,scheduleName:t}=e,r={scheduleSelector:{repositoryLocationName:n.location,repositoryName:n.name,scheduleName:t}},{data:i}=await y({variables:r});switch(null==i?void 0:i.startSchedule.__typename){case"ScheduleStateResult":v({type:"update-success"});return;case"UnauthorizedError":case"PythonError":v({type:"update-error",name:t,error:i.startSchedule.message})}},w=async e=>{let{scheduleName:n,scheduleState:t}=e,r={scheduleOriginId:t.id,scheduleSelectorId:t.selectorId},{data:i}=await S({variables:r});switch(null==i?void 0:i.stopRunningSchedule.__typename){case"ScheduleStateResult":v({type:"update-success"});return;case"UnauthorizedError":case"PythonError":v({type:"update-error",name:n,error:i.stopRunningSchedule.message})}},k=async()=>{if("not-open"!==n){for(let e of(v({type:"start"}),s))"start"===n?await b(e):await w(e);v({type:"complete"}),i()}},E="updating"!==j.step;return(0,r.jsxs)(h.Vq,{isOpen:"not-open"!==n,title:"start"===n?"Start schedules":"Stop schedules",canEscapeKeyClose:E,canOutsideClickClose:E,onClose:t,children:[(0,r.jsx)(h.a7,{children:(0,r.jsxs)(u.Z,{direction:"column",spacing:24,children:[(()=>{if("not-open"===n)return null;switch(j.step){case"initial":if("stop"===n)return(0,r.jsx)("div",{children:"".concat(f," ").concat(1===f?"schedule":"schedules"," will be stopped. Do you want to continue?")});return(0,r.jsx)("div",{children:"".concat(f," ").concat(1===f?"schedule":"schedules"," will be started. Do you want to continue?")});case"updating":case"completed":let e=f>0?j.completion.completed/f:1;return(0,r.jsxs)(u.Z,{direction:"column",spacing:8,children:[(0,r.jsx)(d.ko,{intent:"primary",value:Math.max(.1,e),animate:e<1}),"updating"===j.step?(0,r.jsx)(g.c,{message:"Schedules are being updated, please do not navigate away yet."}):null]});default:return null}})(),(()=>{if("not-open"===n||"initial"===j.step)return null;if("updating"===j.step)return(0,r.jsx)("div",{children:"Please do not close the window or navigate away while schedules are being updated."});let e=j.completion.errors,t=Object.keys(e).length,i=j.completion.completed-t;return(0,r.jsxs)(u.Z,{direction:"column",spacing:8,children:[i?(0,r.jsxs)(u.Z,{direction:"row",spacing:8,alignItems:"flex-start",children:[(0,r.jsx)(l.JO,{name:"check_circle",color:p.fA()}),(0,r.jsx)("div",{children:"start"===n?"Successfully started ".concat(1===i?"1 schedule":"".concat(i," schedules"),"."):"Successfully stopped ".concat(1===i?"1 schedule":"".concat(i," schedules"),".")})]}):null,t?(0,r.jsxs)(u.Z,{direction:"column",spacing:8,children:[(0,r.jsxs)(u.Z,{direction:"row",spacing:8,alignItems:"flex-start",children:[(0,r.jsx)(l.JO,{name:"warning",color:p.qr()}),(0,r.jsx)("div",{children:"start"===n?"Could not start ".concat(1===t?"1 schedule":"".concat(t," schedules"),"."):"Could not stop ".concat(1===t?"1 schedule":"".concat(t," schedules"),".")})]}),(0,r.jsx)("ul",{children:Object.keys(e).map(n=>(0,r.jsx)("li",{children:(0,r.jsxs)(u.Z,{direction:"row",spacing:8,children:[(0,r.jsxs)("strong",{children:[n,":"]}),e[n]?(0,r.jsx)("div",{children:e[n]}):null]})},n))})]}):null]})})()]})}),(0,r.jsx)(h.cN,{children:(()=>{if("not-open"===n)return null;switch(j.step){case"initial":return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.zx,{intent:"none",onClick:t,children:"Cancel"}),(0,r.jsx)(o.zx,{intent:"primary",onClick:k,children:"start"===n?"Start ".concat(1===f?"1 schedule":"".concat(f," schedules")):"Stop ".concat(1===f?"1 schedule":"".concat(f," schedules"))})]});case"updating":return(0,r.jsx)(o.zx,{intent:"primary",disabled:!0,children:"start"===n?"Starting ".concat(1===f?"1 schedule":"".concat(f," schedules")):"Stopping ".concat(1===f?"1 schedule":"".concat(f," schedules"))});case"completed":return(0,r.jsx)(o.zx,{intent:"primary",onClick:t,children:"Done"})}})()})]})};var j=t(69557);let v=e=>{let{schedules:n,onDone:t}=e,c=n.length,[d,u]=(0,a.useState)("not-open"),{anyOff:p,anyOn:h}=(0,a.useMemo)(()=>(0,j.H)(n.map(e=>{let{scheduleState:n}=e;return n})),[n]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.J,{content:(0,r.jsxs)(s.v2,{children:[(0,r.jsx)(s.sN,{text:"Start ".concat(1===c?"1 schedule":"".concat(c," schedules")),disabled:!p,"aria-disabled":!p,icon:"toggle_on",onClick:()=>{u("start")}}),(0,r.jsx)(s.sN,{text:"Stop ".concat(1===c?"1 schedule":"".concat(c," schedules")),disabled:!h,"aria-disabled":!h,icon:"toggle_off",onClick:()=>{u("stop")}})]}),placement:"bottom-end",children:(0,r.jsx)(o.zx,{disabled:!c,intent:"primary",rightIcon:(0,r.jsx)(l.JO,{name:"expand_more"}),children:"Actions"})}),(0,r.jsx)(f,{openWithIntent:d,schedules:n,onClose:()=>u("not-open"),onComplete:()=>{t()}})]})}},74050:function(e,n,t){t.d(n,{K:function(){return o}});var r=t(52322),i=t(14934),s=t(16629);t(2784);let o=e=>{let n,{daemonHealth:t,...o}=e;if(t){let e=t.allDaemonStatuses.filter(e=>"SCHEDULER"===e.daemonType);if(e.length>0){let t=e[0];n=t.required&&t.healthy}}return!1===n?(0,r.jsx)(i.x,{...o,children:(0,r.jsx)(s.b,{intent:"warning",title:"The scheduler daemon is not running.",description:(0,r.jsxs)("div",{children:["See the"," ",(0,r.jsx)("a",{href:"https://docs.dagster.io/deployment/dagster-daemon",children:"dagster-daemon documentation"})," ","for more information on how to deploy the dagster-daemon process."]})})}):null}},87209:function(e,n,t){t.d(n,{g:function(){return i}});var r=t(22563);let i=(e,n)=>"".concat((0,r.Uz)(e),"-").concat(n)},64265:function(e,n,t){t.d(n,{b:function(){return v}});var r=t(52322),i=t(55010),s=t(60603),o=t(38491),l=t(92917),a=t(2784),c=t(33379),d=t(25212),u=t(34147),p=t(39013),h=t(92506),x=t(89398),m=t(54724),g=t(94062);let f=e=>{let{openWithIntent:n,onClose:t,onComplete:i,sensors:s}=e,f=s.length,[j,v]=(0,m.s)();(0,a.useEffect)(()=>{"not-open"===n&&v({type:"reset"})},[n,v]);let[y]=(0,c.D)(x.VE),[S]=(0,c.D)(x.Xu),b=async e=>{let{repoAddress:n,sensorName:t}=e,r={sensorSelector:{repositoryLocationName:n.location,repositoryName:n.name,sensorName:t}},{data:i}=await y({variables:r});switch(null==i?void 0:i.startSensor.__typename){case"Sensor":v({type:"update-success"});return;case"SensorNotFoundError":case"UnauthorizedError":case"PythonError":v({type:"update-error",name:t,error:i.startSensor.message})}},w=async e=>{let{sensorName:n,sensorState:t}=e,r={jobOriginId:t.id,jobSelectorId:t.selectorId},{data:i}=await S({variables:r});switch(null==i?void 0:i.stopSensor.__typename){case"StopSensorMutationResult":v({type:"update-success"});return;case"UnauthorizedError":case"PythonError":v({type:"update-error",name:n,error:i.stopSensor.message})}},k=async()=>{if("not-open"!==n){for(let e of(v({type:"start"}),s))"start"===n?await b(e):await w(e);v({type:"complete"}),i()}},E="updating"!==j.step;return(0,r.jsxs)(h.Vq,{isOpen:"not-open"!==n,title:"start"===n?"Start sensors":"Stop sensors",canEscapeKeyClose:E,canOutsideClickClose:E,onClose:t,children:[(0,r.jsx)(h.a7,{children:(0,r.jsxs)(u.Z,{direction:"column",spacing:24,children:[(()=>{if("not-open"===n)return null;switch(j.step){case"initial":if("stop"===n)return(0,r.jsx)("div",{children:"".concat(f," ").concat(1===f?"sensor":"sensors"," will be stopped. Do you want to continue?")});return(0,r.jsx)("div",{children:"".concat(f," ").concat(1===f?"sensor":"sensors"," will be started. Do you want to continue?")});case"updating":case"completed":let e=f>0?j.completion.completed/f:1;return(0,r.jsxs)(u.Z,{direction:"column",spacing:8,children:[(0,r.jsx)(d.ko,{intent:"primary",value:Math.max(.1,e),animate:e<1}),"updating"===j.step?(0,r.jsx)(g.c,{message:"Sensors are being updated, please do not navigate away yet."}):null]});default:return null}})(),(()=>{if("not-open"===n||"initial"===j.step)return null;if("updating"===j.step)return(0,r.jsx)("div",{children:"Please do not close the window or navigate away while sensors are being updated."});let e=j.completion.errors,t=Object.keys(e).length,i=j.completion.completed-t;return(0,r.jsxs)(u.Z,{direction:"column",spacing:8,children:[i?(0,r.jsxs)(u.Z,{direction:"row",spacing:8,alignItems:"flex-start",children:[(0,r.jsx)(l.JO,{name:"check_circle",color:p.fA()}),(0,r.jsx)("div",{children:"start"===n?"Successfully started ".concat(1===i?"1 sensor":"".concat(i," sensors"),"."):"Successfully stopped ".concat(1===i?"1 sensor":"".concat(i," sensors"),".")})]}):null,t?(0,r.jsxs)(u.Z,{direction:"column",spacing:8,children:[(0,r.jsxs)(u.Z,{direction:"row",spacing:8,alignItems:"flex-start",children:[(0,r.jsx)(l.JO,{name:"warning",color:p.qr()}),(0,r.jsx)("div",{children:"start"===n?"Could not start ".concat(1===t?"1 sensor":"".concat(t," sensors"),":"):"Could not stop ".concat(1===t?"1 sensor":"".concat(t," sensors"),":")})]}),(0,r.jsx)("ul",{style:{margin:"8px 0"},children:Object.keys(e).map(n=>(0,r.jsx)("li",{children:(0,r.jsxs)(u.Z,{direction:"row",spacing:8,children:[(0,r.jsxs)("strong",{children:[n,":"]}),e[n]?(0,r.jsx)("div",{children:e[n]}):null]})},n))})]}):null]})})()]})}),(0,r.jsx)(h.cN,{children:(()=>{if("not-open"===n)return null;switch(j.step){case"initial":return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.zx,{intent:"none",onClick:t,children:"Cancel"}),(0,r.jsx)(o.zx,{intent:"primary",onClick:k,children:"start"===n?"Start ".concat(1===f?"1 sensor":"".concat(f," sensors")):"Stop ".concat(1===f?"1 sensor":"".concat(f," sensors"))})]});case"updating":return(0,r.jsx)(o.zx,{intent:"primary",disabled:!0,children:"start"===n?"Starting ".concat(1===f?"1 sensor":"".concat(f," sensors")):"Stopping ".concat(1===f?"1 sensor":"".concat(f," sensors"))});case"completed":return(0,r.jsx)(o.zx,{intent:"primary",onClick:t,children:"Done"})}})()})]})};var j=t(69557);let v=e=>{let{sensors:n,onDone:t}=e,c=n.length,[d,u]=(0,a.useState)("not-open"),{anyOff:p,anyOn:h}=(0,a.useMemo)(()=>(0,j.H)(n.map(e=>{let{sensorState:n}=e;return n})),[n]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.J,{content:(0,r.jsxs)(s.v2,{children:[(0,r.jsx)(s.sN,{text:"Start ".concat(1===c?"1 sensor":"".concat(c," sensors")),disabled:!p,"aria-disabled":!p,icon:"toggle_on",onClick:()=>{u("start")}}),(0,r.jsx)(s.sN,{text:"Stop ".concat(1===c?"1 sensor":"".concat(c," sensors")),disabled:!h,"aria-disabled":!h,icon:"toggle_off",onClick:()=>{u("stop")}})]}),placement:"bottom-end",children:(0,r.jsx)(o.zx,{disabled:!c,intent:"primary",rightIcon:(0,r.jsx)(l.JO,{name:"expand_more"}),children:"Actions"})}),(0,r.jsx)(f,{openWithIntent:d,sensors:n,onClose:()=>u("not-open"),onComplete:()=>{t()}})]})}},55546:function(e,n,t){t.d(n,{e:function(){return et},F:function(){return en}});var r=t(52322),i=t(74580),s=t(35292),o=t(43212),l=t(14934),a=t(38491),c=t(90441),d=t(74188),u=t(92917),p=t(2784),h=t(19679),x=t(84842);let m=e=>{var n;let{metadata:t}=e;return(null==t?void 0:null===(n=t.assetKeys)||void 0===n?void 0:n.length)?(0,r.jsx)(l.x,{flex:{direction:"column",gap:2},children:t.assetKeys.map(e=>(0,r.jsx)(x.R,{path:e.path,icon:"asset"},e.path.join("/")))}):(0,r.jsx)("span",{})};var g=t(33379),f=t(35002),j=t(89398),v=t(36803),y=t(20718);let S=e=>{let{repoAddress:n,sensor:t}=e,{permissions:{canStartSensor:i,canStopSensor:s}}=(0,v.xz)(n.location),{name:o}=t,l={...(0,y.$)(n),sensorName:o},[c,{loading:d}]=(0,g.D)(j.Lq,{onCompleted:j.oI}),u=i&&s,p=u?'In code, a default status for "'.concat(o,'" has been set to "').concat(t.defaultStatus,'". Click here to reset the sensor status to track the status set in code.'):v.Qr;return(0,r.jsx)(f.u,{content:p,display:"flex",children:(0,r.jsx)(a.zx,{disabled:d||!u,onClick:()=>{c({variables:{sensorSelector:l}})},children:"Reset sensor status"})})};var b=t(69698),w=t(75306),k=t(16336),E=t(88257),C=t(79059),T=t(86269),I=t(73235),N=t(89130),P=t(92506),R=t(34147),A=t(89891),O=t(39013),_=t(79106),z=t(74159),F=t(37483),D=t(35505),L=t(49035),M=t(1747);function $(e){let{includeTitle:n=!0,requests:t}=e,i=(0,p.useMemo)(()=>{if(!t.length)return[];let e=[];return t.forEach(n=>{let{partitionKeys:t,partitionsDefName:r,type:i}=n;null==t||t.forEach(n=>{e.push({key:n,def:r,type:i})})}),e},[t]);return i.length?(0,r.jsxs)(l.x,{flex:{direction:"column",gap:12,grow:1},children:[n?(0,r.jsxs)(l.x,{flex:{direction:"row",alignItems:"center",gap:8},children:[(0,r.jsx)(u.JO,{name:"partition"}),(0,r.jsx)(s.pm,{children:"Dynamic Partition Requests"})]}):null,(0,r.jsxs)(M.i,{style:{borderRight:"1px solid ".concat(O.wL())},children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"Partition"}),(0,r.jsx)("th",{children:"Partition definition"}),(0,r.jsx)("th",{children:"Requested change"})]})}),(0,r.jsx)("tbody",{children:i.map((e,n)=>{let{key:t,def:i,type:s}=e;return(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:t}),(0,r.jsx)("td",{children:i}),(0,r.jsx)("td",{children:s===E.Dq2.ADD_PARTITIONS?(0,r.jsx)(o.V,{intent:"success",children:(0,r.jsx)("span",{children:"Add Partition"})}):(0,r.jsx)(o.V,{intent:"danger",children:(0,r.jsx)("span",{children:"Delete Partition"})})})]},n)})})]})]}):null}var q=t(76562),U=t(8068),B=t(50309),H=t(78491),K=t(23399),Z=t(71406),V=t(77851);function J(){let e=(0,I._)(["\n  mutation SensorDryRunMutation($selectorData: SensorSelector!, $cursor: String) {\n    sensorDryRun(selectorData: $selectorData, cursor: $cursor) {\n      ... on DryRunInstigationTick {\n        timestamp\n        evaluationResult {\n          cursor\n          runRequests {\n            ...RunRequestFragment\n          }\n          skipReason\n          error {\n            ...PythonErrorFragment\n          }\n          dynamicPartitionsRequests {\n            ...DynamicPartitionRequestFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  fragment DynamicPartitionRequestFragment on DynamicPartitionRequest {\n    partitionKeys\n    partitionsDefName\n    type\n  }\n\n  ","\n  ","\n"]);return J=function(){return e},e}let Q=e=>{let{isOpen:n,onClose:t,name:i}=e;return(0,r.jsx)(P.Vq,{isOpen:n,onClose:t,style:{width:"70vw",display:"flex"},icon:"sensors",title:i,children:(0,r.jsx)(Y,{...e})})},Y=e=>{var n;let{repoAddress:t,name:i,currentCursor:c,onClose:d,jobName:x}=e,[m]=(0,g.D)(G),[f,j]=(0,p.useState)(c),[v,y]=(0,p.useState)(!1),[S,b]=(0,p.useState)(null),[w,k]=(0,p.useState)(null),E=(0,p.useMemo)(()=>({sensorName:i,repositoryLocationName:t.location,repositoryName:t.name}),[t,i]),C=(0,p.useCallback)(async()=>{var e,n;y(!0);let t=null===(e=(await m({variables:{selectorData:E,cursor:f}})).data)||void 0===e?void 0:e.sensorDryRun;t?(null==t?void 0:t.__typename)==="DryRunInstigationTick"?(null===(n=t.evaluationResult)||void 0===n?void 0:n.error)?b(t.evaluationResult.error):k(t):(null==t?void 0:t.__typename)==="SensorNotFoundError"?(0,U._K)({title:"Sensor not found",body:"Could not find a sensor named: ".concat(i)}):b(t):(0,Z.UT)("sensorDryRun Mutation returned no data??"),y(!1)},[m,E,f,i]),T=(0,p.useMemo)(()=>w||S?(0,r.jsxs)(l.x,{flex:{direction:"row",gap:8},children:[(0,r.jsx)(a.zx,{"data-testid":(0,V.N)("test-again"),onClick:()=>{k(null),b(null)},children:"Test again"}),(0,r.jsx)(a.zx,{intent:"primary",onClick:d,children:"Close"})]}):v?(0,r.jsx)(l.x,{flex:{direction:"row",gap:8},children:(0,r.jsx)(a.zx,{onClick:d,children:"Cancel"})}):(0,r.jsxs)(l.x,{flex:{direction:"row",gap:8},children:[(0,r.jsx)(a.zx,{onClick:d,children:"Cancel"}),(0,r.jsx)(a.zx,{onClick:C,intent:"primary","data-testid":(0,V.N)("evaluate"),children:"Evaluate"})]}),[w,S,v,d,C]),[I,N]=(0,p.useState)("Unpersisted"),[D]=(0,g.D)(h.T),M=(0,p.useCallback)(async()=>{var e;let n=null==w?void 0:null===(e=w.evaluationResult)||void 0===e?void 0:e.cursor;n||(0,Z.UT)("Did not expect to get here"),N("Persisting");let{data:t}=await D({variables:{sensorSelector:E,cursor:n}});if((null==t?void 0:t.setSensorCursor.__typename)==="Sensor")await (0,B.B7)({message:"Cursor value updated",intent:"success"}),N("Persisted");else if(null==t?void 0:t.setSensorCursor){let e=t.setSensorCursor;await (0,B.B7)({intent:"danger",message:(0,r.jsxs)(R.Z,{direction:"row",spacing:8,children:[(0,r.jsx)("div",{children:"Could not set cursor value."}),(0,r.jsx)(A.Z,{color:O.KH(),underline:"always",onClick:()=>{(0,U._K)({title:"Python Error",body:"PythonError"===e.__typename?(0,r.jsx)(K.T9,{error:e}):"Sensor not found"})},children:"View error"})]})})}},[null==w?void 0:null===(n=w.evaluationResult)||void 0===n?void 0:n.cursor,E,D]),q=(0,p.useMemo)(()=>{if(w||S){var e,n,d,p,h,m,g;let j=null==w?void 0:null===(e=w.evaluationResult)||void 0===e?void 0:e.runRequests,v=(null==j?void 0:j.length)||0,y=!S&&0===v,b=null==w?void 0:null===(n=w.evaluationResult)||void 0===n?void 0:n.dynamicPartitionsRequests;return(0,r.jsx)(l.x,{flex:{direction:"column",gap:8},children:(0,r.jsxs)(l.x,{children:[(0,r.jsxs)(W,{children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(s.pm,{children:"Result"}),(0,r.jsx)(l.x,{flex:{grow:1,alignItems:"center"},children:(0,r.jsx)("div",{children:S?(0,r.jsx)(o.V,{intent:"danger",children:"Failed"}):v?(0,r.jsxs)(o.V,{intent:"success",children:[v," run requests"]}):(0,r.jsx)(o.V,{intent:"warning",children:"Skipped"})})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(s.pm,{children:"Used cursor value"}),(0,r.jsx)("pre",{children:(null==f?void 0:f.length)?f:"None"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(s.pm,{children:"Computed cursor value"}),(0,r.jsx)("pre",{children:(null==w?void 0:null===(p=w.evaluationResult)||void 0===p?void 0:null===(d=p.cursor)||void 0===d?void 0:d.length)?null==w?void 0:w.evaluationResult.cursor:S?"Error":"None"}),S||(null!=c?c:"")===(null!==(g=null==w?void 0:null===(h=w.evaluationResult)||void 0===h?void 0:h.cursor)&&void 0!==g?g:"")?null:(0,r.jsxs)(l.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,r.jsx)(a.zx,{disabled:["Persisting","Persisted"].includes(I),loading:"Persisting"===I,onClick:M,children:(0,r.jsx)("span",{"data-testid":(0,V.N)("persist-cursor"),children:"Persisting"===I?"Persisting":"Persisted"===I?"Persisted":"Persist computed cursor value"})}),"Persisted"===I?(0,r.jsx)(u.JO,{name:"check_circle",color:O.fA()}):null]})]})]}),S?(0,r.jsx)("div",{children:(0,r.jsx)(K.T9,{error:S})}):null,y?(0,r.jsxs)("div",{children:[(0,r.jsx)(s.pm,{children:"Skip reason"}),(0,r.jsx)("div",{children:(null==w?void 0:null===(m=w.evaluationResult)||void 0===m?void 0:m.skipReason)||"No skip reason was output"})]}):null,v&&j?(0,r.jsx)(L.k,{runRequests:j,name:i,jobName:x,isJob:!0,repoAddress:t}):null,(null==b?void 0:b.length)?(0,r.jsx)("div",{style:{marginTop:"24px"},children:(0,r.jsx)($,{requests:b})}):null]})})}return v?(0,r.jsxs)(l.x,{flex:{direction:"row",gap:8,justifyContent:"center",alignItems:"center"},children:[(0,r.jsx)(_.$,{purpose:"body-text"}),(0,r.jsx)("div",{children:"Evaluating sensor"})]}):(0,r.jsxs)(l.x,{flex:{direction:"column",gap:8},children:[(0,r.jsx)("div",{children:"Cursor"}),(0,r.jsx)(z.oi,{value:f,onChange:e=>j(e.target.value),"data-testid":(0,V.N)("cursor-input")}),""!==c&&c?null:(0,r.jsx)(l.x,{padding:{top:16,bottom:32},flex:{justifyContent:"center"},children:(0,r.jsx)(F.t,{icon:"no-results",title:"You're not using a cursor",description:(0,r.jsxs)("span",{children:["Check our"," ",(0,r.jsx)("a",{href:"https://docs.dagster.io/concepts/partitions-schedules-sensors/sensors#idempotence-and-cursors",children:"sensor documentation"})," ","to learn how to use cursors"]})})})]})},[w,S,v,c,I,M,i,x,t,f]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(P.a7,{children:(0,r.jsx)("div",{style:{minHeight:"300px"},children:q})}),(0,r.jsx)(P.cN,{topBorder:!0,children:T})]})},G=(0,N.Ps)(J(),q.s,H.B),W=D.ZP.div.withConfig({componentId:"sc-ba27fb61-0"})(["display:grid;grid-template-columns:repeat(3,1fr);padding-bottom:12px;border-bottom:1px solid ",";margin-bottom:12px;","{padding-bottom:4px;display:block;}pre{margin:0;}button{margin-top:4px;}"],O.wL(),s.pm);var X=t(58905);let ee={showSeconds:!0,showTimezone:!1},en=e=>(e||(e=30),e<60||e%60)?"~".concat(e," sec"):3600===e?"~1 hour":e<3600||e%3600?"~".concat(e/60," min"):86400===e?"~1 day":e<86400||e%86400?"~".concat(e/3600," hours"):"~".concat(e/86400," days"),et=e=>{var n,t,x;let{sensor:g,repoAddress:f,daemonHealth:j,refreshState:v,selectionQueryResult:y}=e,{name:I,sensorState:{status:N,ticks:P},metadata:R}=g,[A,O]=(0,p.useState)(!1),_={sensorName:g.name,repositoryName:f.name,repositoryLocationName:f.location},z=P.length?P[0]:null,F=g.sensorState.typeSpecificData&&"SensorData"===g.sensorState.typeSpecificData.__typename&&g.sensorState.typeSpecificData.lastCursor,[D,L]=(0,p.useState)(!1),M=N===E.ynu.RUNNING,$=null===(n=y.data)||void 0===n?void 0:n.sensorOrError,q=(null==$?void 0:$.__typename)==="Sensor"?$:null,U=null==q?void 0:q.assetSelection;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.m,{title:(0,r.jsx)(s.X6,{children:I}),icon:"sensors",tags:(0,r.jsxs)(o.V,{icon:"sensors",children:["Sensor in ",(0,r.jsx)(C.b,{repoAddress:f})]}),right:(0,r.jsxs)(l.x,{margin:{top:4},flex:{direction:"row",alignItems:"center",gap:8},children:[(0,r.jsx)(k.xi,{refreshState:v}),g.sensorType===E.dEY.STANDARD?(0,r.jsx)(a.zx,{onClick:()=>{L(!0)},children:"Test Sensor"}):null]})}),(0,r.jsx)(Q,{isOpen:D,onClose:()=>{L(!1)},currentCursor:F||"",name:g.name,repoAddress:f,jobName:(null===(x=g.targets)||void 0===x?void 0:null===(t=x[0])||void 0===t?void 0:t.pipelineName)||""}),(0,r.jsx)(c.fJ,{children:(0,r.jsxs)("tbody",{children:[g.description?(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Description"}),(0,r.jsx)("td",{children:g.description})]}):null,(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Latest tick"}),(0,r.jsx)("td",{children:z?(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(l.x,{flex:{direction:"row",gap:8,alignItems:"center"},style:{marginTop:"-2px"},children:[(0,r.jsx)(T.v,{timestamp:z.timestamp,timeFormat:ee}),(0,r.jsx)(X.a,{tick:z})]})}):"Sensor has never run"})]}),g.nextTick&&j&&M&&(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Next tick"}),(0,r.jsx)("td",{children:(0,r.jsx)(T.v,{timestamp:g.nextTick.timestamp,timeFormat:ee})})]}),g.targets&&g.targets.length||U?(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Target"}),(0,r.jsx)("td",{children:(0,r.jsx)(w.D,{targets:g.targets,repoAddress:f,selectionQueryResult:y,sensorType:g.sensorType})})]}):null,(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:(0,r.jsx)(l.x,{flex:{alignItems:"center"},style:{height:"32px"},children:"Running"})}),(0,r.jsx)("td",{children:(0,r.jsxs)(l.x,{flex:{direction:"row",gap:12,alignItems:"center"},style:{height:"32px"},children:[(0,r.jsx)(b.c,{repoAddress:f,sensor:g}),g.canReset&&(0,r.jsx)(S,{repoAddress:f,sensor:g})]})})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Frequency"}),(0,r.jsx)("td",{children:en(g.minIntervalSeconds)})]}),R.assetKeys&&R.assetKeys.length?(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Monitored assets"}),(0,r.jsx)("td",{children:(0,r.jsx)(m,{metadata:R})})]}):null,g.sensorType!==E.dEY.AUTO_MATERIALIZE&&g.sensorType!==E.dEY.AUTOMATION?(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:(0,r.jsx)(l.x,{flex:{alignItems:"center"},style:{height:"32px"},children:"Cursor"})}),(0,r.jsxs)("td",{children:[(0,r.jsxs)(l.x,{flex:{direction:"row",gap:12,alignItems:"center"},children:[(0,r.jsx)("span",{style:{fontFamily:d.b.monospace,fontSize:"14px"},children:F||"None"}),(0,r.jsx)(a.zx,{icon:(0,r.jsx)(u.JO,{name:"edit"}),onClick:()=>O(!0),children:"Edit"})]}),(0,r.jsx)(h.x,{isOpen:A,sensorSelector:_,cursor:F||"",onClose:()=>O(!1)})]})]}):null]})})]})}},5409:function(e,n,t){t.d(n,{F:function(){return o}});var r=t(52322),i=t(14934),s=t(16629);t(2784);let o=e=>{let{sensorDaemonStatus:n,assetDaemonStatus:t,...o}=e,l=n&&!1===n.healthy&&n.required,a=t&&!1==!t.healthy&&t.required;return a||l?(0,r.jsx)(i.x,{...o,children:(0,r.jsx)(s.b,{intent:"warning",title:l?a?"The sensor and asset daemons are not running":"The sensor daemon is not running":"The asset daemon is not running",description:(0,r.jsxs)("div",{children:["See the"," ",(0,r.jsx)("a",{href:"https://docs.dagster.io/deployment/dagster-daemon",target:"_blank",rel:"noreferrer",children:"dagster-daemon documentation"})," ","for more information on how to deploy the dagster-daemon process."]})})}):null}},6265:function(e,n,t){t.d(n,{Z:function(){return et},A:function(){return ee}});var r=t(73235),i=t(52322),s=t(40794),o=t(89130),l=t(51484),a=t(14934),c=t(79106),d=t(39013),u=t(37483),p=t(49308),h=t(2784),x=t(7267),m=t(55546),g=t(581);function f(){let e=(0,r._)(["\n  fragment SensorFragment on Sensor {\n    id\n    jobOriginId\n    name\n    description\n    minIntervalSeconds\n    sensorType\n    nextTick {\n      timestamp\n    }\n    defaultStatus\n    canReset\n    sensorState {\n      id\n      ...InstigationStateFragment\n    }\n    targets {\n      pipelineName\n      solidSelection\n      mode\n    }\n    metadata {\n      assetKeys {\n        path\n      }\n    }\n  }\n\n  ","\n"]);return f=function(){return e},e}let j=(0,o.Ps)(f(),g.ai);var v=t(5409),y=t(3842),S=t(16629),b=t(35292),w=t(78491),k=t(93812);function E(){let e=(0,r._)(["\n  query AssetSensorTicksQuery(\n    $sensorSelector: SensorSelector!\n    $dayRange: Int\n    $dayOffset: Int\n    $statuses: [InstigationTickStatus!]\n    $limit: Int\n    $cursor: String\n    $beforeTimestamp: Float\n    $afterTimestamp: Float\n  ) {\n    sensorOrError(sensorSelector: $sensorSelector) {\n      ... on Sensor {\n        id\n        sensorState {\n          id\n          ticks(\n            dayRange: $dayRange\n            dayOffset: $dayOffset\n            statuses: $statuses\n            limit: $limit\n            cursor: $cursor\n            beforeTimestamp: $beforeTimestamp\n            afterTimestamp: $afterTimestamp\n          ) {\n            id\n            ...AssetDaemonTickFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"]);return E=function(){return e},e}let C=(0,o.Ps)(E(),k.B,w.B);var T=t(16336),I=t(76575),N=t(28363),P=t(4733),R=t(88257),A=t(4378),O=t(34219),_=t(15332);let z=e=>{var n,t;let{repoAddress:r,sensor:s,setSelectedTick:o,setTableView:l,setTimerange:a,setParentStatuses:c}=e,[d,u]=(0,A.q)({queryKey:"statuses",decode:(0,h.useCallback)(e=>{let{statuses:n}=e;return new Set(n?JSON.parse(n):[R.izS.STARTED,R.izS.SUCCESS,R.izS.FAILURE,R.izS.SKIPPED])},[]),encode:(0,h.useCallback)(e=>({statuses:JSON.stringify(Array.from(e))}),[])}),{queryResult:p,paginationProps:x}=(0,_.l)({query:C,variables:{sensorSelector:{sensorName:s.name,repositoryName:r.name,repositoryLocationName:r.location},statuses:(0,h.useMemo)(()=>Array.from(d),[d])},nextCursorForResult:e=>{if((null==e?void 0:e.sensorOrError.__typename)==="Sensor"){let t=e.sensorOrError.sensorState.ticks;if(t.length){var n;return null===(n=t[14])||void 0===n?void 0:n.id}}},getResultArray:e=>(null==e?void 0:e.sensorOrError.__typename)==="Sensor"?e.sensorOrError.sensorState.ticks:[],pageSize:15});(0,O.Hu)(p,"AssetSensorTicksQuery"),(0,T.C4)(p,1e4,!x.hasPrevCursor);let m=(null===(t=p.data)||void 0===t?void 0:null===(n=t.sensorOrError)||void 0===n?void 0:n.__typename)==="Sensor"?p.data.sensorOrError.sensorState.ticks:null;return(0,h.useEffect)(()=>{if(x.hasPrevCursor){if(m&&m.length){var e,n;let t=null===(e=m[m.length-1])||void 0===e?void 0:e.timestamp,r=null===(n=m[0])||void 0===n?void 0:n.endTimestamp;t&&r&&a([t,r])}}else a(void 0)},[m,x.hasPrevCursor,a]),(0,h.useEffect)(()=>{x.hasPrevCursor?c(Array.from(d)):c(void 0)},[x.hasPrevCursor,c,d]),(0,i.jsx)(P.V,{loading:p.loading,ticks:m||[],paginationProps:x,setSelectedTick:o,setStatuses:u,setTableView:l,statuses:d})};var F=t(59502),D=t(57758),L=t(43984),M=t(22563);let $=e=>{var n;let{repoAddress:t,sensor:r,loading:s,daemonStatus:o}=e,[l,u]=(0,h.useState)(!1),[p,x]=(0,h.useState)(void 0),[m,g]=(0,h.useState)(void 0),f=(0,h.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();return m||p?{sensorSelector:{sensorName:r.name,repositoryName:t.name,repositoryLocationName:t.location},afterTimestamp:null==m?void 0:m[0],beforeTimestamp:null==m?void 0:m[1],statuses:p}:{sensorSelector:{sensorName:r.name,repositoryName:t.name,repositoryLocationName:t.location},afterTimestamp:(e-12e5)/1e3}},[r,t,p,m]),[j,w]=(0,y.t)(C);(0,O.Hu)(w,"AssetSensorTicksQuery");let k=(0,h.useCallback)(async()=>await j({variables:f()}),[j,f]);(0,T.bT)({refresh:k,enabled:!l&&!m&&!p,intervalMs:2e3,leading:!0});let[E,P]=(0,h.useState)(null),[_,$]=(0,A.q)((0,h.useMemo)(()=>({queryKey:"view",decode:e=>{let{view:n}=e;return"runs"===n?"runs":"evaluations"},encode:e=>({view:e,cursor:void 0,statuses:void 0})}),[])),q=null!==(n=w.data)&&void 0!==n?n:w.previousData,U=(0,h.useMemo)(()=>(null==q?void 0:q.sensorOrError.__typename)==="Sensor"?q.sensorOrError.sensorState.ticks:[],[q]),B=(0,h.useMemo)(()=>{var e;return null!==(e=U.map((e,n)=>{let t=U[n-1];if(t&&(0,D.g6)(e,n)){let n={...e};return n.endTimestamp=t.timestamp,n.status=R.izS.FAILURE,n}return e}))&&void 0!==e?e:[]},[JSON.stringify(U.map(e=>"".concat(e.id,":").concat(e.status)))]),H=(0,h.useCallback)(e=>{u(!!e)},[u]),K=(0,h.useMemo)(()=>[{key:L.H.RepositoryLabelTag,value:(0,M.Wg)(t)},{key:L.H.SensorName,value:r.name}],[t,r]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a.x,{padding:{vertical:12,horizontal:24},flex:{direction:"column",gap:12},children:(0,i.jsx)(S.b,{intent:"info",title:"[Experimental] Dagster can automatically materialize assets when criteria are met.",description:(0,i.jsxs)(i.Fragment,{children:["Auto-materialization enables a declarative approach to asset scheduling â€“ instead of defining imperative workflows to materialize your assets, you just describe the conditions under which they should be materialized."," ",(0,i.jsx)("a",{href:"https://docs.dagster.io/concepts/assets/asset-auto-execution",target:"_blank",rel:"noreferrer",children:"Learn more about auto-materialization here"}),"."]})})}),(0,i.jsx)(v.F,{assetDaemonHealth:o,padding:{vertical:16,horizontal:24}}),(0,i.jsx)(a.x,{padding:{vertical:12,horizontal:24},border:"bottom",children:(0,i.jsx)(b.Tj,{children:"Evaluation timeline"})}),!r&&s?(0,i.jsxs)(a.x,{padding:{vertical:48},flex:{direction:"row",justifyContent:"center",gap:12,alignItems:"center"},children:[(0,i.jsx)(c.$,{purpose:"body-text"}),(0,i.jsx)("div",{style:{color:d.$()},children:"Loading evaluationsâ€¦"})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(F.p,{ticks:B,onHoverTick:H,onSelectTick:P,exactRange:m,timeRange:12e5,tickGrid:3e5,timeAfter:18e4}),(0,i.jsx)(I.d,{tick:E,isOpen:!!E,close:()=>{P(null)}}),"evaluations"===_?(0,i.jsx)(z,{repoAddress:t,sensor:r,setSelectedTick:P,setTableView:$,setParentStatuses:x,setTimerange:g}):(0,i.jsx)(N.o,{filterTags:K,setTableView:$})]})]})};var q=t(80122),U=t(89010);function B(){let e=(0,r._)(["\n  query PreviousRunsForSensorQuery($filter: RunsFilter, $cursor: String, $limit: Int) {\n    pipelineRunsOrError(filter: $filter, limit: $limit, cursor: $cursor) {\n      ... on Runs {\n        results {\n          id\n          ... on PipelineRun {\n            ...RunTableRunFragment\n          }\n        }\n      }\n    }\n  }\n\n  ","\n"]);return B=function(){return e},e}let H=e=>{let{sensor:n,repoAddress:t,highlightedIds:r,tabs:s}=e,{queryResult:o,paginationProps:l}=(0,_.l)({query:K,variables:{filter:{tags:[{key:L.H.SensorName,value:n.name},{key:L.H.RepositoryLabelTag,value:(0,M.Wg)(t)}]}},nextCursorForResult:e=>{var n;if("Runs"===e.pipelineRunsOrError.__typename)return null===(n=e.pipelineRunsOrError.results[19])||void 0===n?void 0:n.id},getResultArray:e=>(null==e?void 0:e.pipelineRunsOrError.__typename)!=="Runs"?[]:e.pipelineRunsOrError.results,pageSize:20});(0,O.Hu)(o,"PreviousRunsForSensorQuery"),(0,T.C4)(o,l.hasPrevCursor?36e5:1e4);let a=o.data;if(a&&(null==a?void 0:a.pipelineRunsOrError.__typename)==="Runs"||(a=o.previousData),!a||(null==a?void 0:a.pipelineRunsOrError.__typename)!=="Runs")return null;let c=a.pipelineRunsOrError.results;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(U.AL,{actionBarComponents:s,runs:c,highlightedIds:r,hideCreatedBy:!0}),(0,i.jsx)("div",{style:{paddingBottom:"16px"},children:(0,i.jsx)(q.pI,{...l})})]})},K=(0,o.Ps)(B(),U.ZZ);var Z=t(23399),V=t(69737),J=t(20171),Q=t(40782),Y=t(9790),G=t(20718);function W(){let e=(0,r._)(['\n  query SensorRootQuery($sensorSelector: SensorSelector!) {\n    sensorOrError(sensorSelector: $sensorSelector) {\n      ... on Sensor {\n        id\n        ...SensorFragment\n      }\n      ...PythonErrorFragment\n    }\n    instance {\n      id\n      daemonHealth {\n        id\n        sensorDaemonStatus: daemonStatus(daemonType: "SENSOR") {\n          id\n          healthy\n          required\n        }\n        ampDaemonStatus: daemonStatus(daemonType: "ASSET") {\n          id\n          healthy\n          required\n        }\n      }\n      ...InstanceHealthFragment\n    }\n  }\n\n  ',"\n  ","\n  ","\n"]);return W=function(){return e},e}function X(){let e=(0,r._)(["\n  query SensorAssetSelectionQuery($sensorSelector: SensorSelector!) {\n    sensorOrError(sensorSelector: $sensorSelector) {\n      ... on Sensor {\n        id\n        assetSelection {\n          ...SensorAssetSelectionFragment\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  fragment SensorAssetSelectionFragment on AssetSelection {\n    assetSelectionString\n    assetsOrError {\n      ... on AssetConnection {\n        nodes {\n          id\n          key {\n            path\n          }\n          definition {\n            id\n            autoMaterializePolicy {\n              __typename\n            }\n          }\n        }\n      }\n      ... on PythonError {\n        ...PythonErrorFragment\n      }\n    }\n  }\n  ","\n"]);return X=function(){return e},e}let ee=e=>{let{repoAddress:n}=e;(0,V.Px)();let{sensorName:t}=(0,x.UO)();(0,J.j)("Sensor: ".concat(t));let r={...(0,G.$)(n),sensorName:t},[o,g]=(0,h.useState)(void 0),[f,j]=(0,h.useState)(void 0),y=(0,h.useMemo)(()=>f||o?{afterTimestamp:null==f?void 0:f[0],beforeTimestamp:null==f?void 0:f[1],statuses:o}:{},[o,f]),[S,b]=(0,A.q)((0,h.useMemo)(()=>({queryKey:"view",decode:e=>{let{view:n}=e;return"runs"===n?"runs":"evaluations"},encode:e=>({view:e,cursor:void 0,statuses:void 0})}),[])),w=(0,s.a)(en,{variables:{sensorSelector:r},notifyOnNetworkStatusChange:!0});(0,O.Hu)(w,"SensorRootQuery");let k=(0,s.a)(et,{variables:{sensorSelector:r},notifyOnNetworkStatusChange:!0});(0,O.Hu)(k,"SensorAssetSelectionQuery");let E=(0,T.C4)(w,T.dT),C=(0,T.C4)(k,T.dT),I=(0,T.V5)(E,C),{data:N,loading:P}=w,_=(0,i.jsx)(l.h,{activeItems:new Set([S]),buttons:[{id:"evaluations",label:"Evaluations"},{id:"runs",label:"Runs"}],onClick:e=>{b(e)}});if(!N&&P)return(0,i.jsxs)(a.x,{margin:{top:32},flex:{direction:"row",alignItems:"center",justifyContent:"center",gap:16},children:[(0,i.jsx)(c.$,{purpose:"body-text"}),(0,i.jsx)("div",{style:{color:d.$()},children:"Loading sensorâ€¦"})]});if(!N||"SensorNotFoundError"===N.sensorOrError.__typename)return(0,i.jsx)(a.x,{padding:{vertical:32},children:(0,i.jsx)(u.t,{icon:"error",title:"Could not find sensor `".concat(t,"` in definitions for `").concat(n.name,"`")})});let{sensorOrError:z}=N;if("PythonError"===z.__typename)return(0,i.jsx)(Z.T9,{error:z});if("UnauthorizedError"===z.__typename)return(0,i.jsx)(x.l_,{to:"/overview/sensors"});let{instance:F}=N;if(z.sensorType===R.dEY.AUTO_MATERIALIZE||z.sensorType===R.dEY.AUTOMATION){let e=F.daemonHealth.ampDaemonStatus;return(0,i.jsxs)(p.T,{children:[(0,i.jsx)(m.e,{repoAddress:n,sensor:z,daemonHealth:e.healthy,refreshState:I,selectionQueryResult:k}),(0,i.jsx)($,{repoAddress:n,sensor:z,daemonStatus:e,loading:P})]})}let D=F.daemonHealth.sensorDaemonStatus;return(0,i.jsxs)(p.T,{children:[(0,i.jsx)(m.e,{repoAddress:n,sensor:z,daemonHealth:D.healthy,refreshState:I,selectionQueryResult:k}),(0,i.jsx)(v.F,{sensorDaemonStatus:D,padding:{vertical:16,horizontal:24}}),(0,i.jsx)(Y.C,{repoAddress:n,name:z.name,...y}),(0,i.jsx)(a.x,{margin:{top:32},border:"top",children:"evaluations"===S?(0,i.jsx)(Y.H,{tabs:_,repoAddress:n,name:z.name,setParentStatuses:g,setTimerange:j}):(0,i.jsx)(H,{repoAddress:n,sensor:z,tabs:_})})]})},en=(0,o.Ps)(W(),j,w.B,Q.O),et=(0,o.Ps)(X(),w.B)},75306:function(e,n,t){t.d(n,{D:function(){return C}});var r=t(52322),i=t(14934),s=t(92506),o=t(38491),l=t(89891),a=t(92917),c=t(83373);let d=e=>{let{isOpen:n,onToggle:t}=e;return(0,r.jsx)(c.k,{onClick:e=>{t(e)},style:{cursor:"pointer",width:18},children:(0,r.jsx)(a.JO,{name:"arrow_drop_down",style:{transform:n?"rotate(0deg)":"rotate(-90deg)"}})})};var u=t(35292),p=t(39013),h=t(53664),x=t(2784),m=t(47933),g=t(8068),f=t(23399),j=t(71406),v=t(44900),y=t(75442),S=t(88257),b=t(33847),w=t(81732),k=t(70812),E=t(100);let C=e=>{var n;let{sensorType:t,targets:s,selectionQueryResult:o,repoAddress:l}=e,a=(0,E.Ux)(l),c=null===(n=o.data)||void 0===n?void 0:n.sensorOrError,d=(null==c?void 0:c.__typename)==="Sensor"?c:null;if(!s&&!d)return(0,r.jsx)("span",{});let u=null==d?void 0:d.assetSelection,p=null==s?void 0:s.filter(e=>!(0,v.pv)(e.pipelineName));return(0,r.jsxs)(i.x,{flex:{direction:"column",gap:2},children:[u&&(0,r.jsx)(T,{assetSelection:u,sensorType:t}),null==p?void 0:p.map(e=>e.pipelineName?(0,r.jsx)(b.h,{pipelineName:e.pipelineName,pipelineHrefContext:l,isJob:!!(a&&(0,E.E8)(a,e.pipelineName))},e.pipelineName):null)]})},T=e=>{let{assetSelection:n,sensorType:t}=e,[a,c]=x.useState(!1),d="PythonError"===n.assetsOrError.__typename?n.assetsOrError:null,u=x.useMemo(()=>"PythonError"===n.assetsOrError.__typename?[]:n.assetsOrError.nodes.slice().sort((e,n)=>j.Bl.compare((0,v.ll)(e.key),(0,v.ll)(n.key))),[n.assetsOrError]),p=x.useMemo(()=>u.filter(e=>{var n;return!!(null===(n=e.definition)||void 0===n?void 0:n.autoMaterializePolicy)}),[u]),h=x.useMemo(()=>u.filter(e=>{var n;return!(null===(n=e.definition)||void 0===n?void 0:n.autoMaterializePolicy)}),[u]),m=n.assetSelectionString||"";return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(s.Vq,{isOpen:a,title:"Targeted assets",onClose:()=>c(!1),style:{width:"750px",maxWidth:"80vw",minWidth:"500px",transform:"scale(1)"},canOutsideClickClose:!0,canEscapeKeyClose:!0,children:[(0,r.jsx)(i.x,{flex:{direction:"column"},children:t===S.dEY.AUTO_MATERIALIZE||t===S.dEY.AUTOMATION?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(I,{title:"Assets with a materialization policy",titleBorder:"bottom",assets:p}),(0,r.jsx)(I,{title:"Assets without a materialization policy",titleBorder:"top-and-bottom",assets:h})]}):(0,r.jsx)(I,{assets:u})}),(0,r.jsx)(s.cN,{topBorder:!0,children:(0,r.jsx)(o.zx,{intent:"primary",onClick:()=>{c(!1)},children:"Close"})})]}),(0,r.jsx)(l.Z,{onClick:()=>{d?(0,g._K)({title:"Python Error",body:(0,r.jsx)(f.T9,{error:d})}):c(!0)},children:d?(0,r.jsx)(r.Fragment,{children:"Error loading asset selection"}):(0,r.jsxs)(r.Fragment,{children:[m.slice(0,1).toUpperCase(),m.slice(1)]})})]})},I=e=>{let{assets:n,title:t,titleBorder:s="top-and-bottom"}=e,[o,l]=x.useState(!0);return(0,r.jsxs)(r.Fragment,{children:[t?(0,r.jsx)(i.x,{border:s,padding:{right:24,vertical:12},children:(0,r.jsxs)(i.x,{flex:{direction:"row",gap:4},style:{cursor:"pointer"},onClick:()=>{l(!o)},children:[(0,r.jsx)(d,{onToggle:()=>{},isOpen:o}),(0,r.jsxs)(u.Tj,{children:[t," (",k.V.format(n.length),")"]})]})}):null,o?n.length?(0,r.jsx)("div",{style:{maxHeight:"300px",overflowY:"scroll"},children:(0,r.jsx)(w.Y,{padding:0,items:n,renderItem:e=>(0,r.jsx)(N,{asset:e},e.id),itemBorders:!0})}):(0,r.jsx)(i.x,{padding:{horizontal:24,vertical:12},children:(0,r.jsx)(u.YS,{color:p.$(),children:"0 assets"})}):null]})},N=e=>{let{asset:n}=e;return(0,r.jsx)(i.x,{flex:{alignItems:"center",gap:4},style:{cursor:"pointer"},padding:{horizontal:24},children:(0,r.jsx)(m.rU,{to:(0,y.p)(n.key),target:"_blank",children:(0,r.jsx)(i.x,{style:{overflow:"hidden"},children:(0,r.jsx)(h.g,{text:(0,v.ll)(n.key)})})})})}},40389:function(e,n,t){t.d(n,{x:function(){return i}});var r=t(22563);let i=(e,n)=>"".concat((0,r.Uz)(e),"-").concat(n)},49035:function(e,n,t){t.d(n,{k:function(){return g}});var r=t(52322),i=t(14934),s=t(43212),o=t(92917),l=t(1747),a=t(39013),c=t(19126),d=t.n(c),u=t(33847),p=t(77851),h=t(88610),x=t(100),m=t(10539);let g=e=>{let{runRequests:n,isJob:t,repoAddress:c,mode:g,jobName:f}=e,j=(0,x.Ux)(c),v=(0,r.jsx)("tbody",{"data-testid":(0,p.N)("table-body"),children:n.map((e,n)=>{var l,a,x;return(0,r.jsxs)("tr",{"data-testid":(0,p.N)(e.runKey||""),children:[(0,r.jsx)("td",{children:(0,r.jsx)(i.x,{flex:{alignItems:"center",gap:8},children:(0,r.jsx)(u.h,{pipelineName:null!==(a=e.jobName)&&void 0!==a?a:f,pipelineHrefContext:c,isJob:!!j&&t,showIcon:!0,size:"small"})})}),(0,r.jsx)("td",{children:(0,r.jsx)(i.x,{flex:{direction:"row",gap:8,wrap:"wrap"},children:e.tags.filter(e=>{let{key:n}=e;return!["dagster/schedule_name"].includes(n)}).map(e=>{let{key:n,value:t}=e;return(0,r.jsx)(s.V,{children:"".concat(n,": ").concat(t)},n)})})}),(0,r.jsx)("td",{children:(0,r.jsx)(h.A,{icon:(0,r.jsx)(o.JO,{name:"edit"}),target:"_blank",to:(0,m.$U)(c,"/pipeline_or_job/".concat(null!==(x=e.jobName)&&void 0!==x?x:f,"/playground/setup?").concat(d().stringify({mode:g,config:e.runConfigYaml,tags:e.tags,assetSelection:null===(l=e.assetSelection)||void 0===l?void 0:l.map(e=>{let{path:n}=e;return{assetKey:{path:n}}})}))),children:"Open in Launchpad"})})]},n)})});return(0,r.jsx)("div",{children:(0,r.jsxs)(l.i,{style:{borderRight:"1px solid ".concat(a.wL()),tableLayout:"fixed"},children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsxs)("th",{children:[t?"Job":"Pipeline"," name"]}),(0,r.jsx)("th",{children:"Tags"}),(0,r.jsx)("th",{children:"Configuration"})]})}),v]})})}},76562:function(e,n,t){t.d(n,{s:function(){return s}});var r=t(73235);function i(){let e=(0,r._)(["\n  fragment RunRequestFragment on RunRequest {\n    runConfigYaml\n    tags {\n      key\n      value\n    }\n    runKey\n    jobName\n    assetSelection {\n      path\n    }\n  }\n"]);return i=function(){return e},e}let s=(0,t(89130).Ps)(i())},58905:function(e,n,t){t.d(n,{a:function(){return g}});var r=t(52322),i=t(43212),s=t(75561),o=t(39013),l=t(35002),a=t(14934),c=t(89891),d=t(40191),u=t(92506),p=t(38491),h=t(2784),x=t(23399),m=t(88257);let g=e=>{let{tick:n,isStuckStarted:t}=e,[g,f]=(0,h.useState)(!1),j=(0,h.useMemo)(()=>{let e="requestedAssetMaterializationCount"in n;switch(n.status){case m.izS.STARTED:return(0,r.jsx)(i.V,{intent:"primary",icon:t?void 0:"spinner",children:t?"In progress":"Evaluating"});case m.izS.SKIPPED:let u=(0,r.jsx)(s.m,{fillColor:o.fk(),label:e?"0 materializations requested":"0 runs requested"});if("runKeys"in n&&n.runKeys.length){let e="".concat(n.runKeys.length," runs requested, but skipped because the runs already exist for the requested keys.");return(0,r.jsx)(l.u,{position:"right",content:e,children:u})}if("skipReason"in n&&n.skipReason)return(0,r.jsx)(l.u,{position:"right",content:n.skipReason,targetTagName:"div",children:u});return u;case m.izS.FAILURE:return(0,r.jsxs)(a.x,{flex:{direction:"row",alignItems:"center",gap:6},children:[(0,r.jsx)(i.V,{intent:"danger",children:"Failure"}),n.error?(0,r.jsx)(c.Z,{onClick:()=>{f(!0)},children:"View"}):null]});case m.izS.SUCCESS:let p=e?n.requestedAssetMaterializationCount:n.runIds.length,h=(0,r.jsxs)(i.V,{intent:"success",children:[p," ",e?"materialization":"run",(0,d.I)(p,"","s")," requested"]});if("runKeys"in n&&n.runKeys.length>n.runIds.length){let e="".concat(n.runKeys.length," runs requested, but ").concat(n.runKeys.length-n.runIds.length," skipped because the runs already exist for those requested keys.");return(0,r.jsx)(l.u,{position:"right",content:e,children:h})}return h}},[t,n]);return(0,r.jsxs)(r.Fragment,{children:[j,n.error?(0,r.jsxs)(u.Vq,{isOpen:g,title:"Error",style:{width:"80vw"},children:[(0,r.jsx)(u.a7,{children:(0,r.jsx)(x.T9,{error:n.error})}),(0,r.jsx)(u.cN,{topBorder:!0,children:(0,r.jsx)(p.zx,{intent:"primary",onClick:()=>{f(!1)},children:"Close"})})]}):null]})}},2389:function(e,n,t){t.d(n,{W:function(){return o}});var r=t(52322),i=t(35002),s=t(37504);let o=e=>{let{checkedCount:n,totalCount:t,onToggleAll:o}=e;return(0,r.jsx)(i.u,{content:"".concat(n," of ").concat(t," selected"),placement:"top",children:(0,r.jsx)(s.X,{indeterminate:n>0&&n!==t,checked:n>0&&n===t,onChange:e=>{e.target instanceof HTMLInputElement&&o(n!==t)}})})}},2949:function(e,n,t){t.d(n,{g:function(){return l}});var r=t(52322),i=t(83586),s=t(88257),o=t(4378);let l=()=>{let[e,n]=(0,o.q)({encode:e=>({instigationStatus:e.size?Array.from(e).join(","):void 0}),decode:e=>{var n;return new Set((null===(n=e.instigationStatus)||void 0===n?void 0:n.split(","))||[])}});return(0,i.im)({name:"Running state",icon:"toggle_off",allValues:[{value:s.ynu.RUNNING,match:["on","running"]},{value:s.ynu.STOPPED,match:["off","stopped"]}],getKey:e=>e,renderLabel:e=>{let{value:n}=e;return(0,r.jsx)("span",{children:n===s.ynu.RUNNING?"Running":"Stopped"})},state:e,onStateChanged:n,getStringValue:e=>e})}},73658:function(e,n,t){t.d(n,{W:function(){return c}});var r=t(52322),i=t(2784);let s=e=>{let[n,t]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{let n=setTimeout(()=>t(!0),e);return()=>clearTimeout(n)},[e]),n};var o=t(14934),l=t(35002),a=t(79106);let c=e=>{let{tooltipContent:n}=e;return s(2e3)?(0,r.jsx)(o.x,{margin:{top:1},children:(0,r.jsx)(l.u,{placement:"top",canShow:!!n,content:n||"",children:(0,r.jsx)(a.$,{purpose:"body-text"})})}):null}},98956:function(e,n,t){t.d(n,{w:function(){return r}});let r=e=>{let n=new Set,t=new Set;return e.forEach(e=>{n.has(e)?t.add(e):n.add(e)}),t}},50646:function(e,n,t){t.d(n,{N:function(){return c}});var r=t(2784),i=t(4128),s=t(30001),o=t(22563);let l=e=>Array.isArray(e)?e:[],a=(e,n)=>"".concat(e,":dagster.").concat(n),c=(e,n)=>{let{basePath:t}=(0,r.useContext)(i.I),c=a(t,e),[d,u]=(0,s.U)(c,l),p=(0,r.useCallback)(e=>{let n="object"==typeof e?(0,o.Uz)(e):e;u(e=>{let t=new Set(e||[]);return t.has(n)?t.delete(n):t.add(n),Array.from(t)})},[u]),h=(0,r.useCallback)(e=>{u(t=>{let r=new Set(t||[]);return n.forEach(n=>{e?r.delete(n):r.add(n)}),Array.from(r)})},[n,u]),x=(0,r.useMemo)(()=>{let e=new Set(d);return n.filter(n=>!e.has(n))},[n,d]);return(0,r.useMemo)(()=>({expandedKeys:x,onToggle:p,onToggleAll:h}),[x,p,h])}},6624:function(e,n,t){t.d(n,{o:function(){return U},i:function(){return q}});var r=t(73235),i=t(52322),s=t(3842),o=t(89130),l=t(35002),a=t(37504),c=t(14934),d=t(53664),u=t(35292),p=t(39013),h=t(55010),x=t(60603),m=t(38491),g=t(92917),f=t(2784),j=t(47933),v=t(35505),y=t(83738),S=t(100),b=t(10539),w=t(16336),k=t(88257),E=t(60648),C=t(77837),T=t(34219),I=t(33847),N=t(33182),P=t(4219),R=t(43212);let A=(e,n)=>{if(e===k.ynu.STOPPED&&0===n||e===k.ynu.RUNNING&&1===n)return null;let t=[];return e===k.ynu.RUNNING&&0===n?t.push("Schedule is set to be running, but either the scheduler is not configured or the scheduler is not running the schedule"):e===k.ynu.STOPPED&&n>0&&t.push("Schedule is set to be stopped, but the scheduler is still running the schedule"),n>0&&t.push("Duplicate cron job for schedule found."),(0,i.jsx)(h.J,{interactionKind:"hover",popoverClassName:"bp4-popover-content-sizing",position:"right",content:(0,i.jsxs)(c.x,{flex:{direction:"column",gap:8},padding:12,children:[(0,i.jsx)("strong",{children:"There are errors with this schedule."}),(0,i.jsx)("div",{children:"Errors:"}),(0,i.jsx)("ul",{children:t.map((e,n)=>(0,i.jsx)("li",{children:e},n))})]}),children:(0,i.jsx)(R.V,{fill:!0,interactive:!0,intent:"danger",children:"Error"})})};var O=t(86269),_=t(89516),z=t(58905),F=t(43),D=t(17008);function L(){let e=(0,r._)(["\n  query SingleScheduleQuery($selector: ScheduleSelector!) {\n    scheduleOrError(scheduleSelector: $selector) {\n      ... on Schedule {\n        id\n        name\n        pipelineName\n        description\n        scheduleState {\n          id\n          runningCount\n          ticks(limit: 1) {\n            id\n            ...TickTagFragment\n          }\n          runs(limit: 1) {\n            id\n            ...RunTimeFragment\n          }\n          nextTick {\n            timestamp\n          }\n        }\n        partitionSet {\n          id\n          name\n        }\n        ...ScheduleSwitchFragment\n      }\n    }\n  }\n\n  ","\n  ","\n  ","\n"]);return L=function(){return e},e}let M="60px 1fr 1fr 76px 148px 210px 92px",$="1fr 1fr 76px 148px 210px 92px",q=e=>{let{name:n,repoAddress:t,checked:r,onToggleChecked:o,showCheckboxColumn:v,scheduleState:C,start:N,height:R}=e,L=(0,S.Ux)(t),[M,$]=(0,s.t)(K,{variables:{selector:{repositoryName:t.name,repositoryLocationName:t.location,scheduleName:n}},notifyOnNetworkStatusChange:!0});(0,T.Hu)($,"SingleScheduleQuery"),(0,y.v5)(M),(0,w.C4)($,w.dT);let{data:q}=$,U=f.useMemo(()=>(null==q?void 0:q.scheduleOrError.__typename)!=="Schedule"?null:q.scheduleOrError,[q]),Z=!!(U&&(0,S.E8)(L,U.pipelineName)),V=U?(0,_.A)(U.cronSchedule,U.executionTimezone||"UTC"):"",J=f.useMemo(()=>{let{hasStartPermission:e,hasStopPermission:n,status:t}=C;return t!==k.ynu.RUNNING||n?t!==k.ynu.STOPPED||e?{disabled:!1}:{disabled:!0,message:"You do not have permission to start this schedule"}:{disabled:!0,message:"You do not have permission to stop this schedule"}},[C]),Q=null==U?void 0:U.scheduleState.ticks[0];return(0,i.jsx)(D.X2,{$height:R,$start:N,children:(0,i.jsxs)(B,{border:"bottom",$showCheckboxColumn:v,children:[v?(0,i.jsx)(D.E5,{children:(0,i.jsx)(l.u,{canShow:J.disabled,content:J.message||"",placement:"top",children:(0,i.jsx)(a.X,{disabled:J.disabled,checked:r,onChange:e=>{if(o&&e.target instanceof HTMLInputElement){let{checked:n}=e.target;o({checked:n,shiftKey:e.nativeEvent instanceof MouseEvent&&e.nativeEvent.getModifierState("Shift")})}}})})}):null,(0,i.jsx)(D.E5,{children:(0,i.jsxs)(c.x,{flex:{direction:"column",gap:4},children:[(0,i.jsx)("span",{style:{fontWeight:500},children:(0,i.jsx)(j.rU,{to:(0,b.$U)(t,"/schedules/".concat(n)),children:(0,i.jsx)(d.g,{text:n})})}),U?(0,i.jsx)(u.YS,{children:(0,i.jsx)(I.h,{showIcon:!0,size:"small",pipelineName:U.pipelineName,pipelineHrefContext:t,isJob:Z})}):null]})}),(0,i.jsx)(D.E5,{children:U?(0,i.jsxs)(c.x,{flex:{direction:"column",gap:4},children:[(0,i.jsx)(H,{style:{maxWidth:"100%"},children:(0,i.jsx)(l.u,{position:"top-left",content:U.cronSchedule,display:"block",children:(0,i.jsx)("div",{style:{color:p.Ep(),overflow:"hidden",whiteSpace:"nowrap",maxWidth:"100%",textOverflow:"ellipsis"},title:V,children:V})})}),U.scheduleState.nextTick&&U.scheduleState.status===k.ynu.RUNNING?(0,i.jsx)(u.YS,{children:(0,i.jsxs)("div",{style:{overflow:"hidden",whiteSpace:"nowrap",maxWidth:"100%",textOverflow:"ellipsis"},children:["Next tick:\xa0",(0,i.jsx)(O.v,{timestamp:U.scheduleState.nextTick.timestamp,timezone:U.executionTimezone,timeFormat:{showSeconds:!1,showTimezone:!0}})]})}):null]}):(0,i.jsx)(y.mq,{queryResult:$})}),(0,i.jsx)(D.E5,{children:U?(0,i.jsxs)(c.x,{flex:{direction:"column",gap:4},children:[(0,i.jsx)(P.M,{repoAddress:t,schedule:U},n),A(U.scheduleState.status,U.scheduleState.runningCount)]}):null}),(0,i.jsx)(D.E5,{children:Q?(0,i.jsx)("div",{children:(0,i.jsx)(z.a,{tick:Q})}):(0,i.jsx)(y.mq,{queryResult:$})}),(0,i.jsx)(D.E5,{children:(null==U?void 0:U.scheduleState)&&(null==U?void 0:U.scheduleState.runs[0])?(0,i.jsx)(E.Z,{run:U.scheduleState.runs[0],name:n,showButton:!1,showHover:!0,showSummary:!1}):(0,i.jsx)(y.mq,{queryResult:$})}),(0,i.jsx)(D.E5,{children:(null==U?void 0:U.partitionSet)?(0,i.jsx)(h.J,{content:(0,i.jsxs)(x.v2,{children:[(0,i.jsx)(F.U,{text:"View partition history",icon:"dynamic_feed",target:"_blank",to:(0,b.$U)(t,"/".concat(Z?"jobs":"pipelines","/").concat(U.pipelineName,"/partitions"))}),(0,i.jsx)(F.U,{text:"Launch partition backfill",icon:"add_circle",target:"_blank",to:(0,b.$U)(t,"/".concat(Z?"jobs":"pipelines","/").concat(U.pipelineName,"/partitions"))})]}),position:"bottom-left",children:(0,i.jsx)(m.zx,{icon:(0,i.jsx)(g.JO,{name:"expand_more"})})}):(0,i.jsx)("span",{style:{color:p.$()},children:"â€“"})})]})})},U=e=>{let{checkbox:n}=e;return(0,i.jsxs)(D.VJ,{templateColumns:n?M:$,sticky:!0,children:[n?(0,i.jsx)(D.qN,{children:(0,i.jsx)("div",{style:{position:"relative",top:"-1px"},children:n})}):null,(0,i.jsx)(D.qN,{children:"Schedule name"}),(0,i.jsx)(D.qN,{children:"Schedule"}),(0,i.jsx)(D.qN,{children:"Running"}),(0,i.jsx)(D.qN,{children:"Last tick"}),(0,i.jsx)(D.qN,{children:"Last run"}),(0,i.jsx)(D.qN,{children:"Actions"})]})},B=(0,v.ZP)(c.x).withConfig({componentId:"sc-f1848bf2-0"})(["display:grid;grid-template-columns:",";height:100%;"],e=>{let{$showCheckboxColumn:n}=e;return n?M:$}),H=v.ZP.div.withConfig({componentId:"sc-f1848bf2-1"})(["max-width:100%;.bp4-popover2-target{max-width:100%;:focus{outline:none;}}"]),K=(0,o.Ps)(L(),C.dY,N.$X,P.J)},53029:function(e,n,t){t.d(n,{KF:function(){return z},Rx:function(){return _},W_:function(){return D}});var r=t(73235),i=t(52322),s=t(3842),o=t(89130),l=t(35002),a=t(37504),c=t(14934),d=t(53664),u=t(35292),p=t(39013),h=t(43212),x=t(2784),m=t(47933),g=t(35505),f=t(83738),j=t(10539),v=t(16336),y=t(88257),S=t(60648),b=t(77837),w=t(34219),k=t(33182),E=t(55546),C=t(6265),T=t(69698),I=t(75306),N=t(58905),P=t(17008);function R(){let e=(0,r._)(["\n  query SingleSensorQuery($selector: SensorSelector!) {\n    sensorOrError(sensorSelector: $selector) {\n      ... on Sensor {\n        id\n        description\n        name\n        targets {\n          pipelineName\n        }\n        metadata {\n          assetKeys {\n            path\n          }\n        }\n        minIntervalSeconds\n        description\n        sensorState {\n          id\n          runningCount\n          ticks(limit: 1) {\n            id\n            ...TickTagFragment\n          }\n          runs(limit: 1) {\n            id\n            ...RunTimeFragment\n          }\n          nextTick {\n            timestamp\n          }\n        }\n        ...SensorSwitchFragment\n      }\n    }\n  }\n\n  ","\n  ","\n  ","\n"]);return R=function(){return e},e}let A="1.5fr 150px 1fr 76px 120px 148px 180px",O="60px ".concat(A),_=e=>{let{name:n,repoAddress:t,checked:r,onToggleChecked:o,showCheckboxColumn:g,sensorState:b,start:k,height:R}=e,[A,O]=(0,s.t)(L,{variables:{selector:{repositoryName:t.name,repositoryLocationName:t.location,sensorName:n}}});(0,w.Hu)(O,"SingleSensorQuery");let[_,z]=(0,s.t)(C.Z,{variables:{sensorSelector:{repositoryName:t.name,repositoryLocationName:t.location,sensorName:n}}});(0,w.Hu)(z,"SensorAssetSelectionQuery"),(0,f.v5)(x.useCallback(()=>{A(),_()},[A,_])),(0,v.C4)(O,v.dT),(0,v.C4)(z,v.dT);let{data:M}=O,$=x.useMemo(()=>(null==M?void 0:M.sensorOrError.__typename)!=="Sensor"?null:M.sensorOrError,[M]),q=x.useMemo(()=>{let{hasStartPermission:e,hasStopPermission:n,status:t}=b;return t!==y.ynu.RUNNING||n?t!==y.ynu.STOPPED||e?{disabled:!1}:{disabled:!0,message:"You do not have permission to start this sensor"}:{disabled:!0,message:"You do not have permission to stop this sensor"}},[b]),U=null==$?void 0:$.sensorState.ticks[0],B=null==$?void 0:$.sensorType,H=B?D[B]:null;return(0,i.jsx)(P.X2,{$height:R,$start:k,children:(0,i.jsxs)(F,{border:"bottom",$showCheckboxColumn:g,children:[g?(0,i.jsx)(P.E5,{children:(0,i.jsx)(l.u,{canShow:q.disabled,content:q.message||"",placement:"top",children:(0,i.jsx)(a.X,{disabled:q.disabled,checked:r,onChange:e=>{if(o&&e.target instanceof HTMLInputElement){let{checked:n}=e.target;o({checked:n,shiftKey:e.nativeEvent instanceof MouseEvent&&e.nativeEvent.getModifierState("Shift")})}}})})}):null,(0,i.jsx)(P.E5,{children:(0,i.jsxs)(c.x,{flex:{direction:"column",gap:4},children:[(0,i.jsx)("span",{style:{fontWeight:500},children:(0,i.jsx)(m.rU,{to:(0,j.$U)(t,"/sensors/".concat(n)),children:(0,i.jsx)(d.g,{text:n})})}),(0,i.jsx)("div",{style:{maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis"},children:(0,i.jsx)(u.YS,{style:{color:p.$(),whiteSpace:"nowrap"},children:null==$?void 0:$.description})})]})}),(0,i.jsx)(P.E5,{children:(0,i.jsx)("div",{children:H?H.description?(0,i.jsx)(l.u,{content:H.description,children:(0,i.jsx)(h.V,{icon:H.icon,children:H.name})}):(0,i.jsx)(h.V,{icon:H.icon,children:H.name}):null})}),(0,i.jsx)(P.E5,{children:(0,i.jsx)(c.x,{flex:{direction:"column",gap:4},style:{fontSize:"12px"},children:$?(0,i.jsx)(I.D,{targets:$.targets,repoAddress:t,selectionQueryResult:z,sensorType:$.sensorType}):null})}),(0,i.jsx)(P.E5,{children:$?(0,i.jsx)(c.x,{flex:{direction:"column",gap:4},children:(0,i.jsx)(T.c,{repoAddress:t,sensor:$},n)}):null}),(0,i.jsx)(P.E5,{children:$?(0,i.jsx)("div",{style:{color:p.Ep()},children:(0,E.F)($.minIntervalSeconds)}):(0,i.jsx)(f.mq,{queryResult:O})}),(0,i.jsx)(P.E5,{children:U?(0,i.jsx)("div",{children:(0,i.jsx)(N.a,{tick:U})}):(0,i.jsx)(f.mq,{queryResult:O})}),(0,i.jsx)(P.E5,{children:(null==$?void 0:$.sensorState)&&(null==$?void 0:$.sensorState.runs[0])?(0,i.jsx)(S.Z,{run:$.sensorState.runs[0],name:n,showButton:!1,showHover:!0,showSummary:!1}):(0,i.jsx)(f.mq,{queryResult:O})})]})})},z=e=>{let{checkbox:n}=e;return(0,i.jsxs)(P.VJ,{templateColumns:n?O:A,sticky:!0,children:[n?(0,i.jsx)(P.qN,{children:(0,i.jsx)("div",{style:{position:"relative",top:"-1px"},children:n})}):null,(0,i.jsx)(P.qN,{children:"Name"}),(0,i.jsx)(P.qN,{children:"Type"}),(0,i.jsx)(P.qN,{children:"Target"}),(0,i.jsx)(P.qN,{children:"Running"}),(0,i.jsx)(P.qN,{children:"Frequency"}),(0,i.jsx)(P.qN,{children:"Last tick"}),(0,i.jsx)(P.qN,{children:"Last run"})]})},F=(0,g.ZP)(c.x).withConfig({componentId:"sc-8525a779-0"})(["display:grid;grid-template-columns:",";height:100%;"],e=>{let{$showCheckboxColumn:n}=e;return n?O:A}),D={[y.dEY.ASSET]:{name:"Asset",icon:"asset",description:"Asset sensors instigate runs when a materialization occurs"},[y.dEY.AUTO_MATERIALIZE]:{name:"Auto-materialize",icon:"materialization",description:"Auto-materialize sensors trigger runs based on auto-materialize policies defined on assets."},[y.dEY.AUTOMATION]:{name:"Automation",icon:"materialization",description:"Automation sensors trigger runs based on conditions defined on assets."},[y.dEY.FRESHNESS_POLICY]:{name:"Freshness policy",icon:"hourglass",description:"Freshness sensors check the freshness of assets on each tick, then perform an action in response to that status"},[y.dEY.MULTI_ASSET]:{name:"Multi-asset",icon:"multi_asset",description:"Multi asset sensors trigger job executions based on multiple asset materialization event streams"},[y.dEY.RUN_STATUS]:{name:"Run status",icon:"alternate_email",description:"Run status sensors react to run status"},[y.dEY.STANDARD]:{name:"Standard",icon:"sensors",description:null},[y.dEY.UNKNOWN]:{name:"Standard",icon:"sensors",description:null}},L=(0,o.Ps)(R(),b.dY,k.$X,T.U)}}]);
//# sourceMappingURL=1872.fcf9ce3f722633d8.js.map