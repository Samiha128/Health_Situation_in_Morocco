{"version":3,"file":"static/chunks/6023.69f6e1f2bd514abc.js","mappings":"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","sources":["webpack://_N_E/../ui-core/src/instance/VirtualizedInstanceConcurrencyTable.tsx","webpack://_N_E/../ui-core/src/instance/InstanceConcurrency.tsx","webpack://_N_E/../ui-core/src/nav/InstanceWarningIcon.tsx","webpack://_N_E/../ui-core/src/nav/WorkspaceStatus.tsx","webpack://_N_E/../ui-core/src/instance/InstanceTabs.tsx"],"sourcesContent":["import {gql, useLazyQuery} from '@apollo/client';\nimport {\n  Box,\n  Button,\n  ButtonLink,\n  Icon,\n  Menu,\n  MenuItem,\n  Popover,\n  Tag,\n} from '@dagster-io/ui-components';\nimport {useVirtualizer} from '@tanstack/react-virtual';\nimport {useRef} from 'react';\nimport styled from 'styled-components';\n\nimport {\n  SingleConcurrencyKeyQuery,\n  SingleConcurrencyKeyQueryVariables,\n} from './types/VirtualizedInstanceConcurrencyTable.types';\nimport {FIFTEEN_SECONDS, useQueryRefreshAtInterval} from '../app/QueryRefresh';\nimport {useBlockTraceOnQueryResult} from '../performance/TraceContext';\nimport {Container, HeaderCell, HeaderRow, Inner, Row, RowCell} from '../ui/VirtualizedTable';\nimport {LoadingOrNone, useDelayedRowQuery} from '../workspace/VirtualizedWorkspaceTable';\n\nconst TEMPLATE_COLUMNS = '1fr 150px 150px 150px 150px 150px';\n\nexport const ConcurrencyTable = ({\n  concurrencyKeys,\n  onEdit,\n  onDelete,\n  onSelect,\n}: {\n  concurrencyKeys: string[];\n  onEdit: (key: string) => void;\n  onDelete: (key: string) => void;\n  onSelect: (key: string | undefined) => void;\n}) => {\n  const parentRef = useRef<HTMLDivElement | null>(null);\n\n  const rowVirtualizer = useVirtualizer({\n    count: concurrencyKeys.length,\n    getScrollElement: () => parentRef.current,\n    estimateSize: () => 64,\n    overscan: 10,\n  });\n\n  const totalHeight = rowVirtualizer.getTotalSize();\n  const items = rowVirtualizer.getVirtualItems();\n\n  return (\n    <div style={{overflow: 'hidden'}}>\n      <Container ref={parentRef}>\n        <ConcurrencyHeader />\n        <Inner $totalHeight={totalHeight}>\n          {items.map(({index, key, size, start}) => {\n            const concurrencyKey = concurrencyKeys[index]!;\n            return (\n              <ConcurrencyRow\n                key={key}\n                concurrencyKey={concurrencyKey}\n                onEdit={onEdit}\n                onDelete={onDelete}\n                onSelect={onSelect}\n                height={size}\n                start={start}\n              />\n            );\n          })}\n        </Inner>\n      </Container>\n    </div>\n  );\n};\n\nconst ConcurrencyHeader = () => {\n  return (\n    <HeaderRow templateColumns={TEMPLATE_COLUMNS} sticky>\n      <HeaderCell>Concurrency key</HeaderCell>\n      <HeaderCell>Total slots</HeaderCell>\n      <HeaderCell>Assigned steps</HeaderCell>\n      <HeaderCell>Pending steps</HeaderCell>\n      <HeaderCell>All steps</HeaderCell>\n      <HeaderCell></HeaderCell>\n    </HeaderRow>\n  );\n};\nconst ConcurrencyRow = ({\n  concurrencyKey,\n  onEdit,\n  onDelete,\n  onSelect,\n  height,\n  start,\n}: {\n  concurrencyKey: string;\n  onDelete: (key: string) => void;\n  onEdit: (key: string) => void;\n  onSelect: (key: string | undefined) => void;\n  height: number;\n  start: number;\n}) => {\n  const [queryJob, queryResult] = useLazyQuery<\n    SingleConcurrencyKeyQuery,\n    SingleConcurrencyKeyQueryVariables\n  >(SINGLE_CONCURRENCY_KEY_QUERY, {\n    variables: {concurrencyKey},\n  });\n\n  useBlockTraceOnQueryResult(queryResult, 'SingleConcurrencyKeyQuery');\n  useDelayedRowQuery(queryJob);\n  useQueryRefreshAtInterval(queryResult, FIFTEEN_SECONDS);\n\n  const {data} = queryResult;\n  const limit = data?.instance.concurrencyLimit;\n\n  return (\n    <Row $height={height} $start={start}>\n      <RowGrid border=\"bottom\">\n        <RowCell>\n          <>{concurrencyKey}</>\n        </RowCell>\n        <RowCell>\n          {limit ? <div>{limit.slotCount}</div> : <LoadingOrNone queryResult={queryResult} />}\n        </RowCell>\n        <RowCell>\n          {limit ? (\n            <>{limit.pendingSteps.filter((x) => !!x.assignedTimestamp).length}</>\n          ) : (\n            <LoadingOrNone queryResult={queryResult} />\n          )}\n        </RowCell>\n        <RowCell>\n          {limit ? (\n            <>{limit.pendingSteps.filter((x) => !x.assignedTimestamp).length}</>\n          ) : (\n            <LoadingOrNone queryResult={queryResult} />\n          )}\n        </RowCell>\n        <RowCell>\n          {limit ? (\n            <Box flex={{direction: 'row', gap: 16, alignItems: 'center'}}>\n              <span>{limit.pendingSteps.length}</span>\n              <Tag intent=\"primary\" interactive>\n                <ButtonLink\n                  onClick={() => {\n                    onSelect(limit.concurrencyKey);\n                  }}\n                >\n                  View all\n                </ButtonLink>\n              </Tag>\n            </Box>\n          ) : (\n            <LoadingOrNone queryResult={queryResult} />\n          )}\n        </RowCell>\n        <RowCell>\n          <ConcurrencyLimitActionMenu\n            concurrencyKey={concurrencyKey}\n            onEdit={onEdit}\n            onDelete={onDelete}\n          />\n        </RowCell>\n      </RowGrid>\n    </Row>\n  );\n};\n\nconst ConcurrencyLimitActionMenu = ({\n  concurrencyKey,\n  onDelete,\n  onEdit,\n}: {\n  concurrencyKey: string;\n  onEdit: (key: string) => void;\n  onDelete: (key: string) => void;\n}) => {\n  return (\n    <Popover\n      content={\n        <Menu>\n          <MenuItem icon=\"edit\" text=\"Edit\" onClick={() => onEdit(concurrencyKey)} />\n          <MenuItem\n            icon=\"delete\"\n            intent=\"danger\"\n            text=\"Delete\"\n            onClick={() => onDelete(concurrencyKey)}\n          />\n        </Menu>\n      }\n      position=\"bottom-left\"\n    >\n      <Button icon={<Icon name=\"expand_more\" />} />\n    </Popover>\n  );\n};\n\nconst SINGLE_CONCURRENCY_KEY_QUERY = gql`\n  query SingleConcurrencyKeyQuery($concurrencyKey: String!) {\n    instance {\n      id\n      concurrencyLimit(concurrencyKey: $concurrencyKey) {\n        concurrencyKey\n        slotCount\n        claimedSlots {\n          runId\n          stepKey\n        }\n        pendingSteps {\n          runId\n          stepKey\n          enqueuedTimestamp\n          assignedTimestamp\n          priority\n        }\n      }\n    }\n  }\n`;\n\nconst RowGrid = styled(Box)`\n  display: grid;\n  grid-template-columns: ${TEMPLATE_COLUMNS};\n  height: 100%;\n`;\n","import {gql, useMutation, useQuery} from '@apollo/client';\nimport {\n  Box,\n  Button,\n  ButtonLink,\n  Colors,\n  Dialog,\n  DialogBody,\n  DialogFooter,\n  Heading,\n  Icon,\n  Menu,\n  MenuItem,\n  MetadataTableWIP,\n  Mono,\n  NonIdealState,\n  Page,\n  PageHeader,\n  Popover,\n  Spinner,\n  StyledRawCodeMirror,\n  Subheading,\n  Table,\n  Tag,\n  TextInput,\n  Tooltip,\n} from '@dagster-io/ui-components';\nimport * as React from 'react';\nimport {Link} from 'react-router-dom';\n\nimport {InstancePageContext} from './InstancePageContext';\nimport {InstanceTabs} from './InstanceTabs';\nimport {ConcurrencyTable} from './VirtualizedInstanceConcurrencyTable';\nimport {\n  ConcurrencyKeyDetailsQuery,\n  ConcurrencyKeyDetailsQueryVariables,\n  ConcurrencyLimitFragment,\n  ConcurrencyStepFragment,\n  DeleteConcurrencyLimitMutation,\n  DeleteConcurrencyLimitMutationVariables,\n  FreeConcurrencySlotsMutation,\n  FreeConcurrencySlotsMutationVariables,\n  InstanceConcurrencyLimitsQuery,\n  InstanceConcurrencyLimitsQueryVariables,\n  RunQueueConfigFragment,\n  RunsForConcurrencyKeyQuery,\n  RunsForConcurrencyKeyQueryVariables,\n  SetConcurrencyLimitMutation,\n  SetConcurrencyLimitMutationVariables,\n} from './types/InstanceConcurrency.types';\nimport {showSharedToaster} from '../app/DomUtils';\nimport {\n  FIFTEEN_SECONDS,\n  QueryRefreshCountdown,\n  QueryRefreshState,\n  useQueryRefreshAtInterval,\n} from '../app/QueryRefresh';\nimport {COMMON_COLLATOR} from '../app/Util';\nimport {useTrackPageView} from '../app/analytics';\nimport {RunStatus} from '../graphql/types';\nimport {useDocumentTitle} from '../hooks/useDocumentTitle';\nimport {useQueryPersistedState} from '../hooks/useQueryPersistedState';\nimport {useBlockTraceOnQueryResult} from '../performance/TraceContext';\nimport {RunStatusDot} from '../runs/RunStatusDots';\nimport {failedStatuses} from '../runs/RunStatuses';\nimport {titleForRun} from '../runs/RunUtils';\nimport {TimeElapsed} from '../runs/TimeElapsed';\n\nconst DEFAULT_MIN_VALUE = 1;\nconst DEFAULT_MAX_VALUE = 1000;\n\nexport const InstanceConcurrencyPageContent = React.memo(() => {\n  useTrackPageView();\n  useDocumentTitle('Concurrency');\n  const [selectedKey, setSelectedKey] = useQueryPersistedState<string | undefined>({\n    queryKey: 'key',\n  });\n  const queryResult = useQuery<\n    InstanceConcurrencyLimitsQuery,\n    InstanceConcurrencyLimitsQueryVariables\n  >(INSTANCE_CONCURRENCY_LIMITS_QUERY, {\n    notifyOnNetworkStatusChange: true,\n  });\n  useBlockTraceOnQueryResult(queryResult, 'InstanceConcurrencyLimitsQuery');\n\n  const refreshState = useQueryRefreshAtInterval(queryResult, FIFTEEN_SECONDS);\n  const {data} = queryResult;\n\n  return (\n    <div style={{overflowY: 'auto'}}>\n      {data ? (\n        <>\n          <Box margin={{bottom: 64}}>\n            <RunConcurrencyContent\n              refreshState={refreshState}\n              hasRunQueue={!!data?.instance.runQueuingSupported}\n              runQueueConfig={data?.instance.runQueueConfig}\n            />\n          </Box>\n          <ConcurrencyLimits\n            instanceConfig={data.instance.info}\n            concurrencyKeys={data.instance.concurrencyLimits.map((limit) => limit.concurrencyKey)}\n            hasSupport={data.instance.supportsConcurrencyLimits}\n            refetch={queryResult.refetch}\n            minValue={data.instance.minConcurrencyLimitValue}\n            maxValue={data.instance.maxConcurrencyLimitValue}\n            selectedKey={selectedKey}\n            onSelectKey={setSelectedKey}\n          />\n        </>\n      ) : (\n        <Box padding={{vertical: 64}}>\n          <Spinner purpose=\"section\" />\n        </Box>\n      )}\n    </div>\n  );\n});\n\nexport const InstanceConcurrencyPage = () => {\n  const {pageTitle} = React.useContext(InstancePageContext);\n  return (\n    <Page style={{padding: 0}}>\n      <PageHeader\n        title={<Heading>{pageTitle}</Heading>}\n        tabs={<InstanceTabs tab=\"concurrency\" />}\n      />\n      <InstanceConcurrencyPageContent />\n    </Page>\n  );\n};\n\n// Imported via React.lazy, which requires a default export.\n// eslint-disable-next-line import/no-default-export\nexport default InstanceConcurrencyPage;\n\ntype DialogAction =\n  | {\n      actionType: 'add';\n    }\n  | {\n      actionType: 'edit';\n      concurrencyKey: string;\n    }\n  | {\n      actionType: 'delete';\n      concurrencyKey: string;\n    }\n  | undefined;\n\nexport const RunConcurrencyContent = ({\n  hasRunQueue,\n  runQueueConfig,\n  onEdit,\n  refreshState,\n}: {\n  hasRunQueue: boolean;\n  runQueueConfig: RunQueueConfigFragment | null | undefined;\n  refreshState?: QueryRefreshState;\n  onEdit?: () => void;\n}) => {\n  if (!hasRunQueue) {\n    return (\n      <>\n        <Box\n          padding={{vertical: 16, horizontal: 24}}\n          border=\"bottom\"\n          flex={{direction: 'row', alignItems: 'center', justifyContent: 'space-between'}}\n        >\n          <Subheading>Run concurrency</Subheading>\n          {refreshState ? <QueryRefreshCountdown refreshState={refreshState} /> : null}\n        </Box>\n        <Box padding={{vertical: 16, horizontal: 24}}>\n          Run concurrency is not supported with this run coordinator. To enable run concurrency\n          limits, configure your instance to use the <Mono>QueuedRunCoordinator</Mono> in your{' '}\n          <Mono>dagster.yaml</Mono>. See the{' '}\n          <a\n            target=\"_blank\"\n            rel=\"noreferrer\"\n            href=\"https://docs.dagster.io/deployment/dagster-instance#queuedruncoordinator\"\n          >\n            QueuedRunCoordinator documentation\n          </a>{' '}\n          for more information.\n        </Box>\n      </>\n    );\n  }\n\n  const infoContent = (\n    <Box padding={{vertical: 16, horizontal: 24}}>\n      Run concurrency can be set in your run queue settings. See the{' '}\n      <a\n        target=\"_blank\"\n        rel=\"noreferrer\"\n        href=\"https://docs.dagster.io/guides/limiting-concurrency-in-data-pipelines#configuring-run-level-concurrency\"\n      >\n        run concurrency documentation\n      </a>{' '}\n      for more information.\n    </Box>\n  );\n\n  const settings_content = runQueueConfig ? (\n    <MetadataTableWIP>\n      <tbody>\n        <tr>\n          <td>Max concurrent runs:</td>\n          <td>{runQueueConfig.maxConcurrentRuns}</td>\n        </tr>\n        <tr>\n          <td>Tag concurrency limits:</td>\n          <td>\n            {runQueueConfig.tagConcurrencyLimitsYaml ? (\n              <StyledRawCodeMirror\n                value={runQueueConfig.tagConcurrencyLimitsYaml}\n                options={{readOnly: true, lineNumbers: true, mode: 'yaml'}}\n              />\n            ) : (\n              '-'\n            )}\n          </td>\n        </tr>\n      </tbody>\n    </MetadataTableWIP>\n  ) : null;\n\n  return (\n    <>\n      <RunConcurrencyLimitHeader onEdit={onEdit} refreshState={refreshState} />\n      {infoContent}\n      {settings_content}\n    </>\n  );\n};\n\nconst RunConcurrencyLimitHeader = ({\n  onEdit,\n  refreshState,\n}: {\n  onEdit?: () => void;\n  refreshState?: QueryRefreshState;\n}) => (\n  <Box\n    flex={{justifyContent: 'space-between', alignItems: 'center'}}\n    padding={{vertical: 16, horizontal: 24}}\n    border=\"bottom\"\n  >\n    <Subheading>Run concurrency</Subheading>\n    <Box flex={{direction: 'row', alignItems: 'center', gap: 8}}>\n      {refreshState ? <QueryRefreshCountdown refreshState={refreshState} /> : null}\n      {onEdit ? (\n        <Button icon={<Icon name=\"edit\" />} onClick={() => onEdit()}>\n          Edit configuration\n        </Button>\n      ) : null}\n    </Box>\n  </Box>\n);\n\nexport const ConcurrencyLimits = ({\n  instanceConfig,\n  hasSupport,\n  concurrencyKeys,\n  refetch,\n  minValue,\n  maxValue,\n  selectedKey,\n  onSelectKey,\n}: {\n  concurrencyKeys: string[];\n  refetch: () => void;\n  instanceConfig?: string | null;\n  hasSupport?: boolean;\n  maxValue?: number;\n  minValue?: number;\n  selectedKey?: string | null;\n  onSelectKey: (key: string | undefined) => void;\n}) => {\n  const [action, setAction] = React.useState<DialogAction>();\n  const onConcurrencyStepsDialogClose = React.useCallback(() => {\n    onSelectKey(undefined);\n  }, [onSelectKey]);\n\n  const [search, setSearch] = React.useState('');\n\n  const sortedKeys = React.useMemo(() => {\n    return [...concurrencyKeys]\n      .filter((key) => key.includes(search))\n      .sort((a, b) => COMMON_COLLATOR.compare(a, b));\n  }, [concurrencyKeys, search]);\n\n  const onAdd = () => {\n    setAction({actionType: 'add'});\n  };\n  const onEdit = (concurrencyKey: string) => {\n    setAction({actionType: 'edit', concurrencyKey});\n  };\n  const onDelete = (concurrencyKey: string) => {\n    setAction({actionType: 'delete', concurrencyKey});\n  };\n\n  if (!hasSupport && instanceConfig && instanceConfig.includes('SqliteEventLogStorage')) {\n    return (\n      <>\n        <ConcurrencyLimitHeader />\n        <Box margin={24}>\n          <NonIdealState\n            icon=\"error\"\n            title=\"No concurrency support\"\n            description={\n              'This instance does not support global concurrency limits. You will need to ' +\n              'configure a different storage implementation (e.g. Postgres/MySQL) to use this ' +\n              'feature.'\n            }\n          />\n        </Box>\n      </>\n    );\n  } else if (hasSupport === false) {\n    return (\n      <>\n        <ConcurrencyLimitHeader />\n        <Box margin={24}>\n          <NonIdealState\n            icon=\"error\"\n            title=\"No concurrency support\"\n            description={\n              'This instance does not currently support global concurrency limits. You may need to ' +\n              'run `dagster instance migrate` to add the necessary tables to your dagster storage ' +\n              'to support this feature.'\n            }\n          />\n        </Box>\n      </>\n    );\n  }\n\n  return (\n    <Box flex={{direction: 'column'}} style={{overflow: 'auto', height: '100%'}}>\n      <ConcurrencyLimitHeader onAdd={onAdd} search={search} setSearch={setSearch} />\n      {concurrencyKeys.length === 0 ? (\n        <Box margin={24}>\n          <NonIdealState\n            icon=\"error\"\n            title=\"No concurrency limits\"\n            description={\n              <>\n                No concurrency limits have been configured for this instance.&nbsp;\n                <ButtonLink onClick={() => onAdd()}>Add a concurrency limit</ButtonLink>.\n              </>\n            }\n          />\n        </Box>\n      ) : (\n        <ConcurrencyTable\n          concurrencyKeys={sortedKeys}\n          onDelete={onDelete}\n          onEdit={onEdit}\n          onSelect={onSelectKey}\n        />\n      )}\n      <AddConcurrencyLimitDialog\n        open={action?.actionType === 'add'}\n        onClose={() => setAction(undefined)}\n        onComplete={refetch}\n        minValue={minValue ?? DEFAULT_MIN_VALUE}\n        maxValue={maxValue ?? DEFAULT_MAX_VALUE}\n      />\n      <DeleteConcurrencyLimitDialog\n        concurrencyKey={action && action.actionType === 'delete' ? action.concurrencyKey : ''}\n        open={action?.actionType === 'delete'}\n        onClose={() => setAction(undefined)}\n        onComplete={refetch}\n      />\n      <EditConcurrencyLimitDialog\n        open={action?.actionType === 'edit'}\n        onClose={() => setAction(undefined)}\n        onComplete={refetch}\n        concurrencyKey={action?.actionType === 'edit' ? action.concurrencyKey : ''}\n        minValue={minValue ?? DEFAULT_MIN_VALUE}\n        maxValue={maxValue ?? DEFAULT_MAX_VALUE}\n      />\n      <ConcurrencyStepsDialog\n        title={\n          <span>\n            Concurrency steps for <strong>{selectedKey}</strong>\n          </span>\n        }\n        onClose={onConcurrencyStepsDialogClose}\n        concurrencyKey={selectedKey}\n        onUpdate={refetch}\n      />\n    </Box>\n  );\n};\n\nconst ConcurrencyLimitHeader = ({\n  onAdd,\n  setSearch,\n  search,\n}: {\n  onAdd?: () => void;\n} & (\n  | {\n      setSearch: (searchString: string) => void;\n      search: string;\n    }\n  | {setSearch?: never; search?: never}\n)) => {\n  return (\n    <Box flex={{direction: 'column'}}>\n      <Box\n        flex={{justifyContent: 'space-between', alignItems: 'center'}}\n        padding={{vertical: 16, horizontal: 24}}\n        border=\"top-and-bottom\"\n      >\n        <Box flex={{alignItems: 'center', direction: 'row', gap: 8}}>\n          <Subheading>Global op/asset concurrency</Subheading>\n          <Tag>Experimental</Tag>\n        </Box>\n        {onAdd ? (\n          <Button icon={<Icon name=\"add_circle\" />} onClick={() => onAdd()}>\n            Add concurrency limit\n          </Button>\n        ) : null}\n      </Box>\n      {setSearch ? (\n        <Box flex={{direction: 'row'}} padding={{vertical: 16, horizontal: 24}} border=\"bottom\">\n          <TextInput\n            value={search || ''}\n            style={{width: '30vw', minWidth: 150, maxWidth: 400}}\n            placeholder=\"Filter concurrency keys\"\n            onChange={(e: React.ChangeEvent<any>) => setSearch(e.target.value)}\n          />\n        </Box>\n      ) : null}\n    </Box>\n  );\n};\n\nconst isValidLimit = (\n  concurrencyLimit?: string,\n  minLimitValue: number = DEFAULT_MIN_VALUE,\n  maxLimitValue: number = DEFAULT_MAX_VALUE,\n) => {\n  if (!concurrencyLimit) {\n    return false;\n  }\n  const value = parseInt(concurrencyLimit);\n  if (isNaN(value)) {\n    return false;\n  }\n  if (String(value) !== concurrencyLimit.trim()) {\n    return false;\n  }\n  return value >= minLimitValue && value <= maxLimitValue;\n};\n\nconst AddConcurrencyLimitDialog = ({\n  open,\n  onClose,\n  onComplete,\n  maxValue,\n  minValue,\n}: {\n  open: boolean;\n  onClose: () => void;\n  onComplete: () => void;\n  maxValue: number;\n  minValue: number;\n}) => {\n  const [isSubmitting, setIsSubmitting] = React.useState(false);\n  const [limitInput, setLimitInput] = React.useState('');\n  const [keyInput, setKeyInput] = React.useState('');\n\n  React.useEffect(() => {\n    setLimitInput('');\n    setKeyInput('');\n  }, [open]);\n\n  const [setConcurrencyLimit] = useMutation<\n    SetConcurrencyLimitMutation,\n    SetConcurrencyLimitMutationVariables\n  >(SET_CONCURRENCY_LIMIT_MUTATION);\n\n  const save = async () => {\n    setIsSubmitting(true);\n    await setConcurrencyLimit({\n      variables: {concurrencyKey: keyInput, limit: parseInt(limitInput.trim())},\n    });\n    setIsSubmitting(false);\n    onComplete();\n    onClose();\n  };\n\n  return (\n    <Dialog isOpen={open} title=\"Add concurrency limit\" onClose={onClose}>\n      <DialogBody>\n        <Box margin={{bottom: 4}}>Concurrency key:</Box>\n        <Box margin={{bottom: 16}}>\n          <TextInput\n            value={keyInput || ''}\n            onChange={(e) => setKeyInput(e.target.value)}\n            placeholder=\"Concurrency key\"\n          />\n        </Box>\n        <Box margin={{bottom: 4}}>\n          Concurrency limit ({minValue}-{maxValue}):\n        </Box>\n        <Box>\n          <TextInput\n            value={limitInput || ''}\n            onChange={(e) => setLimitInput(e.target.value)}\n            placeholder={`${minValue} - ${maxValue}`}\n          />\n        </Box>\n      </DialogBody>\n      <DialogFooter>\n        <Button intent=\"none\" onClick={onClose}>\n          Cancel\n        </Button>\n        <Button\n          intent=\"primary\"\n          onClick={save}\n          disabled={\n            !isValidLimit(limitInput.trim(), minValue, maxValue) || !keyInput || isSubmitting\n          }\n        >\n          {isSubmitting ? 'Adding...' : 'Add limit'}\n        </Button>\n      </DialogFooter>\n    </Dialog>\n  );\n};\n\nconst EditConcurrencyLimitDialog = ({\n  concurrencyKey,\n  open,\n  onClose,\n  onComplete,\n  minValue,\n  maxValue,\n}: {\n  concurrencyKey: string;\n  open: boolean;\n  onClose: () => void;\n  onComplete: () => void;\n  minValue: number;\n  maxValue: number;\n}) => {\n  const [isSubmitting, setIsSubmitting] = React.useState(false);\n  const [limitInput, setLimitInput] = React.useState('');\n\n  React.useEffect(() => {\n    setLimitInput('');\n  }, [open]);\n\n  const [setConcurrencyLimit] = useMutation<\n    SetConcurrencyLimitMutation,\n    SetConcurrencyLimitMutationVariables\n  >(SET_CONCURRENCY_LIMIT_MUTATION);\n\n  const save = async () => {\n    setIsSubmitting(true);\n    await setConcurrencyLimit({\n      variables: {concurrencyKey, limit: parseInt(limitInput!.trim())},\n    });\n    setIsSubmitting(false);\n    onComplete();\n    onClose();\n  };\n\n  const title = (\n    <>\n      Edit <Mono>{concurrencyKey}</Mono>\n    </>\n  );\n\n  return (\n    <Dialog isOpen={open} title={title} onClose={onClose}>\n      <DialogBody>\n        <Box margin={{bottom: 4}}>Concurrency key:</Box>\n        <Box margin={{bottom: 16}}>\n          <strong>{concurrencyKey}</strong>\n        </Box>\n        <Box margin={{bottom: 4}}>\n          Concurrency limit ({minValue}-{maxValue}):\n        </Box>\n        <Box>\n          <TextInput\n            value={limitInput || ''}\n            onChange={(e) => setLimitInput(e.target.value)}\n            placeholder={`${minValue} - ${maxValue}`}\n          />\n        </Box>\n      </DialogBody>\n      <DialogFooter>\n        <Button intent=\"none\" onClick={onClose}>\n          Close\n        </Button>\n        {isSubmitting ? (\n          <Button intent=\"primary\" disabled>\n            Updating...\n          </Button>\n        ) : (\n          <Button\n            intent=\"primary\"\n            onClick={save}\n            disabled={!isValidLimit(limitInput.trim(), minValue, maxValue)}\n          >\n            Update limit\n          </Button>\n        )}\n      </DialogFooter>\n    </Dialog>\n  );\n};\n\nconst DeleteConcurrencyLimitDialog = ({\n  concurrencyKey,\n  open,\n  onClose,\n  onComplete,\n}: {\n  concurrencyKey: string;\n  open: boolean;\n  onClose: () => void;\n  onComplete: () => void;\n}) => {\n  const [isSubmitting, setIsSubmitting] = React.useState(false);\n\n  const [deleteConcurrencyLimit] = useMutation<\n    DeleteConcurrencyLimitMutation,\n    DeleteConcurrencyLimitMutationVariables\n  >(DELETE_CONCURRENCY_LIMIT_MUTATION);\n\n  const save = async () => {\n    setIsSubmitting(true);\n    await deleteConcurrencyLimit({variables: {concurrencyKey}});\n    setIsSubmitting(false);\n    onComplete();\n    onClose();\n  };\n\n  const title = (\n    <>\n      Delete <Mono>{concurrencyKey}</Mono>\n    </>\n  );\n  return (\n    <Dialog isOpen={open} title={title} onClose={onClose}>\n      <DialogBody>\n        Delete concurrency limit&nbsp;<strong>{concurrencyKey}</strong>?\n      </DialogBody>\n      <DialogFooter>\n        <Button intent=\"none\" onClick={onClose}>\n          Close\n        </Button>\n        {isSubmitting ? (\n          <Button intent=\"danger\" disabled>\n            Deleting...\n          </Button>\n        ) : (\n          <Button intent=\"danger\" onClick={save}>\n            Delete limit\n          </Button>\n        )}\n      </DialogFooter>\n    </Dialog>\n  );\n};\n\nconst ConcurrencyActionMenu = ({\n  pendingStep,\n  onUpdate,\n}: {\n  pendingStep: ConcurrencyStepFragment;\n  onUpdate: () => void;\n}) => {\n  const [freeSlots] = useMutation<\n    FreeConcurrencySlotsMutation,\n    FreeConcurrencySlotsMutationVariables\n  >(FREE_CONCURRENCY_SLOTS_MUTATION);\n\n  return (\n    <Popover\n      content={\n        <Menu>\n          <MenuItem\n            key=\"free-concurrency-slots-step\"\n            icon=\"status\"\n            text=\"Free concurrency slot for step\"\n            onClick={async () => {\n              const resp = await freeSlots({\n                variables: {runId: pendingStep.runId, stepKey: pendingStep.stepKey},\n              });\n              if (resp.data?.freeConcurrencySlots) {\n                onUpdate();\n                await showSharedToaster({\n                  intent: 'success',\n                  icon: 'copy_to_clipboard_done',\n                  message: 'Freed concurrency slot',\n                });\n              }\n            }}\n          />\n          <MenuItem\n            key=\"free-concurrency-slots-run\"\n            icon=\"status\"\n            text=\"Free all concurrency slots for run\"\n            onClick={async () => {\n              await showSharedToaster({message: 'Freeing concurrency slots...'});\n              const resp = await freeSlots({variables: {runId: pendingStep.runId}});\n              if (resp.data?.freeConcurrencySlots) {\n                onUpdate();\n                await showSharedToaster({\n                  intent: 'success',\n                  icon: 'copy_to_clipboard_done',\n                  message: 'Freed concurrency slots',\n                });\n              }\n            }}\n          />\n        </Menu>\n      }\n      position=\"bottom-right\"\n    >\n      <Button rightIcon={<Icon name=\"expand_more\" />}>Actions</Button>\n    </Popover>\n  );\n};\n\nconst ConcurrencyStepsDialog = ({\n  concurrencyKey,\n  onClose,\n  title,\n  onUpdate,\n}: {\n  concurrencyKey?: string | null;\n  title: string | React.ReactNode;\n  onClose: () => void;\n  onUpdate: () => void;\n}) => {\n  const queryResult = useQuery<ConcurrencyKeyDetailsQuery, ConcurrencyKeyDetailsQueryVariables>(\n    CONCURRENCY_KEY_DETAILS_QUERY,\n    {\n      variables: {\n        concurrencyKey: concurrencyKey || '',\n      },\n      skip: !concurrencyKey,\n    },\n  );\n  useBlockTraceOnQueryResult(queryResult, 'ConcurrencyKeyDetailsQuery', {skip: !concurrencyKey});\n  useQueryRefreshAtInterval(queryResult, FIFTEEN_SECONDS);\n  const {data} = queryResult;\n  const refetch = React.useCallback(() => {\n    queryResult.refetch();\n    onUpdate();\n  }, [queryResult, onUpdate]);\n\n  return (\n    <Dialog\n      isOpen={!!concurrencyKey}\n      title={title}\n      onClose={onClose}\n      style={{\n        minWidth: '400px',\n        maxWidth: '1000px',\n        width: '90vw',\n        maxHeight: '90vh',\n      }}\n    >\n      <Box padding={{vertical: 16}} flex={{grow: 1}} style={{overflowY: 'auto'}}>\n        {!data ? (\n          <Box padding={{vertical: 64}}>\n            <Spinner purpose=\"section\" />\n          </Box>\n        ) : (\n          <PendingStepsTable keyInfo={data.instance.concurrencyLimit} refresh={refetch} />\n        )}\n      </Box>\n      <DialogFooter>\n        <Button intent=\"none\" onClick={onClose}>\n          Close\n        </Button>\n      </DialogFooter>\n    </Dialog>\n  );\n};\n\nconst PendingStepsTable = ({\n  keyInfo,\n  refresh,\n}: {\n  keyInfo: ConcurrencyLimitFragment;\n  refresh: () => void;\n}) => {\n  const runIds = [...new Set(keyInfo.pendingSteps.map((step) => step.runId))];\n  const queryResult = useQuery<RunsForConcurrencyKeyQuery, RunsForConcurrencyKeyQueryVariables>(\n    RUNS_FOR_CONCURRENCY_KEY_QUERY,\n    {\n      variables: {\n        filter: {runIds},\n      },\n      skip: !keyInfo.pendingSteps.length,\n    },\n  );\n  useBlockTraceOnQueryResult(queryResult, 'RunsForConcurrencyKeyQuery', {\n    skip: !keyInfo.pendingSteps.length,\n  });\n  const statusByRunId: {[id: string]: RunStatus} = {};\n  const runs =\n    queryResult.data?.pipelineRunsOrError.__typename === 'Runs'\n      ? queryResult.data.pipelineRunsOrError.results\n      : [];\n  runs.forEach((run) => {\n    statusByRunId[run.id] = run.status;\n  });\n\n  const steps = [...keyInfo.pendingSteps];\n  steps.sort((a, b) => {\n    if (a.priority && b.priority && a.priority !== b.priority) {\n      return a.priority - b.priority;\n    }\n    return a.enqueuedTimestamp - b.enqueuedTimestamp;\n  });\n  const assignedSteps = steps.filter((step) => !!step.assignedTimestamp);\n  const pendingSteps = steps.filter((step) => !step.assignedTimestamp);\n\n  const tableHeader = (\n    <thead>\n      <tr>\n        <th>Run ID</th>\n        <th>Step key</th>\n        <th>Assigned</th>\n        <th>Queued</th>\n        <th>\n          <Box flex={{alignItems: 'center', direction: 'row', gap: 4}}>\n            Priority\n            <Tooltip\n              placement=\"top\"\n              content=\"Priority can be set on each op/asset using the 'dagster/priority' tag. Higher priority steps will be assigned slots first.\"\n            >\n              <Icon name=\"info\" color={Colors.accentGray()} />\n            </Tooltip>\n          </Box>\n        </th>\n        <th></th>\n      </tr>\n    </thead>\n  );\n\n  if (!steps.length) {\n    return (\n      <Table>\n        {tableHeader}\n        <tbody>\n          <tr>\n            <td colSpan={6}>\n              <Box\n                flex={{alignItems: 'center', justifyContent: 'center'}}\n                style={{color: Colors.textLight()}}\n                padding={16}\n              >\n                There are no active or pending steps for this concurrency key.\n              </Box>\n            </td>\n          </tr>\n        </tbody>\n      </Table>\n    );\n  }\n\n  return (\n    <Table>\n      {tableHeader}\n      <tbody style={{backgroundColor: Colors.backgroundYellow()}}>\n        {assignedSteps.map((step) => (\n          <PendingStepRow\n            key={step.runId + step.stepKey}\n            step={step}\n            statusByRunId={statusByRunId}\n            onUpdate={refresh}\n          />\n        ))}\n      </tbody>\n      <tbody>\n        {pendingSteps.map((step) => (\n          <PendingStepRow\n            key={step.runId + step.stepKey}\n            step={step}\n            statusByRunId={statusByRunId}\n            onUpdate={refresh}\n          />\n        ))}\n      </tbody>\n    </Table>\n  );\n};\n\nconst PendingStepRow = ({\n  step,\n  statusByRunId,\n  onUpdate,\n}: {\n  step: ConcurrencyStepFragment;\n  statusByRunId: {[id: string]: RunStatus};\n  onUpdate: () => void;\n}) => {\n  const runStatus = statusByRunId[step.runId];\n  return (\n    <tr>\n      <td>\n        {runStatus ? (\n          <Link to={`/runs/${step.runId}`}>\n            <Box flex={{direction: 'row', alignItems: 'center', gap: 8}}>\n              <RunStatusDot status={runStatus} size={10} />\n              <Mono>{titleForRun({id: step.runId})}</Mono>\n              {failedStatuses.has(runStatus) ? (\n                <Tooltip\n                  placement=\"top\"\n                  content=\"Slots for canceled / failed runs can automatically be freed by configuring a run monitoring setting.\"\n                >\n                  <Icon name=\"info\" color={Colors.accentGray()} />\n                </Tooltip>\n              ) : null}\n            </Box>\n          </Link>\n        ) : (\n          <Mono>{titleForRun({id: step.runId})}</Mono>\n        )}\n      </td>\n      <td>\n        <Mono>{step.stepKey}</Mono>\n      </td>\n      <td>\n        {step.assignedTimestamp ? (\n          <TimeElapsed startUnix={step.assignedTimestamp} endUnix={null} />\n        ) : (\n          '-'\n        )}\n      </td>\n      <td>\n        {step.enqueuedTimestamp ? (\n          <TimeElapsed startUnix={step.enqueuedTimestamp} endUnix={null} />\n        ) : (\n          '-'\n        )}\n      </td>\n      <td>{step.priority}</td>\n      <td>\n        <ConcurrencyActionMenu pendingStep={step} onUpdate={onUpdate} />\n      </td>\n    </tr>\n  );\n};\n\nconst CONCURRENCY_STEP_FRAGMENT = gql`\n  fragment ConcurrencyStepFragment on PendingConcurrencyStep {\n    runId\n    stepKey\n    enqueuedTimestamp\n    assignedTimestamp\n    priority\n  }\n`;\nconst CONCURRENCY_LIMIT_FRAGMENT = gql`\n  fragment ConcurrencyLimitFragment on ConcurrencyKeyInfo {\n    concurrencyKey\n    slotCount\n    claimedSlots {\n      runId\n      stepKey\n    }\n    pendingSteps {\n      ...ConcurrencyStepFragment\n    }\n  }\n  ${CONCURRENCY_STEP_FRAGMENT}\n`;\nconst RUN_QUEUE_CONFIG_FRAGMENT = gql`\n  fragment RunQueueConfigFragment on RunQueueConfig {\n    maxConcurrentRuns\n    tagConcurrencyLimitsYaml\n  }\n`;\n\nexport const INSTANCE_CONCURRENCY_LIMITS_QUERY = gql`\n  query InstanceConcurrencyLimitsQuery {\n    instance {\n      id\n      info\n      supportsConcurrencyLimits\n      runQueuingSupported\n      runQueueConfig {\n        ...RunQueueConfigFragment\n      }\n      minConcurrencyLimitValue\n      maxConcurrencyLimitValue\n      concurrencyLimits {\n        concurrencyKey\n      }\n    }\n  }\n\n  ${RUN_QUEUE_CONFIG_FRAGMENT}\n`;\n\nconst SET_CONCURRENCY_LIMIT_MUTATION = gql`\n  mutation SetConcurrencyLimit($concurrencyKey: String!, $limit: Int!) {\n    setConcurrencyLimit(concurrencyKey: $concurrencyKey, limit: $limit)\n  }\n`;\n\nconst DELETE_CONCURRENCY_LIMIT_MUTATION = gql`\n  mutation DeleteConcurrencyLimit($concurrencyKey: String!) {\n    deleteConcurrencyLimit(concurrencyKey: $concurrencyKey)\n  }\n`;\n\nexport const FREE_CONCURRENCY_SLOTS_MUTATION = gql`\n  mutation FreeConcurrencySlots($runId: String!, $stepKey: String) {\n    freeConcurrencySlots(runId: $runId, stepKey: $stepKey)\n  }\n`;\n\nconst CONCURRENCY_KEY_DETAILS_QUERY = gql`\n  query ConcurrencyKeyDetailsQuery($concurrencyKey: String!) {\n    instance {\n      id\n      concurrencyLimit(concurrencyKey: $concurrencyKey) {\n        ...ConcurrencyLimitFragment\n      }\n    }\n  }\n  ${CONCURRENCY_LIMIT_FRAGMENT}\n`;\n\nconst RUNS_FOR_CONCURRENCY_KEY_QUERY = gql`\n  query RunsForConcurrencyKeyQuery($filter: RunsFilter, $limit: Int) {\n    pipelineRunsOrError(filter: $filter, limit: $limit) {\n      ... on Runs {\n        results {\n          id\n          status\n        }\n      }\n    }\n  }\n`;\n","import {Colors, Icon} from '@dagster-io/ui-components';\nimport {memo, useContext} from 'react';\n\nimport {WarningTooltip} from './WarningTooltip';\nimport {DeploymentStatusContext} from '../instance/DeploymentStatusProvider';\n\nexport const InstanceWarningIcon = memo(() => {\n  const {daemons} = useContext(DeploymentStatusContext);\n\n  if (!daemons) {\n    return null;\n  }\n\n  return (\n    <WarningTooltip\n      content={daemons.content}\n      position=\"bottom\"\n      modifiers={{offset: {enabled: true, options: {offset: [0, 28]}}}}\n    >\n      <Icon name=\"warning\" color={Colors.accentYellow()} />\n    </WarningTooltip>\n  );\n});\n","import {Colors, Icon, Spinner, Tooltip} from '@dagster-io/ui-components';\nimport {memo, useContext} from 'react';\n\nimport {WarningTooltip} from './WarningTooltip';\nimport {DeploymentStatusContext} from '../instance/DeploymentStatusProvider';\n\nexport const WorkspaceStatus = memo(({placeholder}: {placeholder: boolean}) => {\n  const {codeLocations} = useContext(DeploymentStatusContext);\n\n  if (!codeLocations) {\n    return placeholder ? <div style={{width: '16px'}} /> : null;\n  }\n\n  if (codeLocations.type === 'spinner') {\n    return (\n      <Tooltip content={codeLocations.content} placement=\"bottom\">\n        <Spinner purpose=\"body-text\" fillColor={Colors.accentGray()} />\n      </Tooltip>\n    );\n  }\n\n  return (\n    <WarningTooltip\n      content={codeLocations.content}\n      position=\"bottom\"\n      modifiers={{offset: {enabled: true, options: {offset: [0, 28]}}}}\n    >\n      <Icon name=\"warning\" color={Colors.accentYellow()} />\n    </WarningTooltip>\n  );\n});\n","import {QueryResult} from '@apollo/client';\nimport {Box, Tabs} from '@dagster-io/ui-components';\nimport {useContext} from 'react';\n\nimport {InstancePageContext} from './InstancePageContext';\nimport {useCanSeeConfig} from './useCanSeeConfig';\nimport {QueryRefreshCountdown, QueryRefreshState} from '../app/QueryRefresh';\nimport {InstanceWarningIcon} from '../nav/InstanceWarningIcon';\nimport {WorkspaceStatus} from '../nav/WorkspaceStatus';\nimport {TabLink} from '../ui/TabLink';\n\ninterface Props<TData> {\n  refreshState?: QueryRefreshState;\n  queryData?: QueryResult<TData, any>;\n  tab: string;\n}\n\nexport const InstanceTabs = <TData extends Record<string, any>>(props: Props<TData>) => {\n  const {refreshState, tab} = props;\n\n  const {healthTitle} = useContext(InstancePageContext);\n  const canSeeConfig = useCanSeeConfig();\n\n  return (\n    <Box flex={{direction: 'row', justifyContent: 'space-between', alignItems: 'flex-end'}}>\n      <Tabs selectedTabId={tab}>\n        <TabLink\n          id=\"locations\"\n          title=\"Code locations\"\n          to=\"/locations\"\n          icon={<WorkspaceStatus placeholder={false} />}\n        />\n        <TabLink id=\"health\" title={healthTitle} to=\"/health\" icon={<InstanceWarningIcon />} />\n        {canSeeConfig ? (\n          <TabLink id=\"concurrency\" title=\"Concurrency limits\" to=\"/concurrency\" />\n        ) : null}\n        {canSeeConfig ? <TabLink id=\"config\" title=\"Configuration\" to=\"/config\" /> : null}\n      </Tabs>\n      {refreshState ? (\n        <Box padding={{bottom: 8}}>\n          <QueryRefreshCountdown refreshState={refreshState} />\n        </Box>\n      ) : null}\n    </Box>\n  );\n};\n"],"names":["TEMPLATE_COLUMNS","ConcurrencyTable","concurrencyKeys","onEdit","onDelete","onSelect","param","parentRef","useRef","rowVirtualizer","useVirtualizer","count","length","getScrollElement","current","estimateSize","overscan","totalHeight","getTotalSize","items","getVirtualItems","jsx_runtime","jsx","div","style","overflow","jsxs","Container","ref","ConcurrencyHeader","Inner","$totalHeight","map","index","key","size","start","concurrencyKey","ConcurrencyRow","height","HeaderRow","templateColumns","sticky","HeaderCell","queryJob","queryResult","useLazyQuery","SINGLE_CONCURRENCY_KEY_QUERY","variables","useBlockTraceOnQueryResult","useDelayedRowQuery","useQueryRefreshAtInterval","FIFTEEN_SECONDS","data","limit","instance","concurrencyLimit","Row","$height","$start","RowGrid","border","RowCell","Fragment","slotCount","LoadingOrNone","pendingSteps","filter","x","assignedTimestamp","Box","flex","direction","gap","alignItems","span","Tag","intent","interactive","ButtonLink","onClick","ConcurrencyLimitActionMenu","Popover","content","Menu","MenuItem","icon","text","position","Button","Icon","name","gql","styled","InstanceConcurrencyPageContent","React","useTrackPageView","useDocumentTitle","selectedKey","setSelectedKey","useQueryPersistedState","queryKey","useQuery","INSTANCE_CONCURRENCY_LIMITS_QUERY","notifyOnNetworkStatusChange","refreshState","overflowY","margin","bottom","RunConcurrencyContent","hasRunQueue","runQueuingSupported","runQueueConfig","ConcurrencyLimits","instanceConfig","info","concurrencyLimits","hasSupport","supportsConcurrencyLimits","refetch","minValue","minConcurrencyLimitValue","maxValue","maxConcurrencyLimitValue","onSelectKey","padding","vertical","Spinner","purpose","InstanceConcurrencyPage","pageTitle","InstancePageContext","Page","PageHeader","title","Heading","tabs","InstanceTabs","tab","InstanceConcurrency","horizontal","justifyContent","Subheading","QueryRefreshCountdown","Mono","a","target","rel","href","infoContent","settings_content","MetadataTableWIP","tbody","tr","td","maxConcurrentRuns","tagConcurrencyLimitsYaml","StyledRawCodeMirror","value","options","readOnly","lineNumbers","mode","RunConcurrencyLimitHeader","action","setAction","onConcurrencyStepsDialogClose","undefined","search","setSearch","sortedKeys","includes","sort","b","COMMON_COLLATOR","compare","onAdd","actionType","ConcurrencyLimitHeader","NonIdealState","description","AddConcurrencyLimitDialog","open","onClose","onComplete","DeleteConcurrencyLimitDialog","EditConcurrencyLimitDialog","ConcurrencyStepsDialog","strong","onUpdate","TextInput","width","minWidth","maxWidth","placeholder","onChange","e","isValidLimit","minLimitValue","maxLimitValue","parseInt","isNaN","String","trim","isSubmitting","setIsSubmitting","limitInput","setLimitInput","keyInput","setKeyInput","setConcurrencyLimit","useMutation","SET_CONCURRENCY_LIMIT_MUTATION","save","Dialog","isOpen","DialogBody","concat","DialogFooter","disabled","deleteConcurrencyLimit","DELETE_CONCURRENCY_LIMIT_MUTATION","ConcurrencyActionMenu","pendingStep","freeSlots","FREE_CONCURRENCY_SLOTS_MUTATION","resp","runId","stepKey","freeConcurrencySlots","showSharedToaster","message","rightIcon","CONCURRENCY_KEY_DETAILS_QUERY","skip","maxHeight","grow","PendingStepsTable","keyInfo","refresh","runIds","Set","step","RUNS_FOR_CONCURRENCY_KEY_QUERY","statusByRunId","runs","pipelineRunsOrError","__typename","results","forEach","run","id","status","steps","priority","enqueuedTimestamp","assignedSteps","tableHeader","thead","th","Tooltip","placement","color","Colors","Table","backgroundColor","PendingStepRow","colSpan","runStatus","Link","to","RunStatusDot","titleForRun","failedStatuses","has","TimeElapsed","startUnix","endUnix","CONCURRENCY_STEP_FRAGMENT","CONCURRENCY_LIMIT_FRAGMENT","RUN_QUEUE_CONFIG_FRAGMENT","InstanceWarningIcon","memo","daemons","useContext","DeploymentStatusContext","WarningTooltip","modifiers","offset","enabled","WorkspaceStatus","codeLocations","type","fillColor","props","healthTitle","canSeeConfig","useCanSeeConfig","Tabs","selectedTabId","TabLink"],"sourceRoot":""}