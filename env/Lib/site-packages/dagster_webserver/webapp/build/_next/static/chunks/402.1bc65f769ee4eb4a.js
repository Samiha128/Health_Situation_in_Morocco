"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[402],{38267:function(e,n,t){t.d(n,{Q1:function(){return k},Qf:function(){return C},zc:function(){return R}});var r=t(73235),s=t(52322),i=t(40794),o=t(89130),l=t(38491),u=t(39013),d=t(18149),c=t.n(d),a=t(2784),h=t(7267),m=t(35505),x=t(59351),p=t(18856),f=t(20171),j=t(34219),g=t(88610);function v(){let e=(0,r._)(["\n  query RunTabsCountQuery($queuedFilter: RunsFilter!, $inProgressFilter: RunsFilter!) {\n    queuedCount: pipelineRunsOrError(filter: $queuedFilter) {\n      ... on Runs {\n        count\n      }\n    }\n    inProgressCount: pipelineRunsOrError(filter: $inProgressFilter) {\n      ... on Runs {\n        count\n      }\n    }\n  }\n"]);return v=function(){return e},e}let y=e=>{switch(e){case"all":return"Runs | All runs";case"failed":return"Runs | Failed";case"in-progress":return"Runs | In progress";case"queued":return"Runs | Queued";case"scheduled":return"Runs | Scheduled";default:return"Runs"}},R=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,i.a)(S,{variables:{queuedFilter:{...e,statuses:Array.from(x.sy)},inProgressFilter:{...e,statuses:Array.from(x.Ys)}}});(0,j.Hu)(n,"RunTabsCountQuery");let{data:t}=n,{queuedCount:r,inProgressCount:o}=(0,a.useMemo)(()=>{var e,n;return{queuedCount:(null==t?void 0:null===(e=t.queuedCount)||void 0===e?void 0:e.__typename)==="Runs"?t.queuedCount.count:null,inProgressCount:(null==t?void 0:null===(n=t.inProgressCount)||void 0===n?void 0:n.__typename)==="Runs"?t.inProgressCount.count:null}},[t]),[u]=(0,p.oD)(),d=C(u);(0,f.j)(y(d));let c=e=>{let n=u.filter(e=>"status"!==e.token),t=e.map(e=>({token:"status",value:e}));return(0,p.it)([...t,...n])};return{tabs:(0,s.jsxs)(l.zH,{children:[(0,s.jsx)(k,{to:c([]),id:"all",$active:"all"===d,children:"All runs"}),(0,s.jsxs)(k,{to:c(Array.from(x.sy)),id:"queued",$active:"queued"===d,children:["Queued (",null!=r?r:"indeterminate",")"]}),(0,s.jsxs)(k,{to:c(Array.from(x.Ys)),id:"in-progress",$active:"in-progress"===d,children:["In progress (",null!=o?o:"indeterminate",")"]}),(0,s.jsx)(k,{to:c(Array.from(x.hd)),id:"failed",$active:"failed"===d,children:"Failed"}),(0,s.jsx)(k,{title:"Scheduled",to:"/runs/scheduled",id:"scheduled",$active:"scheduled"===d,children:"Scheduled"})]}),queryResult:n}},k=(0,m.ZP)(g.A).withConfig({componentId:"sc-1e7c25a7-0"})(["color:",";&&:hover{color:",";}",""],u.$(),u.$(),e=>{let{$active:n}=e;return n?(0,m.iv)(["background-color:",";color:",";&&:hover{background-color:",";color:",";}"],u.AU(),u.Ep(),u.AU(),u.Ep()):(0,m.iv)(["background-color:",";"],u.v8())}),C=e=>{let{pathname:n}=(0,h.TH)();if("/runs/timeline"===n)return"timeline";if("/runs/scheduled"===n)return"scheduled";if("/overview/backfills"===n)return"backfills";let t=new Set(e.filter(e=>"status"===e.token).map(e=>e.value));return c()(x.sy,t)?"queued":c()(x.Ys,t)?"in-progress":c()(x.hd,t)?"failed":"all"},S=(0,o.Ps)(v())},90402:function(e,n,t){t.r(n),t.d(n,{ScheduledRunListRoot:function(){return ec},default:function(){return ea}});var r=t(73235),s=t(52322),i=t(40794),o=t(89130),l=t(49308),u=t(74580),d=t(35292),c=t(14934),a=t(16629),h=t(34147),m=t(89891),x=t(39013),p=t(38267),f=t(8068),j=t(78491),g=t(16336),v=t(69737),y=t(20171),R=t(40782),k=t(34219),C=t(74050),S=t(3842),w=t(37483),q=t(38491),T=t(92917),b=t(1747),_=t(79106),F=t(55010),N=t(60603),E=t(20156),O=t(92506),P=t(19126),$=t.n(P),z=t(2784),A=t(47933),U=t(35505),I=t(86269),Q=t(50309),H=t(23399),J=t(85227),V=t(88257),K=t(33847),Y=t(10241),L=t(43),Z=t(100),B=t(20718),D=t(10539);function M(){let e=(0,r._)(["\n  fragment ScheduleNextFiveTicksFragment on Schedule {\n    id\n    name\n    executionTimezone\n    mode\n    solidSelection\n    pipelineName\n    scheduleState {\n      id\n      status\n    }\n    futureTicks(limit: 5) {\n      results {\n        timestamp\n      }\n    }\n  }\n"]);return M=function(){return e},e}function G(){let e=(0,r._)(["\n  fragment RepositoryForNextTicksFragment on Repository {\n    name\n    id\n    location {\n      id\n      name\n    }\n    schedules {\n      id\n      ...ScheduleNextFiveTicksFragment\n    }\n  }\n\n  ","\n"]);return G=function(){return e},e}function X(){let e=(0,r._)(["\n  query ScheduleTickConfigQuery($scheduleSelector: ScheduleSelector!, $tickTimestamp: Int!) {\n    scheduleOrError(scheduleSelector: $scheduleSelector) {\n      ... on Schedule {\n        id\n        futureTick(tickTimestamp: $tickTimestamp) {\n          evaluationResult {\n            ...ScheduleFutureTickEvaluationResult\n          }\n        }\n      }\n    }\n  }\n\n  fragment ScheduleFutureTickEvaluationResult on TickEvaluation {\n    runRequests {\n      ...ScheduleFutureTickRunRequest\n    }\n    skipReason\n    error {\n      ...PythonErrorFragment\n    }\n  }\n\n  fragment ScheduleFutureTickRunRequest on RunRequest {\n    runKey\n    runConfigYaml\n    tags {\n      key\n      value\n    }\n  }\n\n  ","\n"]);return X=function(){return e},e}let W=(0,z.memo)(e=>{let{repos:n}=e,t=[],r=!1,i=!1,{options:o}=(0,Z.vl)();return(n.forEach(e=>{let{schedules:n}=e;i=i||n.length>0;let s={name:e.name,location:e.location.name},o=n.filter(e=>e.futureTicks.results.length&&e.scheduleState.status===V.ynu.RUNNING),l=Math.min(...o.map(e=>e.futureTicks.results[e.futureTicks.results.length-1].timestamp));o.forEach(e=>{e.futureTicks.results.forEach(n=>{n.timestamp<=l&&t.push({schedule:e,timestamp:n.timestamp,repoAddress:s})})}),r||(r=n.some(e=>!!e.mode))}),t.sort((e,n)=>e.timestamp-n.timestamp),t.length)?(0,s.jsxs)(b.i,{children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{style:{width:"260px"},children:"Timestamp"}),(0,s.jsx)("th",{style:{width:"30%"},children:"Schedule"}),(0,s.jsx)("th",{children:r?"Job / Pipeline":"Job"}),(0,s.jsx)("th",{children:"Metadata"})]})}),(0,s.jsx)("tbody",{children:t.map(e=>{let{schedule:n,timestamp:t,repoAddress:r}=e,i=(0,Z.qz)(o,r);return(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:(0,s.jsx)(I.v,{timestamp:t,timezone:n.executionTimezone,timeFormat:{showSeconds:!1,showTimezone:!0}})}),(0,s.jsx)("td",{children:(0,s.jsx)(A.rU,{to:(0,D.$U)(r,"/schedules/".concat(n.name)),children:n.name})}),(0,s.jsx)("td",{children:(0,s.jsx)(K.h,{pipelineName:n.pipelineName,pipelineHrefContext:r,isJob:!!i&&(0,Z.E8)(i,n.pipelineName)})}),(0,s.jsx)("td",{children:(0,s.jsx)(ee,{repoAddress:r,schedule:n,tickTimestamp:t})})]},"".concat(n.id,":").concat(t))})})]}):(0,s.jsx)(c.x,{padding:{vertical:32},children:(0,s.jsx)(w.t,{icon:"error",title:"No scheduled ticks",description:i?(0,s.jsxs)(s.Fragment,{children:["There are no running schedules."," ",(0,s.jsx)(A.rU,{to:"/overview/schedules",children:"Start a schedule"})," to see scheduled ticks."]}):(0,s.jsx)(s.Fragment,{children:"There are no schedules in this workspace. Create a running schedule to view its scheduled ticks."}),action:i?null:(0,s.jsx)(q.fr,{icon:(0,s.jsx)(T.JO,{name:"open_in_new"}),href:"https://docs.dagster.io/concepts/partitions-schedules-sensors/schedules",children:"View documentation"})})})}),ee=(0,z.memo)(e=>{var n;let{repoAddress:t,schedule:r,tickTimestamp:i}=e,o={...(0,B.$)(t),scheduleName:r.name},[l,u]=(0,z.useState)(!1),[d,{called:c,loading:a,data:h}]=(0,S.t)(ei,{variables:{scheduleSelector:o,tickTimestamp:i}}),m=!!c&&!a,x=(null==h?void 0:null===(n=h.scheduleOrError)||void 0===n?void 0:n.__typename)==="Schedule"?h.scheduleOrError.futureTick.evaluationResult:null,p=m?(0,s.jsx)(en,{repoAddress:t,schedule:r,loading:a,onItemOpen:u,evaluationResult:x}):(0,s.jsx)(_.$,{purpose:"body-text"});return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(F.J,{content:(0,s.jsx)(N.v2,{children:p}),position:"bottom-right",onOpening:()=>{c||d()},children:(0,s.jsx)(q.zx,{icon:(0,s.jsx)(T.JO,{name:"expand_more"})})}),(0,s.jsx)(et,{repoAddress:t,isOpen:l,setOpen:u,schedule:r,tickTimestamp:i,evaluationResult:x})]})}),en=e=>{let{repoAddress:n,schedule:t,evaluationResult:r,loading:i,onItemOpen:o}=e;if(!r)return(0,s.jsx)(N.sN,{text:"Could not preview tick for this schedule"});if(r.skipReason)return(0,s.jsx)(N.sN,{text:"View skip reason...",onClick:()=>o(!0)});if(r.error)return(0,s.jsx)(N.sN,{text:"View error...",onClick:()=>o(!0)});if(!r.runRequests||!r.runRequests.length)return(0,s.jsx)(N.sN,{text:"No runs requested for this projected schedule tick"});if(1===r.runRequests.length){let e=r.runRequests[0],l=e?e.runConfigYaml:"";return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(N.sN,{text:i?"Loading Configuration...":"View Configuration...",icon:"open_in_new",onClick:()=>o(!0)}),(0,s.jsx)(L.U,{text:"Open in Launchpad...",icon:"edit",target:"_blank",to:(0,D.$U)(n,"/pipeline_or_job/".concat(t.pipelineName,"/playground/setup?").concat($().stringify({mode:t.mode,config:l,solidSelection:t.solidSelection})))})]})}return(0,s.jsx)(N.sN,{text:"View ".concat(r.runRequests.length," run requests..."),icon:"edit",target:"_blank",onClick:()=>o(!0)})},et=e=>{let n,{repoAddress:t,evaluationResult:r,schedule:i,tickTimestamp:o,setOpen:l,isOpen:u}=e,[a,p]=(0,z.useState)(r&&r.runRequests&&1===r.runRequests.length?r.runRequests[0]:null),f=(0,J.m)(),j=(0,Z.Ux)(t),g=(0,Z.E8)(j,i.pipelineName);(0,z.useEffect)(()=>{r&&r.runRequests&&1===r.runRequests.length&&p(r.runRequests[0])},[r]);let v=()=>{p(null),l(!1)};return r?a?n=(0,s.jsxs)(c.x,{flex:{direction:"column",gap:20},children:[(0,s.jsxs)(c.x,{flex:{direction:"column",gap:12},padding:{top:16,horizontal:24},children:[(0,s.jsx)(d.pm,{children:"Tags"}),a.tags.length?(0,s.jsx)(Y.Q,{tags:a.tags,mode:g?null:i.mode}):null]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(c.x,{border:"bottom",padding:{left:24,bottom:16},children:(0,s.jsx)(d.pm,{children:"Config"})}),(0,s.jsx)(E.u,{value:a.runConfigYaml,options:{readOnly:!0,lineNumbers:!0,mode:"yaml"}})]})]}):r.error?n=(0,s.jsx)(O.a7,{children:(0,s.jsx)(H.T9,{error:r.error})}):r.skipReason?n=(0,s.jsx)(O.a7,{children:(0,s.jsx)(el,{children:r.skipReason})}):r.runRequests&&(n=(0,s.jsx)(O.a7,{children:(0,s.jsx)(eo,{children:(0,s.jsxs)(b.i,{children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"Run key"}),(0,s.jsx)("th",{children:"Config"}),(0,s.jsx)("th",{children:"Actions"})]})}),(0,s.jsx)("tbody",{children:r.runRequests.map((e,n)=>e?(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:e.runKey||(0,s.jsx)("span",{children:"—"})}),(0,s.jsx)("td",{children:(0,s.jsx)(m.Z,{onClick:()=>p(e),underline:!1,children:(0,s.jsxs)(h.Z,{direction:"row",spacing:8,alignItems:"center",children:[(0,s.jsx)(T.JO,{name:"open_in_new",color:x.$()}),(0,s.jsx)("span",{children:"View config"})]})})}),(0,s.jsx)("td",{children:(0,s.jsx)(F.J,{content:(0,s.jsx)(N.v2,{children:(0,s.jsx)(L.U,{text:"Open in Launchpad...",icon:"edit",target:"_blank",to:(0,D.$U)(t,"/".concat(g?"jobs":"pipelines","/").concat(i.pipelineName,"/playground/setup?").concat($().stringify({mode:i.mode,config:e.runConfigYaml,solidSelection:i.solidSelection})))})}),position:"bottom",children:(0,s.jsx)(q.zx,{icon:(0,s.jsx)(T.JO,{name:"expand_more"})})})})]},n):null)})]})})})):n=null,(0,s.jsxs)(O.Vq,{onClose:()=>v(),style:{width:"50vw"},title:(0,s.jsxs)(c.x,{flex:{direction:"row",gap:4},children:[(0,s.jsx)(I.v,{timestamp:o,timezone:i.executionTimezone}),(null==a?void 0:a.runKey)?(0,s.jsxs)("div",{children:[": ",null==a?void 0:a.runKey]}):null]}),isOpen:u,children:[n,(0,s.jsxs)(O.cN,{topBorder:!0,children:[a?(0,s.jsx)(q.zx,{autoFocus:!1,onClick:async()=>{f(a.runConfigYaml),await (0,Q.B7)({intent:"success",icon:"copy_to_clipboard_done",message:"Copied!"})},children:"Copy config"}):null,(0,s.jsx)(q.zx,{intent:"primary",autoFocus:!0,onClick:()=>v(),children:"OK"})]})]})},er=(0,o.Ps)(M()),es=(0,o.Ps)(G(),er),ei=(0,o.Ps)(X(),j.B),eo=U.ZP.div.withConfig({componentId:"sc-fe5a70df-0"})(["font-size:13px;"]),el=U.ZP.div.withConfig({componentId:"sc-fe5a70df-1"})(["background-color:",";border:1px solid ",";border-radius:3px;"],x.B5(),x.qr());var eu=t(59923);function ed(){let e=(0,r._)(["\n  query ScheduledRunsListQuery {\n    instance {\n      id\n      ...InstanceHealthFragment\n    }\n    repositoriesOrError {\n      ... on RepositoryConnection {\n        nodes {\n          id\n          ... on Repository {\n            id\n            ...RepositoryForNextTicksFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n  ","\n"]);return ed=function(){return e},e}let ec=()=>{(0,v.Px)(),(0,y.j)("Runs | Scheduled");let e=(0,i.a)(eh,{notifyOnNetworkStatusChange:!0});(0,k.Hu)(e,"ScheduledRunsListQuery");let n=(0,g.C4)(e,g.dT),{tabs:t,queryResult:r}=(0,p.zc)(),o=(0,g.C4)(r,g.dT),j=(0,g.V5)(o,n);return(0,s.jsxs)(l.T,{children:[(0,s.jsx)(u.m,{title:(0,s.jsx)(d.X6,{children:"Runs"}),right:(0,s.jsx)(g.xi,{refreshState:j})}),(0,s.jsx)(c.x,{flex:{direction:"row",gap:8,alignItems:"center",justifyContent:"space-between"},padding:{vertical:12,left:24,right:12},children:t}),(0,s.jsx)(eu.g,{queryResult:e,allowStaleData:!0,children:e=>{let{repositoriesOrError:n,instance:t}=e;if("RepositoryConnection"!==n.__typename){let e="PythonError"===n.__typename?n.message:"Repository not found";return(0,s.jsx)(a.b,{intent:"warning",title:(0,s.jsxs)(h.Z,{direction:"row",spacing:4,children:[(0,s.jsx)("div",{children:"Could not load scheduled ticks."}),(0,s.jsx)(m.Z,{color:x.Es(),underline:"always",onClick:()=>{(0,f._K)({title:"Python error",body:e})},children:"View error"})]})})}return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(C.K,{daemonHealth:t.daemonHealth,padding:{vertical:16,horizontal:24}}),(0,s.jsx)(W,{repos:n.nodes})]})}})]})};var ea=ec;let eh=(0,o.Ps)(ed(),R.O,es,j.B)},74050:function(e,n,t){t.d(n,{K:function(){return o}});var r=t(52322),s=t(14934),i=t(16629);t(2784);let o=e=>{let n,{daemonHealth:t,...o}=e;if(t){let e=t.allDaemonStatuses.filter(e=>"SCHEDULER"===e.daemonType);if(e.length>0){let t=e[0];n=t.required&&t.healthy}}return!1===n?(0,r.jsx)(s.x,{...o,children:(0,r.jsx)(i.b,{intent:"warning",title:"The scheduler daemon is not running.",description:(0,r.jsxs)("div",{children:["See the"," ",(0,r.jsx)("a",{href:"https://docs.dagster.io/deployment/dagster-daemon",children:"dagster-daemon documentation"})," ","for more information on how to deploy the dagster-daemon process."]})})}):null}}}]);
//# sourceMappingURL=402.1bc65f769ee4eb4a.js.map