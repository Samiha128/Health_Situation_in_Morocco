"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9212],{21473:function(e,n,t){t.d(n,{G:function(){return T}});var r=t(73235),i=t(52322),s=t(89130),o=t(49853),l=t(49308),a=t(14934),d=t(37483),c=t(43212),u=t(89891),p=t(80122),h=t(92917),x=t(2784),m=t(7267),j=t(36381),g=t(76016),f=t(78491),y=t(16336),S=t(69737),b=t(92322),v=t(34219),P=t(89010),N=t(43984),w=t(33182),C=t(18856),A=t(15332),E=t(88610),k=t(59923),R=t(85062),O=t(100),_=t(22563),$=t(10539);function F(){let e=(0,r._)(["\n  query PipelineRunsRootQuery($limit: Int, $cursor: String, $filter: RunsFilter!) {\n    pipelineRunsOrError(limit: $limit, cursor: $cursor, filter: $filter) {\n      ... on Runs {\n        results {\n          id\n          ...RunTableRunFragment\n        }\n      }\n      ... on InvalidPipelineRunsFilterError {\n        message\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"]);return F=function(){return e},e}let I=["status","tag","id","created_date_before","created_date_after"],T=e=>{(0,S.Px)();let{pipelinePath:n}=(0,m.UO)(),{repoAddress:t=null}=e,r=(0,j.p3)(n),{pipelineName:s,snapshotId:h}=r,f=(0,O.Ux)(t),E=(0,O.E8)(f,s);(0,g.b)(r,E);let $=(0,b.se)("PipelineRunsRoot"),[F,T]=(0,C.oD)(I),z=(0,x.useMemo)(()=>[E?{token:"job",value:s}:{token:"pipeline",value:s},h?{token:"snapshotId",value:h}:null].filter(Boolean),[E,s,h]),D=[...F,...z];if(t){let e={token:"tag",value:"".concat(N.H.RepositoryLabelTag,"=").concat((0,_.Wg)(t))};D.push(e)}let{queryResult:M,paginationProps:H}=(0,A.l)({query:U,pageSize:25,variables:{filter:{...(0,C.VH)(D),pipelineName:s,snapshotId:h}},nextCursorForResult:e=>{var n;if("Runs"===e.pipelineRunsOrError.__typename)return null===(n=e.pipelineRunsOrError.results[24])||void 0===n?void 0:n.id},getResultArray:e=>e&&"Runs"===e.pipelineRunsOrError.__typename?e.pipelineRunsOrError.results:[]});(0,v.Hu)(M,"PipelineRunsRootQuery");let J=(0,x.useCallback)(e=>{let n=(0,o.HY)(e);F.some(e=>(0,o.HY)(e)===n)||T([...F,e])},[F,T]),q=(0,y.C4)(M,y.dT),{button:Q,activeFiltersJsx:V}=(0,C.Vv)({enabledFilters:I,tokens:F,onChange:T,loading:M.loading});return(0,x.useEffect)(()=>{M.loading||$.endTrace()},[M.loading,$]),(0,i.jsx)(w.Lw.Provider,{value:{refetch:M.refetch},children:(0,i.jsx)(l.T,{children:(0,i.jsx)(k.g,{queryResult:M,allowStaleData:!0,children:e=>{let{pipelineRunsOrError:r}=e;if("Runs"!==r.__typename)return(0,i.jsx)(a.x,{padding:{vertical:64},children:(0,i.jsx)(d.t,{icon:"error",title:"Query Error",description:r.message})});let o=r.results.slice(0,25),{hasNextCursor:l,hasPrevCursor:h}=H;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(R.Y,{$top:0,children:(0,i.jsx)(P.AL,{runs:o,onAddTag:J,actionBarComponents:(0,i.jsxs)(a.x,{flex:{direction:"row",justifyContent:"space-between",grow:1,alignItems:"center",gap:4},margin:{right:8},children:[Q,(0,i.jsx)(y.xi,{refreshState:q})]}),belowActionBarComponents:(0,i.jsxs)(i.Fragment,{children:[z.map(e=>{let{token:n,value:t}=e;return(0,i.jsx)(c.V,{children:"".concat(n,":").concat(t)},n)}),V.length?(0,i.jsxs)(i.Fragment,{children:[V,(0,i.jsx)(u.Z,{onClick:()=>{T([])},children:"Clear all"})]}):null]}),emptyState:()=>(0,i.jsx)(L,{repoAddress:t,anyFilter:F.length>0,jobName:s,jobPath:n})})}),l||h?(0,i.jsx)("div",{style:{marginTop:"20px"},children:(0,i.jsx)(p.pI,{...H})}):null]})}})})})},L=e=>{let{repoAddress:n,anyFilter:t,jobName:r,jobPath:s}=e,o=(0,O.Ux)(n),l=(0,O.Hb)(o,r);return(0,i.jsx)(a.x,{padding:{vertical:64},children:(0,i.jsx)(d.t,{icon:"run",title:"No runs found",description:n?l?(0,i.jsxs)(a.x,{flex:{direction:"column",gap:12},children:[(0,i.jsx)("div",{children:t?"There are no matching runs for these filters.":"You have not materialized any assets with this job yet."}),(0,i.jsx)("div",{children:(0,i.jsx)(E.A,{icon:(0,i.jsx)(h.JO,{name:"materialization"}),to:(0,$.$U)(n,"/jobs/".concat(s)),children:"Materialize an asset"})})]}):(0,i.jsxs)(a.x,{flex:{direction:"column",gap:12},children:[(0,i.jsx)("div",{children:t?"There are no matching runs for these filters.":"You have not launched any runs for this job yet."}),(0,i.jsx)("div",{children:(0,i.jsx)(E.A,{icon:(0,i.jsx)(h.JO,{name:"add_circle"}),to:(0,$.$U)(n,"/jobs/".concat(s,"/playground")),children:"Launch a run"})})]}):(0,i.jsx)("div",{children:"You have not launched any runs for this job."})})})},U=(0,s.Ps)(F(),P.ZZ,f.B)},63485:function(e,n,t){t.d(n,{I:function(){return J},b:function(){return H}});var r=t(73235),i=t(52322),s=t(3842),o=t(89130),l=t(53664),a=t(14934),d=t(2784),c=t(47933),u=t(35505),p=t(83738),h=t(100),x=t(10539),m=t(16336),j=t(60603),g=t(79106),f=t(55010),y=t(35002),S=t(38491),b=t(92917),v=t(36803),P=t(32177),N=t(51701),w=t(88257),C=t(34219),A=t(83846),E=t(42519),k=t(43);function R(){let e=(0,r._)(["\n  query RunReExecutionQuery($runId: ID!) {\n    pipelineRunOrError(runId: $runId) {\n      ... on Run {\n        id\n        status\n        pipelineName\n        executionPlan {\n          artifactsPersisted\n          ...ExecutionPlanToGraphFragment\n        }\n      }\n    }\n  }\n  ","\n"]);return R=function(){return e},e}let O=e=>{let{job:n,isAssetJob:t,repoAddress:r}=e,o=n.runs.length?n.runs[0]:null,l={pipelineName:n.name,repositoryName:r.name,repositoryLocationName:r.location},a=(0,P.DO)(n.name),c=(0,E.D)(),{permissions:{canLaunchPipelineReexecution:u,canLaunchPipelineExecution:p},disabledReasons:h}=(0,v.xz)(r.location),[m,N]=(0,s.t)(_),{data:R}=N;(0,C.Hu)(N,"RunReExecutionQuery");let O=(0,d.useCallback)(()=>{(null==o?void 0:o.id)&&m({variables:{runId:o.id}})},[o,m]),$=(null==R?void 0:R.pipelineRunOrError.__typename)==="Run"?null==R?void 0:R.pipelineRunOrError:null,F="loading"===t?(0,i.jsx)(j.sN,{icon:"execute",text:"Loading...",disabled:!0}):!0===t?(0,i.jsx)(j.sN,{icon:a.loading?(0,i.jsx)(g.$,{purpose:"caption-text"}):"execute",text:"Launch new run",disabled:!p,onClick:e=>a.onClick(l,e)}):(0,i.jsx)(k.U,{icon:"execute",text:"Launch new run",disabled:!p,to:(0,x.jT)({repoName:r.name,repoLocation:r.location,pipelineName:n.name,isJob:n.isJob,path:"/playground"})}),I=(0,i.jsx)(j.sN,{icon:"replay",text:"Re-execute latest run",onClick:()=>$?c($,w.hmq.ALL_STEPS):void 0,disabled:!u||!$||!(0,A.EP)($)}),T=(0,i.jsx)(j.sN,{icon:"sync_problem",text:"Re-execute latest run from failure",onClick:()=>$?c($,w.hmq.FROM_FAILURE):void 0,disabled:!u||!$||!(0,A.VM)($)});return(0,i.jsxs)(i.Fragment,{children:[a.launchpadElement,(0,i.jsx)(f.J,{onOpened:()=>O(),content:(0,i.jsxs)(j.v2,{children:[(0,i.jsx)(k.U,{to:(0,x.jT)({repoName:r.name,repoLocation:r.location,pipelineName:n.name,isJob:n.isJob}),icon:"job",text:"View job"}),(0,i.jsx)(k.U,{to:(0,x.jT)({repoName:r.name,repoLocation:r.location,pipelineName:n.name,isJob:n.isJob,path:"/runs"}),icon:"checklist",text:"View all recent runs"}),p?F:(0,i.jsx)(y.u,{content:h.canLaunchPipelineExecution,display:"block",children:F}),u?I:(0,i.jsx)(y.u,{content:h.canLaunchPipelineReexecution,display:"block",children:I}),u?T:(0,i.jsx)(y.u,{content:h.canLaunchPipelineReexecution,display:"block",children:T})]}),position:"bottom-left",children:(0,i.jsx)(S.zx,{icon:(0,i.jsx)(b.JO,{name:"expand_more"})})})]})},_=(0,o.Ps)(R(),N.$);var $=t(60648),F=t(74283),I=t(84046),T=t(33182),L=t(4219),U=t(69698),z=t(17008);function D(){let e=(0,r._)(["\n  query SingleJobQuery($selector: PipelineSelector!) {\n    pipelineOrError(params: $selector) {\n      ... on Pipeline {\n        id\n        name\n        isJob\n        isAssetJob\n        description\n        runs(limit: 5) {\n          id\n          ...RunTimeFragment\n        }\n        schedules {\n          id\n          ...ScheduleSwitchFragment\n        }\n        sensors {\n          id\n          ...SensorSwitchFragment\n        }\n      }\n    }\n  }\n\n  ","\n  ","\n  ","\n"]);return D=function(){return e},e}let M="1.5fr 1fr 180px 96px 80px",H=e=>{let{name:n,isJob:t,repoAddress:r,start:o,height:u}=e,[j,g]=(0,s.t)(V,{variables:{selector:(0,h._T)(r,n)}});(0,C.Hu)(g,"SingleJobQuery"),(0,p.v5)(j),(0,m.C4)(g,m.dT);let{data:f}=g,y=(null==f?void 0:f.pipelineOrError.__typename)==="Pipeline"?null==f?void 0:f.pipelineOrError:void 0,{schedules:S,sensors:b}=(0,d.useMemo)(()=>{if(y){let{schedules:e,sensors:n}=y;return{schedules:e,sensors:n}}return{schedules:[],sensors:[]}},[y]),v=(0,d.useMemo)(()=>{if(y){let{runs:e}=y;if(e.length)return[...e]}return[]},[y]);return(0,i.jsx)(z.X2,{$height:u,$start:o,children:(0,i.jsxs)(q,{border:"bottom",children:[(0,i.jsxs)(z.E5,{children:[(0,i.jsx)("div",{style:{maxWidth:"100%",whiteSpace:"nowrap",fontWeight:500},children:(0,i.jsx)(c.rU,{to:(0,x.$U)(r,"/jobs/".concat(n)),children:(0,i.jsx)(l.g,{text:n})})}),(0,i.jsx)(p.HB,{children:(null==y?void 0:y.description)||""})]}),(0,i.jsx)(z.E5,{children:S.length||b.length?(0,i.jsx)(a.x,{flex:{direction:"column",alignItems:"flex-start",gap:8},children:(0,i.jsx)(Q,{children:(0,i.jsx)(F.I,{schedules:S,sensors:b,repoAddress:r})})}):(0,i.jsx)(p.mq,{queryResult:g})}),(0,i.jsx)(z.E5,{children:v[0]?(0,i.jsx)($.Z,{run:v[0],showButton:!1,showHover:!0,showSummary:!1,name:n}):(0,i.jsx)(p.mq,{queryResult:g})}),(0,i.jsx)(z.E5,{children:v.length?(0,i.jsx)(a.x,{padding:{top:4},children:(0,i.jsx)(I.JH,{jobName:n,runs:[...v].reverse(),fade:!0})}):(0,i.jsx)(p.mq,{queryResult:g})}),(0,i.jsx)(z.E5,{children:(0,i.jsx)(a.x,{flex:{justifyContent:"flex-end"},style:{marginTop:"-2px"},children:(0,i.jsx)(O,{job:{name:n,isJob:t,runs:v},isAssetJob:y?y.isAssetJob:"loading",repoAddress:r})})})]})})},J=()=>(0,i.jsxs)(z.VJ,{templateColumns:M,sticky:!0,children:[(0,i.jsx)(z.qN,{children:"Name"}),(0,i.jsx)(z.qN,{children:"Schedules/sensors"}),(0,i.jsx)(z.qN,{children:"Latest run"}),(0,i.jsx)(z.qN,{children:"Run history"}),(0,i.jsx)(z.qN,{})]}),q=(0,u.ZP)(a.x).withConfig({componentId:"sc-cd82bd61-0"})(["display:grid;grid-template-columns:",";height:100%;"],M),Q=u.ZP.div.withConfig({componentId:"sc-cd82bd61-1"})(["width:100%;> .bp4-popover2-target{width:100%;}"]),V=(0,o.Ps)(D(),T.$X,L.J,U.U)},99212:function(e,n,t){t.r(n),t.d(n,{WorkspaceRoot:function(){return rV},default:function(){return rB}});var r=t(52322),i=t(14934),s=t(37483),o=t(66962),l=t(2784),a=t(7267),d=t(73235),c=t(40794),u=t(89130),p=t(74580),h=t(35292),x=t(43212),m=t(78491),j=t(69737),g=t(20171),f=t(79059),y=t(34219),S=t(67126),b=t(17298),v=t(36381),P=t(59923),N=t(10539);function w(){let e=(0,d._)(["\n  query GraphExplorerRootQuery(\n    $graphSelector: GraphSelector\n    $rootHandleID: String!\n    $requestScopeHandleID: String\n  ) {\n    graphOrError(selector: $graphSelector) {\n      ... on Graph {\n        id\n        name\n        solidHandle(handleID: $rootHandleID) {\n          ...GraphExplorerSolidHandleFragment\n        }\n        solidHandles(parentHandleID: $requestScopeHandleID) {\n          handleID\n          solid {\n            name\n          }\n          ...GraphExplorerSolidHandleFragment\n        }\n        ...GraphExplorerFragment\n      }\n      ... on GraphNotFoundError {\n        message\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n  ","\n"]);return w=function(){return e},e}let C=e=>{(0,j.Px)();let{repoAddress:n}=e,t=(0,a.UO)(),s=(0,v.p3)(t[0]),o=s.opNames.length>1?s.opNames[s.opNames.length-2]:s.pipelineName;return(0,g.j)("Graph: ".concat(o)),(0,r.jsxs)("div",{style:{height:"100%",display:"flex",flexDirection:"column"},children:[(0,r.jsx)(p.m,{title:(0,r.jsx)(h.X6,{children:o}),tags:(0,r.jsxs)(x.V,{icon:"schema",children:["Graph in ",(0,r.jsx)(f.b,{repoAddress:n})]})}),(0,r.jsx)(i.x,{border:"top",style:{minHeight:0,flex:1,display:"flex"},children:(0,r.jsx)(A,{repoAddress:n})})]})},A=e=>{let{repoAddress:n}=e,t=(0,a.UO)(),i=(0,v.p3)(t["0"]),o=(0,a.k6)(),[d,u]=(0,l.useState)({explodeComposites:!1,preferAssetRendering:!0}),p=i.opNames.slice(0,i.opNames.length-1),h=(0,c.a)(E,{variables:{graphSelector:{repositoryName:(null==n?void 0:n.name)||"",repositoryLocationName:(null==n?void 0:n.location)||"",graphName:i.pipelineName},rootHandleID:p.join("."),requestScopeHandleID:d.explodeComposites?void 0:p.join(".")}});return(0,y.Hu)(h,"GraphExplorerRootQuery"),(0,r.jsx)(P.g,{queryResult:h,children:t=>{let{graphOrError:l}=t;if("GraphNotFoundError"===l.__typename)return(0,r.jsx)(s.t,{icon:"error",title:"Graph not found",description:l.message});if("PythonError"===l.__typename)return(0,r.jsx)(s.t,{icon:"error",title:"Query Error",description:l.message});let a=l.solidHandle,c=d.explodeComposites?(0,S.i)(l.solidHandles):l.solidHandles;return(0,r.jsx)(b.m0,{options:d,setOptions:u,explorerPath:i,onChangeExplorerPath:(n,t)=>{let r=(0,N.$U)(e.repoAddress,"/graphs/".concat((0,v.gY)(n)));"push"===t?o.push(r):o.replace(r)},container:l,repoAddress:n,handles:c,parentHandle:a||void 0,isGraph:!0,getInvocations:e=>c.filter(n=>n.solid.definition.name===e).map(e=>({handleID:e.handleID}))})}})},E=(0,u.Ps)(w(),b.Q,b.Sm,m.B);var k=t(79106),R=t(39013),O=t(74159),_=t(92917),$=t(88510),F=t(47933),I=t(35505),T=t(55141),L=t(22563),U=t(61083),z=t(17008),D=t(4128),M=t(30001);let H=e=>Array.isArray(e)?e:[],J=e=>{let{basePath:n}=(0,l.useContext)(D.I),[t,r]=(0,M.U)("".concat(n,":dagster.").concat(e),H),i=(0,l.useCallback)(e=>{r(n=>{let t=new Set(n||[]);return t.has(e)?t.delete(e):t.add(e),Array.from(t)})},[r]);return(0,l.useMemo)(()=>({expandedKeys:t,onToggle:i}),[t,i])};function q(){let e=(0,d._)(["\n  fragment RepoAssetTableFragment on AssetNode {\n    id\n    assetKey {\n      path\n    }\n    groupName\n    ...AssetTableDefinitionFragment\n  }\n\n  ","\n"]);return q=function(){return e},e}let Q="UNGROUPED",V=e=>{let{repoAddress:n,assets:t}=e,i=(0,l.useRef)(null),s=(0,L.Uz)(n),{expandedKeys:o,onToggle:a}=J("".concat(s,"-").concat("assets-virtualized-expansion-state")),d=(0,l.useMemo)(()=>{let e={};for(let n of t){let t=n.groupName||Q,r=e[t]||[];e[t]=[...r,n]}return e},[t]),c=(0,l.useMemo)(()=>{let e=[];return Object.entries(d).forEach(n=>{let[t,r]=n;e.push({type:"group",name:t,assetCount:r.length}),o.includes(t)&&r.forEach(n=>{e.push({type:"asset",id:n.id,definition:n})})}),e},[d,o]),u=(0,$.MG)({count:c.length,getScrollElement:()=>i.current,estimateSize:e=>{let n=c[e];return(null==n?void 0:n.type)==="group"?48:64},overscan:5}),p=u.getTotalSize(),h=u.getVirtualItems();return(0,r.jsx)("div",{style:{overflow:"hidden"},children:(0,r.jsxs)(z.W2,{ref:i,children:[(0,r.jsx)(T.XC,{nameLabel:"Asset name"}),(0,r.jsx)(z.Nh,{$totalHeight:p,children:h.map(e=>{let{index:t,key:i,size:s,start:l}=e,d=c[t];return"group"===d.type?(0,r.jsx)(B,{repoAddress:n,groupName:d.name,assetCount:d.assetCount,expanded:o.includes(d.name),height:s,start:l,onToggle:a},i):(0,r.jsx)(T.pN,{showCheckboxColumn:!1,definition:d.definition,path:d.definition.assetKey.path,type:"asset",repoAddress:n,showRepoColumn:!1,height:s,start:l,checked:!1,onToggleChecked:()=>{},onWipe:()=>{}},i)})})]})})},B=e=>{let{repoAddress:n,groupName:t,assetCount:s,expanded:o,height:l,start:a,onToggle:d}=e;return(0,r.jsx)(G,{$height:l,$start:a,onClick:()=>d(t),$open:o,tabIndex:0,onKeyDown:e=>{("Space"===e.code||"Enter"===e.code)&&(e.preventDefault(),d(t))},children:(0,r.jsxs)(i.x,{background:R.gJ(),flex:{direction:"row",alignItems:"center",gap:8,justifyContent:"space-between"},padding:{horizontal:24},border:"bottom",style:{height:"100%"},children:[(0,r.jsxs)(i.x,{flex:{alignItems:"center",gap:8},children:[(0,r.jsx)(_.JO,{name:"asset_group"}),t===Q?(0,r.jsx)("div",{children:"Ungrouped assets"}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("strong",{children:t}),t!==Q?(0,r.jsx)(i.x,{margin:{left:12},children:(0,r.jsx)(F.rU,{to:(0,N.$U)(n,"/asset-groups/".concat(t)),children:(0,r.jsxs)(i.x,{flex:{direction:"row",alignItems:"center",gap:4},children:[(0,r.jsx)("span",{children:"View lineage"}),(0,r.jsx)(_.JO,{name:"open_in_new",size:16,color:R.Es()})]})})}):null]})]}),(0,r.jsxs)(i.x,{flex:{direction:"row",alignItems:"center",gap:12},children:[(0,r.jsx)(x.V,{children:1===s?"1 asset":"".concat(s," assets")}),(0,r.jsx)(_.JO,{name:"arrow_drop_down",size:20})]})]})})},G=(0,I.ZP)(z.X2).withConfig({componentId:"sc-7c6c7645-0"})(["cursor:pointer;:focus,:active{outline:none;}",'[aria-label="arrow_drop_down"]{transition:transform 100ms linear;',"}"],_.a1,e=>{let{$open:n}=e;return n?null:"transform: rotate(-90deg);"}),W=(0,u.Ps)(q(),U.s);var K=t(5842),Z=t(20718),Y=t(16336),X=t(82420),ee=t(4378);function en(){let e=(0,d._)(["\n  query WorkspaceAssetsQuery($selector: RepositorySelector!) {\n    repositoryOrError(repositorySelector: $selector) {\n      ... on Repository {\n        id\n        name\n        assetNodes {\n          id\n          ...RepoAssetTableFragment\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"]);return en=function(){return e},e}let et=e=>{let{repoAddress:n}=e;(0,j.Px)();let t=(0,L.Uz)(n);(0,g.j)("Assets: ".concat(t));let o=(0,Z.$)(n),[a,d]=(0,ee.q)({queryKey:"search",defaults:{search:""}}),u=(0,c.a)(er,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0,variables:{selector:o}});(0,y.Hu)(u,"WorkspaceAssetsQuery");let{data:p,loading:h}=u,x=(0,Y.C4)(u,Y.dT),m=a.trim().toLocaleLowerCase().length>0,f=(0,l.useMemo)(()=>(null==p?void 0:p.repositoryOrError.__typename)==="Repository"?p.repositoryOrError.assetNodes:[],[p]),S=(0,X.f)(a,f);return(0,r.jsxs)(i.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,r.jsx)(K.h,{repoAddress:n,tab:"assets",refreshState:x,queryData:u}),(0,r.jsx)(i.x,{padding:{horizontal:24,vertical:16},children:(0,r.jsx)(O.oi,{icon:"search",value:a,onChange:e=>d(e.target.value),placeholder:"Filter by asset name…",style:{width:"340px"}})}),h&&!p?(0,r.jsx)(i.x,{padding:64,children:(0,r.jsx)(k.$,{purpose:"page"})}):h&&!p?(0,r.jsx)(i.x,{flex:{direction:"row",justifyContent:"center"},style:{paddingTop:"100px"},children:(0,r.jsxs)(i.x,{flex:{direction:"row",alignItems:"center",gap:16},children:[(0,r.jsx)(k.$,{purpose:"body-text"}),(0,r.jsx)("div",{style:{color:R.$()},children:"Loading assets…"})]})}):S.length?(0,r.jsx)(V,{repoAddress:n,assets:S}):m?(0,r.jsx)(i.x,{padding:{top:20},children:(0,r.jsx)(s.t,{icon:"search",title:"No matching assets",description:(0,r.jsxs)("div",{children:["No assets matching ",(0,r.jsx)("strong",{children:a})," were found in ",t]})})}):(0,r.jsx)(i.x,{padding:{top:20},children:(0,r.jsx)(s.t,{icon:"search",title:"No assets",description:"No assets were found in ".concat(t)})})]})},er=(0,u.Ps)(en(),W,m.B);var ei=t(100),es=t(3842),eo=t(83738);function el(){let e=(0,d._)(["\n  query SingleGraphQuery($selector: GraphSelector!) {\n    graphOrError(selector: $selector) {\n      ... on Graph {\n        id\n        name\n        description\n      }\n    }\n  }\n"]);return el=function(){return e},e}let ea=e=>{let{repoAddress:n,graphs:t}=e,i=(0,l.useRef)(null),s=(0,$.MG)({count:t.length,getScrollElement:()=>i.current,estimateSize:()=>64,overscan:10}),o=s.getTotalSize(),a=s.getVirtualItems();return(0,r.jsx)("div",{style:{overflow:"hidden"},children:(0,r.jsxs)(z.W2,{ref:i,children:[(0,r.jsx)(z.VJ,{templateColumns:"100%",sticky:!0,children:(0,r.jsx)(z.qN,{children:"Graph"})}),(0,r.jsx)(z.Nh,{$totalHeight:o,children:a.map(e=>{let{index:i,key:s,size:o,start:l}=e,a=t[i];return(0,r.jsx)(ed,{name:a.name,description:a.description,path:a.path,repoAddress:n,height:o,start:l},s)})})]})})},ed=e=>{let{name:n,path:t,description:s,repoAddress:o,start:a,height:d}=e,[c,u]=(0,es.t)(eu,{variables:{selector:{repositoryName:o.name,repositoryLocationName:o.location,graphName:n}}});(0,y.Hu)(u,"SingleGraphQuery"),(0,eo.v5)(c);let{data:p}=u,x=(0,l.useMemo)(()=>s||((null==p?void 0:p.graphOrError.__typename)==="Graph"?p.graphOrError.description:null),[p,s]);return(0,r.jsx)(z.X2,{$height:d,$start:a,children:(0,r.jsx)(ec,{border:"bottom",children:(0,r.jsx)(z.E5,{children:(0,r.jsxs)(i.x,{flex:{direction:"column"},children:[(0,r.jsx)("div",{style:{whiteSpace:"nowrap",fontWeight:500},children:(0,r.jsx)(F.rU,{to:(0,N.$U)(o,t),children:n})}),x?(0,r.jsx)("div",{style:{maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis"},children:(0,r.jsx)(h.YS,{style:{color:R.$(),whiteSpace:"nowrap"},children:x})}):null]})})})})},ec=(0,I.ZP)(i.x).withConfig({componentId:"sc-bde96e32-0"})(["display:grid;grid-template-columns:100%;height:100%;"]),eu=(0,u.Ps)(el());var ep=t(44900);function eh(){let e=(0,d._)(["\n  query WorkspaceGraphsQuery($selector: RepositorySelector!) {\n    repositoryOrError(repositorySelector: $selector) {\n      ... on Repository {\n        id\n        usedSolids {\n          definition {\n            ... on CompositeSolidDefinition {\n              id\n              name\n              description\n            }\n          }\n          invocations {\n            pipeline {\n              id\n              name\n            }\n            solidHandle {\n              handleID\n            }\n          }\n        }\n        pipelines {\n          id\n          name\n          isJob\n          graphName\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n"]);return eh=function(){return e},e}let ex=e=>{let{repoAddress:n}=e;(0,j.Px)();let t=(0,L.Uz)(n);(0,g.j)("Graphs: ".concat(t));let o=(0,Z.$)(n),[a,d]=(0,ee.q)({queryKey:"search",defaults:{search:""}}),u=(0,c.a)(em,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0,variables:{selector:o}});(0,y.Hu)(u,"WorkspaceGraphsQuery");let{data:p,loading:h}=u,x=(0,Y.C4)(u,Y.dT),m=a.trim().toLocaleLowerCase(),f=m.length>0,S=(0,l.useMemo)(()=>{let e=null==p?void 0:p.repositoryOrError;if(!e||"Repository"!==e.__typename)return[];let n=Array.from(new Set(e.pipelines.filter(e=>e.isJob&&!(0,ep.pv)(e.name)).map(e=>e.graphName))).map(e=>({name:e,path:"/graphs/".concat(e),description:null}));return e.usedSolids.forEach(e=>{if("CompositeSolidDefinition"===e.definition.__typename){let t=e.invocations[0];t&&n.push({name:e.definition.name,path:"/graphs/".concat(t.pipeline.name,"/").concat(t.solidHandle.handleID,"/"),description:e.definition.description})}}),n.sort((e,n)=>e.name.localeCompare(n.name))},[p]),b=(0,l.useMemo)(()=>{let e=m.toLocaleLowerCase();return S.filter(n=>{let{name:t}=n;return t.toLocaleLowerCase().includes(e)})},[S,m]);return(0,r.jsxs)(i.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,r.jsx)(K.h,{repoAddress:n,tab:"graphs",refreshState:x,queryData:u}),(0,r.jsx)(i.x,{padding:{horizontal:24,vertical:16},children:(0,r.jsx)(O.oi,{icon:"search",value:a,onChange:e=>d(e.target.value),placeholder:"Filter by graph name…",style:{width:"340px"}})}),h&&!p?(0,r.jsx)(i.x,{padding:64,children:(0,r.jsx)(k.$,{purpose:"page"})}):h&&!p?(0,r.jsx)(i.x,{flex:{direction:"row",justifyContent:"center"},style:{paddingTop:"100px"},children:(0,r.jsxs)(i.x,{flex:{direction:"row",alignItems:"center",gap:16},children:[(0,r.jsx)(k.$,{purpose:"body-text"}),(0,r.jsx)("div",{style:{color:R.$()},children:"Loading graphs…"})]})}):b.length?(0,r.jsx)(ea,{repoAddress:n,graphs:b}):f?(0,r.jsx)(i.x,{padding:{top:20},children:(0,r.jsx)(s.t,{icon:"search",title:"No matching graphs",description:(0,r.jsxs)("div",{children:["No graphs matching ",(0,r.jsx)("strong",{children:a})," were found in ",t]})})}):(0,r.jsx)(i.x,{padding:{top:20},children:(0,r.jsx)(s.t,{icon:"search",title:"No graphs",description:"No graphs were found in ".concat(t)})})]})},em=(0,u.Ps)(eh(),m.B);var ej=t(63485);let eg=e=>{let{repoAddress:n,jobs:t}=e,i=(0,l.useRef)(null),s=(0,$.MG)({count:t.length,getScrollElement:()=>i.current,estimateSize:()=>64,overscan:10}),o=s.getTotalSize(),a=s.getVirtualItems();return(0,r.jsx)("div",{style:{overflow:"hidden"},children:(0,r.jsxs)(z.W2,{ref:i,children:[(0,r.jsx)(ej.I,{}),(0,r.jsx)(z.Nh,{$totalHeight:o,children:a.map(e=>{let{index:i,key:s,size:o,start:l}=e,a=t[i];return(0,r.jsx)(ej.b,{name:a.name,isJob:a.isJob,repoAddress:n,height:o,start:l},s)})})]})})};var ef=t(92322),ey=t(73658);function eS(){let e=(0,d._)(["\n  query WorkspaceJobsQuery($selector: RepositorySelector!) {\n    repositoryOrError(repositorySelector: $selector) {\n      ... on Repository {\n        id\n        name\n        pipelines {\n          id\n          name\n          isJob\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n"]);return eS=function(){return e},e}let eb=[],ev=e=>{let{repoAddress:n}=e,t=(0,ef.se)("WorkspaceJobsRoot");(0,j.Px)();let o=(0,ei.Ux)(n),a=(0,L.Uz)(n);(0,g.j)("Jobs: ".concat(a));let d=(0,Z.$)(n),[u,p]=(0,ee.q)({queryKey:"search",defaults:{search:""}}),h=(0,c.a)(eP,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0,variables:{selector:d}}),{data:x,loading:m}=h,f=(0,Y.C4)(h,Y.dT),S=u.trim().toLocaleLowerCase(),b=S.length>0,v=(0,l.useMemo)(()=>(null==x?void 0:x.repositoryOrError.__typename)==="Repository"?x.repositoryOrError.pipelines:o?o.repository.pipelines:eb,[x,o]),P=v===eb;(0,l.useLayoutEffect)(()=>{P||t.endTrace()},[P,t]),(0,y.j$)("WorkspaceJobs",!P);let N=(0,l.useMemo)(()=>{let e=S.toLocaleLowerCase();return v.filter(n=>{let{name:t}=n;return!(0,ep.pv)(t)&&t.toLocaleLowerCase().includes(e)})},[v,S]),w=!x&&m;return(0,r.jsxs)(i.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,r.jsx)(K.h,{repoAddress:n,tab:"jobs",refreshState:f,queryData:h}),(0,r.jsx)(i.x,{padding:{horizontal:24,vertical:16},children:(0,r.jsx)(O.oi,{icon:"search",value:u,onChange:e=>p(e.target.value),placeholder:"Filter by job name…",style:{width:"340px"},rightElement:w?(0,r.jsx)(ey.W,{tooltipContent:"Loading jobs…"}):void 0})}),P&&!x?(0,r.jsx)(i.x,{padding:64,children:(0,r.jsx)(k.$,{purpose:"page"})}):P&&!x?(0,r.jsx)(i.x,{flex:{direction:"row",justifyContent:"center"},style:{paddingTop:"100px"},children:(0,r.jsxs)(i.x,{flex:{direction:"row",alignItems:"center",gap:16},children:[(0,r.jsx)(k.$,{purpose:"body-text"}),(0,r.jsx)("div",{style:{color:R.$()},children:"Loading jobs…"})]})}):N.length?(0,r.jsx)(eg,{repoAddress:n,jobs:N}):b?(0,r.jsx)(i.x,{padding:{top:20},children:(0,r.jsx)(s.t,{icon:"search",title:"No matching jobs",description:(0,r.jsxs)("div",{children:["No jobs matching ",(0,r.jsx)("strong",{children:u})," were found in ",a]})})}):(0,r.jsx)(i.x,{padding:{top:20},children:(0,r.jsx)(s.t,{icon:"search",title:"No jobs",description:"No jobs were found in ".concat(a)})})]})},eP=(0,u.Ps)(eS(),m.B);var eN=t(49853),ew=t(89776),eC=t(19126),eA=t.n(eC),eE=t(41061),ek=t(41830),eR=t(56789);function eO(){let e=(0,d._)(["\n  fragment OpCardSolidDefinitionFragment on ISolidDefinition {\n    name\n    description\n    metadata {\n      key\n      value\n    }\n    inputDefinitions {\n      name\n    }\n    outputDefinitions {\n      name\n    }\n    ...OpNodeDefinitionFragment\n  }\n\n  ","\n"]);return eO=function(){return e},e}let e_=e=>{let{name:n,inputDefinitions:t,outputDefinitions:s}=e.definition,o=(0,eR.og)({name:n,inputs:t.map(e=>({definition:e,dependsOn:[]})),outputs:s.map(e=>({definition:e,dependedBy:[]})),definition:{description:null,assetNodes:[]}},{x:0,y:0});return(0,r.jsx)(i.x,{padding:24,children:(0,r.jsx)(eF,{style:{height:o.bounds.height},children:(0,r.jsx)(ek.Un,{invocation:void 0,definition:e.definition,minified:!1,onClick:()=>{},onDoubleClick:()=>{},onEnterComposite:()=>{},onHighlightEdges:()=>{},layout:o,selected:!1,focused:!1,highlightedEdges:[],dim:!1})})})},e$=(0,u.Ps)(eO(),ek.WH),eF=I.ZP.div.withConfig({componentId:"sc-c5eb3a53-0"})(["flex:1;max-width:450px;position:relative;"]);var eI=t(96266);function eT(){let e=(0,d._)(["\n  query UsedSolidDetailsQuery($name: String!, $repositorySelector: RepositorySelector!) {\n    repositoryOrError(repositorySelector: $repositorySelector) {\n      ... on Repository {\n        id\n        usedSolid(name: $name) {\n          definition {\n            ...OpCardSolidDefinitionFragment\n            ...SidebarOpDefinitionFragment\n          }\n          invocations {\n            pipeline {\n              id\n              name\n            }\n            solidHandle {\n              handleID\n            }\n          }\n        }\n      }\n    }\n  }\n\n  ","\n  ","\n"]);return eT=function(){return e},e}let eL=e=>{let{name:n,onClickInvocation:t,repoAddress:i}=e,s=(0,Z.$)(i),o=(0,c.a)(eU,{variables:{name:n,repositorySelector:s}});return(0,y.Hu)(o,"UsedSolidDetailsQuery"),(0,r.jsx)(P.g,{queryResult:o,children:e=>{let{repositoryOrError:n}=e;if(!((null==n?void 0:n.__typename)==="Repository"&&n.usedSolid))return null;let i=n.usedSolid;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e_,{definition:i.definition}),(0,r.jsx)(eI.I,{definition:i.definition,showingSubgraph:!1,onClickInvocation:t,getInvocations:()=>i.invocations.map(e=>({handleID:e.solidHandle.handleID,pipelineName:e.pipeline.name}))})]})}})},eU=(0,u.Ps)(eT(),e$,eI.u),ez=I.ZP.div.withConfig({componentId:"sc-8ea6aaab-0"})(["overflow-y:scroll;flex:1;"]);var eD=t(13233);function eM(){let e=(0,d._)(["\n  query OpsRootQuery($repositorySelector: RepositorySelector!) {\n    repositoryOrError(repositorySelector: $repositorySelector) {\n      ... on Repository {\n        id\n        usedSolids {\n          ...OpsRootUsedSolid\n        }\n      }\n    }\n  }\n\n  fragment OpsRootUsedSolid on UsedSolid {\n    definition {\n      name\n      ...OpTypeSignatureFragment\n    }\n    invocations {\n      pipeline {\n        id\n        isJob\n        name\n      }\n    }\n  }\n\n  ","\n"]);return eM=function(){return e},e}let eH=eE.qj,eJ=eE.Z8,eq=eE.aV;function eQ(e){let n={};for(let t of e)for(let e of t)n[e]=!0;return Object.keys(n).sort((e,n)=>e.localeCompare(n))}let eV=e=>{(0,j.Px)(),(0,g.j)("Ops");let{name:n}=(0,a.UO)(),{repoAddress:t}=e,i=(0,Z.$)(t),s=(0,c.a)(eK,{variables:{repositorySelector:i}});return(0,y.Hu)(s,"OpsRootQuery"),(0,r.jsx)("div",{style:{flex:1,minHeight:0},children:(0,r.jsx)(P.g,{queryResult:s,children:i=>{let{repositoryOrError:s}=i;return(null==s?void 0:s.__typename)==="Repository"&&s.usedSolids?(0,r.jsx)(eB,{...e,name:n,repoAddress:t,usedSolids:s.usedSolids}):null}})})},eB=e=>{let{name:n,repoAddress:t,usedSolids:o}=e,d=(0,a.k6)(),c=(0,a.TH)(),{q:u,typeExplorer:p}=eA().parse(c.search,{ignoreQueryPrefix:!0}),h=[{token:"name",values:()=>o.map(e=>e.definition.name)},{token:"job",values:()=>eQ(o.map(e=>e.invocations.filter(e=>!e.pipeline.isJob).map(e=>e.pipeline.name)))},{token:"pipeline",values:()=>eQ(o.map(e=>e.invocations.filter(e=>e.pipeline.isJob).map(e=>e.pipeline.name)))},{token:"input",values:()=>eQ(o.map(e=>e.definition.inputDefinitions.map(e=>e.type.displayName)))},{token:"output",values:()=>eQ(o.map(e=>e.definition.outputDefinitions.map(e=>e.type.displayName)))}],x=(0,eN.HE)(u||"",h),m=o.filter(e=>{for(let n of x)if(("name"===n.token||void 0===n.token)&&!e.definition.name.startsWith(n.value)||("pipeline"===n.token||"job"===n.token)&&!e.invocations.some(e=>e.pipeline.name===n.value)||"input"===n.token&&!e.definition.inputDefinitions.some(e=>e.type.displayName.startsWith(n.value))||"output"===n.token&&!e.definition.outputDefinitions.some(e=>e.type.displayName.startsWith(n.value)))return!1;return!0}),j=o.find(e=>e.definition.name===n),g=e=>{d.replace({search:"?".concat(eA().stringify({q:(0,eN.jP)(e)}))})},f=e=>{d.replace((0,N.$U)(t,"/ops/".concat(e,"?").concat(eA().stringify({q:u}))))};l.useEffect(()=>{1!==m.length||j&&m[0]===j||f(m[0].definition.name),"string"==typeof p&&g([...x,{token:"input",value:p}])});let y=l.useCallback(e=>{let{pipelineName:n,handleID:r}=e;d.push((0,N.$U)(t,"/pipeline_or_job/".concat(n,"/").concat(r.split(".").join("/"))))},[d,t]);return(0,r.jsx)("div",{style:{height:"100%",display:"flex"},children:(0,r.jsx)(ew.O,{identifier:"ops",firstInitialPercent:40,firstMinSize:420,first:(0,r.jsxs)(eX,{children:[(0,r.jsx)(i.x,{padding:{vertical:12,horizontal:24},border:"bottom",children:(0,r.jsx)(eN.Gf,{values:x,onChange:e=>g(e),suggestionProviders:h,placeholder:"Filter by name or input/output type..."})}),(0,r.jsx)("div",{style:{flex:1},children:(0,r.jsx)(eH,{nonce:window.__webpack_nonce__,children:e=>{let{height:n,width:t}=e;return(0,r.jsx)(eG,{height:n,width:t,selected:j,onClickOp:f,items:m.sort((e,n)=>e.definition.name.localeCompare(n.definition.name))})}})})]}),second:j?(0,r.jsx)(ez,{children:(0,r.jsx)(eL,{name:j.definition.name,onClickInvocation:y,repoAddress:t})}):(0,r.jsx)(i.x,{padding:{vertical:64},children:(0,r.jsx)(s.t,{icon:"no-results",title:"No op selected",description:"Select an op to see its definition and invocations"})})})})},eG=e=>{let{items:n,selected:t}=e,i=l.useRef(new eE.t1({defaultHeight:60,fixedWidth:!0})),s=l.useRef(e.width);e.width!==s.current&&(i.current.clearAll(),s.current=e.width);let o=t?n.findIndex(e=>e===t):void 0;return(0,r.jsx)(eW,{children:(0,r.jsx)(eq,{width:e.width,height:e.height,rowCount:e.items.length,rowHeight:i.current.rowHeight,scrollToIndex:o,className:"solids-list",rowRenderer:n=>{let{parent:t,index:s,key:o,style:l}=n,a=e.items[s];return(0,r.jsx)(eJ,{cache:i.current,index:s,parent:t,children:(0,r.jsxs)(eZ,{style:l,$selected:a===e.selected,onClick:()=>e.onClickOp(a.definition.name),children:[(0,r.jsx)(eY,{children:a.definition.name}),(0,r.jsx)("div",{children:(0,r.jsx)(eD.z,{definition:a.definition})})]})},o)},overscanRowCount:10})})},eW=I.ZP.div.withConfig({componentId:"sc-c90dcff1-0"})([".solids-list:focus{outline:none;}"]),eK=(0,u.Ps)(eM(),eD.C),eZ=I.ZP.div.withConfig({componentId:"sc-c90dcff1-1"})(["align-items:flex-start;background:",";box-shadow:"," 4px 0 0 inset,"," 0 -1px 0 inset;color:",";cursor:pointer;font-size:14px;display:flex;flex-direction:column;gap:8px;padding:12px 24px;user-select:none;"],e=>{let{$selected:n}=e;return n?R.fk():R.v8()},e=>{let{$selected:n}=e;return n?R.yM():"transparent"},R.wL(),e=>{let{$selected:n}=e;return n?R.Ep():R.$()}),eY=I.ZP.div.withConfig({componentId:"sc-c90dcff1-2"})(["flex:1;font-weight:600;"]),eX=I.ZP.div.withConfig({componentId:"sc-c90dcff1-3"})(["display:flex;flex-direction:column;height:100%;"]),e0=e=>{let{repoAddress:n}=e;(0,j.Px)();let t=(0,L.Uz)(n);return(0,g.j)("Ops: ".concat(t)),(0,r.jsxs)(i.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,r.jsx)(K.h,{repoAddress:n,tab:"ops"}),(0,r.jsx)(eV,{repoAddress:n})]})};var e1=t(35002),e2=t(6624),e4=t(87209);let e3=e=>{let{repoAddress:n,schedules:t,headerCheckbox:i,checkedKeys:s,onToggleCheckFactory:o}=e,a=l.useRef(null),d=(0,$.MG)({count:t.length,getScrollElement:()=>a.current,estimateSize:()=>64,overscan:10}),c=d.getTotalSize(),u=d.getVirtualItems();return(0,r.jsx)("div",{style:{overflow:"hidden"},children:(0,r.jsxs)(z.W2,{ref:a,children:[(0,r.jsx)(e2.o,{checkbox:i}),(0,r.jsx)(z.Nh,{$totalHeight:c,children:u.map(e=>{let{index:l,key:a,size:d,start:c}=e,u=t[l],p=(0,e4.g)(n,u.name);return(0,r.jsx)(e2.i,{name:u.name,repoAddress:n,scheduleState:u.scheduleState,checked:s.has(p),showCheckboxColumn:!!i,onToggleChecked:o(p),height:d,start:c},a)})})]})})};var e6=t(52154),e8=t(77044),e9=t(17702),e5=t(70468),e7=t(2389),ne=t(10481),nn=t(2949);function nt(){let e=(0,d._)(["\n  query WorkspaceSchedulesQuery($selector: RepositorySelector!) {\n    repositoryOrError(repositorySelector: $selector) {\n      ... on Repository {\n        id\n        name\n        schedules {\n          id\n          name\n          description\n          scheduleState {\n            id\n            ...BasicInstigationStateFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"]);return nt=function(){return e},e}let nr=[],ni=e=>{let{repoAddress:n}=e;(0,j.Px)();let t=(0,ei.Ux)(n),o=(0,L.Uz)(n);(0,g.j)("Schedules: ".concat(o));let a=(0,Z.$)(n),[d,u]=(0,ee.q)({queryKey:"search",defaults:{search:""}}),p=(0,nn.g)(),h=(0,l.useMemo)(()=>[p],[p]),{button:x,activeFiltersJsx:m}=(0,ne.m)({filters:h}),f=(0,c.a)(ns,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0,variables:{selector:a}});(0,y.Hu)(f,"WorkspaceSchedulesQuery");let{data:S,loading:b}=f,v=(0,Y.C4)(f,Y.dT),P=d.trim().toLocaleLowerCase(),N=P.length>0,w=(0,l.useMemo)(()=>(null==S?void 0:S.repositoryOrError.__typename)==="Repository"?S.repositoryOrError.schedules:t?t.repository.schedules:nr,[S,t]),C=nr===w,{state:A}=p,E=(0,l.useMemo)(()=>A.size?w.filter(e=>{let{scheduleState:n}=e;return A.has(n.status)}):w,[w,A]),_=(0,l.useMemo)(()=>{let e=P.toLocaleLowerCase();return E.filter(n=>{let{name:t}=n;return t.toLocaleLowerCase().includes(e)})},[E,P]),$=_.length>0,F=(0,l.useMemo)(()=>_.filter(e=>{let{scheduleState:n}=e;return(0,e8.i)(n)}),[_]),I=(0,l.useMemo)(()=>F.map(e=>{let{name:t}=e;return(0,e4.g)(n,t)}),[F,n]),[{checkedIds:T},{onToggleFactory:U,onToggleAll:z}]=(0,e6.a)(I),D=(0,l.useMemo)(()=>F.filter(e=>{let{name:t}=e;return T.has((0,e4.g)(n,t))}).map(e=>{let{name:t,scheduleState:r}=e;return{repoAddress:n,scheduleName:t,scheduleState:r}}),[F,T,n]),M=I.length,H=T.size,J=I.length>0,q=b&&!S;return(0,r.jsxs)(i.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,r.jsx)(K.h,{repoAddress:n,tab:"schedules",refreshState:v,queryData:f}),(0,r.jsxs)(i.x,{padding:{horizontal:24,vertical:16},flex:{justifyContent:"space-between"},children:[(0,r.jsxs)(i.x,{flex:{direction:"row",gap:12},children:[x,(0,r.jsx)(O.oi,{icon:"search",value:d,onChange:e=>{u(e.target.value),z(!1)},placeholder:"Filter by schedule name…",style:{width:"340px"},rightElement:q?(0,r.jsx)(ey.W,{tooltipContent:"Loading schedules…"}):void 0})]}),(0,r.jsx)(e1.u,{content:"You do not have permission to start or stop these schedules",canShow:$&&!J,placement:"top-end",useDisabledButtonTooltipFix:!0,children:(0,r.jsx)(e5._,{schedules:D,onDone:()=>v.refetch()})})]}),m.length?(0,r.jsx)(i.x,{padding:{vertical:8,horizontal:24},border:"top-and-bottom",flex:{direction:"row",gap:8},children:m}):null,C&&!S?(0,r.jsx)(i.x,{padding:64,children:(0,r.jsx)(k.$,{purpose:"page"})}):C&&!S?(0,r.jsx)(i.x,{flex:{direction:"row",justifyContent:"center"},style:{paddingTop:"100px"},children:(0,r.jsxs)(i.x,{flex:{direction:"row",alignItems:"center",gap:16},children:[(0,r.jsx)(k.$,{purpose:"body-text"}),(0,r.jsx)("div",{style:{color:R.$()},children:"Loading schedules…"})]})}):_.length?(0,r.jsx)(e3,{repoAddress:n,schedules:_,headerCheckbox:J?(0,r.jsx)(e7.W,{checkedCount:H,totalCount:M,onToggleAll:z}):void 0,checkedKeys:T,onToggleCheckFactory:U}):N?(0,r.jsx)(i.x,{padding:{top:20},children:(0,r.jsx)(s.t,{icon:"search",title:"No matching schedules",description:(0,r.jsxs)("div",{children:["No schedules matching ",(0,r.jsx)("strong",{children:d})," were found in ",o]})})}):(0,r.jsx)(i.x,{padding:{top:20},children:(0,r.jsx)(s.t,{icon:"search",title:"No schedules",description:"No schedules were found in ".concat(o)})})]})},ns=(0,u.Ps)(nt(),e9.i,m.B);var no=t(53029),nl=t(40389);let na=e=>{let{repoAddress:n,sensors:t,headerCheckbox:i,checkedKeys:s,onToggleCheckFactory:o}=e,a=l.useRef(null),d=(0,$.MG)({count:t.length,getScrollElement:()=>a.current,estimateSize:()=>64,overscan:10}),c=d.getTotalSize(),u=d.getVirtualItems();return(0,r.jsx)("div",{style:{overflow:"hidden"},children:(0,r.jsxs)(z.W2,{ref:a,children:[(0,r.jsx)(no.KF,{checkbox:i}),(0,r.jsx)(z.Nh,{$totalHeight:c,children:u.map(e=>{let{index:l,key:a,size:d,start:c}=e,u=t[l],p=(0,nl.x)(n,u.name);return(0,r.jsx)(no.Rx,{name:u.name,repoAddress:n,sensorState:u.sensorState,checked:s.has(p),showCheckboxColumn:!!i,onToggleChecked:o(p),height:d,start:c},a)})})]})})};var nd=t(64265);function nc(){let e=(0,d._)(["\n  query WorkspaceSensorsQuery($selector: RepositorySelector!) {\n    repositoryOrError(repositorySelector: $selector) {\n      ... on Repository {\n        id\n        name\n        sensors {\n          id\n          name\n          description\n          sensorState {\n            id\n            ...BasicInstigationStateFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"]);return nc=function(){return e},e}let nu=[],np=e=>{let{repoAddress:n}=e;(0,j.Px)();let t=(0,ei.Ux)(n),o=(0,L.Uz)(n);(0,g.j)("Sensors: ".concat(o));let a=(0,Z.$)(n),[d,u]=(0,ee.q)({queryKey:"search",defaults:{search:""}}),p=(0,nn.g)(),h=(0,l.useMemo)(()=>[p],[p]),{button:x,activeFiltersJsx:m}=(0,ne.m)({filters:h}),f=(0,c.a)(nh,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0,variables:{selector:a}});(0,y.Hu)(f,"WorkspaceSensorsQuery");let{data:S,loading:b}=f,v=(0,Y.C4)(f,Y.dT),P=d.trim().toLocaleLowerCase(),N=P.length>0,w=(0,l.useMemo)(()=>(null==S?void 0:S.repositoryOrError.__typename)==="Repository"?S.repositoryOrError.sensors:t?t.repository.sensors:nu,[t,S]),C=nu===w,{state:A}=p,E=(0,l.useMemo)(()=>A.size?w.filter(e=>{let{sensorState:n}=e;return A.has(n.status)}):w,[w,A]),_=(0,l.useMemo)(()=>{let e=P.toLocaleLowerCase();return E.filter(n=>{let{name:t}=n;return t.toLocaleLowerCase().includes(e)})},[E,P]),$=_.length>0,F=(0,l.useMemo)(()=>_.filter(e=>{let{sensorState:n}=e;return(0,e8.i)(n)}),[_]),I=(0,l.useMemo)(()=>F.map(e=>{let{name:t}=e;return(0,nl.x)(n,t)}),[F,n]),[{checkedIds:T},{onToggleFactory:U,onToggleAll:z}]=(0,e6.a)(I),D=(0,l.useMemo)(()=>F.filter(e=>{let{name:t}=e;return T.has((0,nl.x)(n,t))}).map(e=>{let{name:t,sensorState:r}=e;return{repoAddress:n,sensorName:t,sensorState:r}}),[F,T,n]),M=I.length,H=T.size,J=I.length>0,q=b&&!S;return(0,r.jsxs)(i.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,r.jsx)(K.h,{repoAddress:n,tab:"sensors",refreshState:v,queryData:f}),(0,r.jsxs)(i.x,{padding:{horizontal:24,vertical:16},flex:{justifyContent:"space-between"},children:[(0,r.jsxs)(i.x,{flex:{direction:"row",gap:12},children:[x,(0,r.jsx)(O.oi,{icon:"search",value:d,onChange:e=>u(e.target.value),placeholder:"Filter by sensor name…",style:{width:"340px"},rightElement:q?(0,r.jsx)(ey.W,{tooltipContent:"Loading sensors…"}):void 0})]}),(0,r.jsx)(e1.u,{content:"You do not have permission to start or stop these sensors",canShow:$&&!J,placement:"top-end",useDisabledButtonTooltipFix:!0,children:(0,r.jsx)(nd.b,{sensors:D,onDone:()=>v.refetch()})})]}),m.length?(0,r.jsx)(i.x,{padding:{vertical:8,horizontal:24},border:"top-and-bottom",flex:{direction:"row",gap:8},children:m}):null,C&&!S?(0,r.jsx)(i.x,{padding:64,children:(0,r.jsx)(k.$,{purpose:"page"})}):C&&!S?(0,r.jsx)(i.x,{flex:{direction:"row",justifyContent:"center"},style:{paddingTop:"100px"},children:(0,r.jsxs)(i.x,{flex:{direction:"row",alignItems:"center",gap:16},children:[(0,r.jsx)(k.$,{purpose:"body-text"}),(0,r.jsx)("div",{style:{color:R.$()},children:"Loading sensors…"})]})}):_.length?(0,r.jsx)(na,{repoAddress:n,sensors:_,headerCheckbox:J?(0,r.jsx)(e7.W,{checkedCount:H,totalCount:M,onToggleAll:z}):void 0,checkedKeys:T,onToggleCheckFactory:U}):N?(0,r.jsx)(i.x,{padding:{top:20},children:(0,r.jsx)(s.t,{icon:"search",title:"No matching sensors",description:(0,r.jsxs)("div",{children:["No sensors matching ",(0,r.jsx)("strong",{children:d})," were found in ",o]})})}):(0,r.jsx)(i.x,{padding:{top:20},children:(0,r.jsx)(s.t,{icon:"search",title:"No sensors",description:"No sensors were found in ".concat(o)})})]})},nh=(0,u.Ps)(nc(),e9.i,m.B);var nx=t(4199),nm=t(17872),nj=t(49308),ng=t(73407),nf=t(13249),ny=t(32319),nS=t(39268),nb=t(71348);let nv=()=>{let{paused:e}=(0,nb.dx)();return(0,r.jsx)(e1.u,{content:e?"Auto-materializing is paused. New materializations will not be triggered by auto-materialization policies.":"",canShow:e,children:(0,r.jsx)(F.rU,{to:"/health",style:{outline:"none"},children:(0,r.jsx)(x.V,{icon:e?"toggle_off":"toggle_on",intent:e?"warning":"success",children:e?"Auto-materialize off":"Auto-materialize on"})})})};var nP=t(75442),nN=t(45360),nw=t(30813),nC=t(89918),nA=t(72447);function nE(){let e=(0,d._)(["\n  query AssetGroupMetadataQuery($selector: AssetGroupSelector!) {\n    assetNodes(group: $selector) {\n      id\n      autoMaterializePolicy {\n        __typename\n      }\n    }\n  }\n"]);return nE=function(){return e},e}let nk=e=>{let{repoAddress:n,tab:t}=e;(0,j.Px)();let{groupName:s,0:o}=(0,a.UO)(),d=(0,a.k6)();(0,g.j)("Asset Group: ".concat(s));let c=(0,N.$U)(n,"/asset-groups/".concat(s)),u=(0,l.useMemo)(()=>({groupName:s,repositoryLocationName:n.location,repositoryName:n.name}),[s,n]),x=(0,l.useCallback)((e,n)=>{d[n]({pathname:"".concat(c,"/").concat((0,v.gY)(e)),search:d.location.search})},[c,d]),m=(0,l.useCallback)((e,n)=>{let t;t=n.groupName&&n.repoAddress?(0,N.$U)(n.repoAddress,"/asset-groups/".concat(n.groupName,"/lineage/").concat(n.assetKey.path.map(encodeURIComponent).join("/"))):(0,nP.p)(n.assetKey,{view:"definition"}),e.metaKey?window.open(t,"_blank"):d.push(t)},[d]),f=(0,nN.l)(),{filterFn:y}=f,S=l.useMemo(()=>({groupSelector:u,hideNodesMatching:e=>!y(e)}),[u,y]),b=l.useMemo(()=>({preferAssetRendering:!0,explodeComposites:!0}),[]);return(0,r.jsxs)(nj.T,{style:{display:"flex",flexDirection:"column",paddingBottom:0},children:[(0,r.jsx)(p.m,{title:(0,r.jsx)(h.X6,{children:s}),right:(0,r.jsx)(nA.i,{label:"Reload definitions"}),tags:(0,r.jsx)(nO,{groupSelector:u,repoAddress:n}),tabs:(0,r.jsxs)(i.x,{flex:{direction:"row",justifyContent:"space-between",alignItems:"center"},margin:{right:4},children:[(0,r.jsxs)(ng.mQ,{selectedTabId:t,children:[(0,r.jsx)(nC.f,{id:"lineage",title:"Lineage",to:"".concat(c,"/lineage")}),(0,r.jsx)(nC.f,{id:"list",title:"List",to:"".concat(c,"/list")})]}),(0,r.jsx)(nf.wP,{})]})}),"lineage"===t?(0,r.jsx)(nw.OK,{fetchOptions:S,options:b,explorerPath:(0,v.p3)(o||"lineage/"),onChangeExplorerPath:x,onNavigateToSourceAssetNode:m,assetFilterState:f}):(0,r.jsx)(ny.fv,{groupSelector:u,prefixPath:o.split("/").map(decodeURIComponent).filter(Boolean),setPrefixPath:e=>d.push("".concat(c,"/list/").concat(e.map(encodeURIComponent).join("/")))})]})},nR=(0,u.Ps)(nE()),nO=e=>{let{repoAddress:n,groupSelector:t}=e,i=(0,nS.I)(),s=(0,c.a)(nR,{variables:{selector:t}});(0,y.Hu)(s,"AssetGroupMetadataQuery");let{data:o}=s;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(x.V,{icon:"asset_group",children:["Asset Group in ",(0,r.jsx)(f.b,{repoAddress:n})]}),(()=>{let e=null==o?void 0:o.assetNodes;return e&&0!==e.length&&"has-global-amp"===i&&e.some(e=>!!e.autoMaterializePolicy)?(0,r.jsx)(nv,{}):null})()]})};var n_=t(96011),n$=t(36803);let nF=e=>{let{repoAddress:n}=e,t=(0,a.TH)(),{pipelinePath:i}=(0,a.UO)(),{loading:s}=(0,l.useContext)(ei.C5),{loading:o}=(0,l.useContext)(n$.IT),d=(0,ei.Ux)(n);if((0,y.j$)("Workspace",s),(0,y.j$)("Permissions",o),s||o)return null;let{pipelineName:c}=(0,v.p3)(i),u=(0,ei.E8)(d,c),{pathname:p,search:h}=t,x=p.replace("/pipeline_or_job/",u?"/jobs/":"/pipelines/");return(0,r.jsx)(a.l_,{to:"".concat(x).concat(h)})};var nI=t(21473),nT=t(46352),nL=t(62233),nU=t(28025),nz=t(1040),nD=t(76016);function nM(){let e=(0,d._)(["\n  query ConfigForRunQuery($runId: ID!) {\n    runOrError(runId: $runId) {\n      ... on Run {\n        id\n        mode\n        runConfigYaml\n        solidSelection\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n"]);return nM=function(){return e},e}let nH=e=>{let{repoAddress:n}=e,{permissions:{canLaunchPipelineExecution:t},loading:i}=(0,n$.xz)(n.location),{repoPath:s,pipelinePath:o,runId:l}=(0,a.UO)();return((0,y.j$)("Permissions",i),i)?null:t?(0,r.jsx)(nJ,{pipelinePath:o,repoAddress:n,runId:l}):(0,r.jsx)(a.l_,{to:"/locations/".concat(s,"/pipeline_or_job/").concat(o)})},nJ=e=>{let{pipelinePath:n,repoAddress:t,runId:i}=e,s=(0,v.p3)(n),{pipelineName:o}=s,l=(0,ei.Ux)(t),d=(0,ei.E8)(l,o);(0,nD.b)(s,d);let[u,p]=(0,nz.aC)(t,o),h=(0,c.a)(nq,{variables:{runId:i},onCompleted:e=>{let n=null==e?void 0:e.runOrError,t=(null==n?void 0:n.__typename)==="Run"?n:null;if(!t)return;let{runConfigYaml:r,mode:i,solidSelection:s}=t;if(!r&&!i&&!s)return;let o={name:"From run ".concat(t.id.slice(0,8))};"string"==typeof r&&(o.runConfigYaml=r),"string"==typeof i&&(o.mode=i);let l=null;s instanceof Array&&s.length>0?l=s:"string"==typeof s&&s&&(l=[s]),o.solidSelection=l,o.solidSelectionQuery=l?l.join(","):"*",p(e=>(0,nz.f0)(e,o))}});(0,y.Hu)(h,"ConfigForRunQuery");let{data:x,loading:m}=h,j=null==x?void 0:x.runOrError;return m?(0,r.jsx)(nU.m,{}):j&&"RunNotFoundError"!==j.__typename?"PythonError"===j.__typename?(0,r.jsx)(nL.U,{icon:"error",title:"Python error",description:j.message}):(0,r.jsx)(a.l_,{to:{pathname:(0,N.$U)(t,"/".concat(d?"jobs":"pipelines","/").concat(o,"/playground"))}}):(0,r.jsx)(nL.U,{icon:"error",title:"No run found",description:"The run with this ID does not exist or has been cleaned up."})},nq=(0,u.Ps)(nM(),m.B),nQ=e=>{let{repoAddress:n}=e,{permissions:{canLaunchPipelineExecution:t},loading:i}=(0,n$.xz)(n.location);(0,y.j$)("Permissions",i);let{repoPath:s,pipelinePath:o}=(0,a.UO)();return i?null:t?(0,r.jsx)(nV,{pipelinePath:o,repoAddress:n}):(0,r.jsx)(a.l_,{to:"/locations/".concat(s,"/pipeline_or_job/").concat(o)})},nV=e=>{let{pipelinePath:n,repoAddress:t}=e,i=(0,v.p3)(n),{pipelineName:s}=i,o=(0,ei.Ux)(t),d=(0,ei.E8)(o,s);(0,nD.b)(i,d);let[c,u]=(0,nz.aC)(t,s),p=eA().parse(window.location.search,{ignoreQueryPrefix:!0});return(0,l.useEffect)(()=>{if(p.config||p.mode||p.solidSelection||p.tags||p.assetSelection){let e={};"string"==typeof p.config&&(e.runConfigYaml=p.config),"string"==typeof p.mode&&(e.mode=p.mode),p.solidSelection instanceof Array&&p.solidSelection.length>0?e.solidSelection=p.solidSelection:"string"==typeof p.solidSelection&&p.solidSelection&&(e.solidSelection=[p.solidSelection]),"string"==typeof p.solidSelectionQuery&&(e.solidSelectionQuery=p.solidSelectionQuery),Array.isArray(p.tags)&&(e.tags=p.tags),Array.isArray(p.assetSelection)&&(e.assetSelection=p.assetSelection),u(n=>(0,nz.f0)(n,e))}}),(0,r.jsx)(a.l_,{to:{pathname:(0,N.$U)(t,"/".concat(d?"jobs":"pipelines","/").concat(s,"/playground"))}})};var nB=t(89891),nG=t(92506),nW=t(38491),nK=t(75652),nZ=t.n(nK),nY=t(90441),nX=t(88257),n0=t(54516),n1=t(43984),n2=t(68283),n4=t(33182),n3=t(86269);function n6(){let e=(0,d._)(["\n  query LatestRunTagQuery($runsFilter: RunsFilter) {\n    pipelineRunsOrError(filter: $runsFilter, limit: 1) {\n      ... on Runs {\n        results {\n          id\n          status\n          ...RunTimeFragment\n        }\n      }\n    }\n  }\n\n  ","\n"]);return n6=function(){return e},e}let n8={showSeconds:!0,showTimezone:!1},n9=e=>{let{pipelineName:n,repoAddress:t}=e,s=(0,c.a)(n5,{variables:{runsFilter:{pipelineName:n,tags:[{key:n1.H.RepositoryLabelTag,value:(0,L.Wg)(t)}]}},notifyOnNetworkStatusChange:!0});(0,y.Hu)(s,"LatestRunTagQuery"),(0,Y.C4)(s,Y.dT);let o=(0,l.useMemo)(()=>{var e;let n=null===(e=s.data)||void 0===e?void 0:e.pipelineRunsOrError;return n&&"Runs"===n.__typename&&n.results[0]||null},[s]);if(!o)return null;let a={start:o.startTime,end:o.endTime,status:o.status};return(0,r.jsx)(x.V,{intent:(()=>{switch(o.status){case nX.VOA.SUCCESS:return"success";case nX.VOA.CANCELED:case nX.VOA.CANCELING:case nX.VOA.FAILURE:return"danger";default:return"none"}})(),children:(0,r.jsxs)(i.x,{flex:{direction:"row",alignItems:"center",gap:4},children:[(0,r.jsx)(n0.K9,{status:o.status,size:10}),"Latest run:",a?(0,r.jsx)(e1.u,{placement:"bottom",content:(0,r.jsx)(nY.k6,{children:(0,r.jsxs)("tbody",{children:[(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{style:{color:R.Aw()},children:(0,r.jsx)(i.x,{padding:{right:16},children:"Started"})}),(0,r.jsx)("td",{children:a.start?(0,r.jsx)(n3.v,{timestamp:a.start,timeFormat:n8}):(0,n2.Z0)(a.status)})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{style:{color:R.Aw()},children:"Ended"}),(0,r.jsx)("td",{children:a.end?(0,r.jsx)(n3.v,{timestamp:a.end,timeFormat:n8}):(0,n2.Z0)(a.status)})]})]})}),children:(0,r.jsx)(F.rU,{to:"/runs/".concat(o.id),children:(0,r.jsx)(n4.Zr,{run:o})})}):null]})})},n5=(0,u.Ps)(n6(),n4.$X);var n7=t(74283),te=t(4219),tn=t(69698);function tt(){let e=(0,d._)(["\n  query JobMetadataQuery($params: PipelineSelector!, $runsFilter: RunsFilter!) {\n    pipelineOrError(params: $params) {\n      ... on Pipeline {\n        id\n        ...JobMetadataFragment\n      }\n    }\n    assetNodes(pipeline: $params) {\n      id\n      ...JobMetadataAssetNode\n    }\n    pipelineRunsOrError(filter: $runsFilter, limit: 5) {\n      ... on PipelineRuns {\n        results {\n          id\n          ...RunMetadataFragment\n        }\n      }\n    }\n  }\n\n  fragment JobMetadataAssetNode on AssetNode {\n    id\n    autoMaterializePolicy {\n      __typename\n    }\n    assetKey {\n      path\n    }\n  }\n\n  fragment JobMetadataFragment on Pipeline {\n    id\n    isJob\n    name\n    schedules {\n      id\n      mode\n      ...ScheduleSwitchFragment\n    }\n    sensors {\n      id\n      targets {\n        pipelineName\n        mode\n      }\n      ...SensorSwitchFragment\n    }\n  }\n\n  fragment RunMetadataFragment on PipelineRun {\n    id\n    status\n    assets {\n      id\n      key {\n        path\n      }\n    }\n    ...RunTimeFragment\n  }\n\n  ","\n  ","\n  ","\n"]);return tt=function(){return e},e}let tr=e=>{let{pipelineName:n,repoAddress:t}=e,i=function(e,n){let t=(0,c.a)(to,{variables:{runsFilter:{pipelineName:n,tags:[{key:n1.H.RepositoryLabelTag,value:(0,L.Wg)(e)}]},params:{pipelineName:n,repositoryName:e.name,repositoryLocationName:e.location}}}),r=t.data;return(0,y.Hu)(t,"JobMetadataQuery"),(0,l.useMemo)(()=>({assetNodes:(null==r?void 0:r.assetNodes)||null,job:(null==r?void 0:r.pipelineOrError)&&"Pipeline"===r.pipelineOrError.__typename?r.pipelineOrError:null,runsForAssetScan:(null==r?void 0:r.pipelineRunsOrError)&&"Runs"===r.pipelineRunsOrError.__typename?r.pipelineRunsOrError.results:[]}),[r])}(t,n);return(0,r.jsxs)(r.Fragment,{children:[i.job?(0,r.jsx)(ti,{job:i.job,repoAddress:t}):null,(0,r.jsx)(n9,{pipelineName:n,repoAddress:t}),i.assetNodes&&i.assetNodes.some(e=>!!e.autoMaterializePolicy)&&(0,r.jsx)(nv,{}),i.runsForAssetScan?(0,r.jsx)(ts,{relatedAssets:i.assetNodes?i.assetNodes.map(e=>(0,ep.Je)(e.assetKey)):nZ()(i.runsForAssetScan.flatMap(e=>e.assets.map(e=>(0,ep.Je)(e.key))))}):null]})},ti=e=>{let{job:n,repoAddress:t}=e,i=(0,l.useMemo)(()=>(null==n?void 0:n.__typename)==="Pipeline"&&n.schedules.length?n.schedules:[],[n]),s=(0,l.useMemo)(()=>(null==n?void 0:n.__typename)==="Pipeline"&&n.sensors.length?n.sensors:[],[n]);return(0,r.jsx)(n7.I,{schedules:i,sensors:s,repoAddress:t})},ts=e=>{let{relatedAssets:n}=e,[t,s]=(0,l.useState)(!1);if(0===n.length)return null;if(1===n.length){let e=n[0];return(0,r.jsxs)(x.V,{icon:"asset",children:["Asset: ",(0,r.jsx)(F.rU,{to:"/assets/".concat(e),children:e})]})}return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(x.V,{icon:"asset",children:(0,r.jsx)(nB.Z,{color:R.Es(),onClick:()=>s(!0),children:"View ".concat(n.length," assets")})}),(0,r.jsxs)(nG.Vq,{title:"Related assets",canOutsideClickClose:!0,canEscapeKeyClose:!0,isOpen:t,onClose:()=>s(!1),style:{maxWidth:"80%",minWidth:"500px",width:"auto"},children:[n.map((e,t)=>(0,r.jsx)(i.x,{padding:{vertical:12,horizontal:20},border:t<n.length-1?"bottom":null,children:(0,r.jsx)(F.rU,{to:"/assets/".concat(e),style:{wordBreak:"break-word"},children:e},e)},e)),(0,r.jsx)(nG.cN,{topBorder:!0,children:(0,r.jsx)(nW.zx,{intent:"primary",onClick:()=>s(!1),children:"OK"})})]})]})},to=(0,u.Ps)(tt(),te.J,tn.U,n4.$X);var tl=t(1790);let ta=e=>{let{repoAddress:n}=e,t=(0,n$.xz)(n.location),{tabBuilder:s}=(0,l.useContext)(n_.v),o=(0,a.$B)(["/locations/:repoPath/pipelines/:selector/:tab?","/locations/:repoPath/jobs/:selector/:tab?","/locations/:repoPath/pipeline_or_job/:selector/:tab?"]),d=(0,v.p3)(o.params.selector),{pipelineName:c,snapshotId:u}=d,m=(0,ei.Ux)(n),j=null==m?void 0:m.repository.pipelines.find(e=>e.name===c),g=!!(null==j?void 0:j.isJob),y=s({hasLaunchpad:!(null==j?void 0:j.isAssetJob),hasPartitionSet:((null==m?void 0:m.repository.partitionSets)||[]).some(e=>e.pipelineName===c)});return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(p.m,{title:(0,r.jsx)(h.X6,{children:c}),tags:(0,r.jsxs)(i.x,{flex:{direction:"row",alignItems:"center",gap:8,wrap:"wrap"},children:[(0,r.jsxs)(x.V,{icon:"job",children:[g?"Job in ":"Pipeline in ",(0,r.jsx)(f.b,{repoAddress:n})]}),u?null:(0,r.jsx)(tr,{pipelineName:c,repoAddress:n})]}),tabs:(0,r.jsx)(tl.IJ,{repoAddress:n,isJob:g,explorerPath:d,permissions:t,matchingTab:o.params.tab,tabs:y})})})};var td=t(60129),tc=t(80122),tu=t(90731);function tp(){let e=(0,d._)(["\n  query JobBackfillsQuery(\n    $partitionSetName: String!\n    $repositorySelector: RepositorySelector!\n    $cursor: String\n    $limit: Int\n  ) {\n    partitionSetOrError(\n      repositorySelector: $repositorySelector\n      partitionSetName: $partitionSetName\n    ) {\n      ... on PartitionSet {\n        id\n        pipelineName\n        backfills(cursor: $cursor, limit: $limit) {\n          id\n          ...BackfillTableFragment\n        }\n      }\n    }\n  }\n\n  ","\n"]);return tp=function(){return e},e}let th=e=>{let{partitionSetName:n,partitionNames:t,repositorySelector:o,refetchCounter:a}=e,[d,u]=(0,l.useState)(()=>[]),[p,h]=(0,l.useState)(),x=(0,c.a)(tx,{variables:{partitionSetName:n,repositorySelector:o,cursor:p,limit:10}});(0,y.Hu)(x,"JobBackfillsQuery");let m=x.refetch;return(0,l.useEffect)(()=>{a&&m()},[m,a]),(0,r.jsx)(P.g,{queryResult:x,children:e=>{let{partitionSetOrError:n}=e;if("PartitionSetNotFoundError"===n.__typename)return(0,r.jsx)(i.x,{margin:{vertical:20},children:(0,r.jsx)(s.t,{title:"Partition set not found.",icon:"no-results"})});if("PythonError"===n.__typename)return(0,r.jsx)(i.x,{margin:{vertical:20},children:(0,r.jsx)(s.t,{title:"An error occurred.",icon:"no-results"})});let{backfills:o,pipelineName:l}=n;if(!o.length)return(0,r.jsx)(i.x,{margin:{vertical:20},children:(0,r.jsx)(s.t,{title:"No backfills for ".concat(l),icon:"no-results"})});let a={hasPrevCursor:!!p,hasNextCursor:o&&10===o.length,popCursor:()=>{let e=[...d];h(e.pop()),u(e)},advanceCursor:()=>{p&&u(e=>[...e,p]);let e=o&&o[o.length-1].id;e&&h(e)},reset:()=>{u([]),h(void 0)}};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(tu.G,{backfills:o,refetch:m,showBackfillTarget:!1,allPartitions:t}),(0,r.jsx)(tc.b$,{...a})]})}})},tx=(0,u.Ps)(tp(),tu.b);var tm=t(33379),tj=t(37504),tg=t(54048),tf=t(90086),ty=t(67994),tS=t(77851);let tb=e=>{let{counts:n,value:t,onChange:s,allowed:o,disabled:l}=e;return(0,r.jsx)(i.x,{flex:{direction:"row",alignItems:"center",gap:12},style:{overflow:"hidden"},children:o.map(e=>(0,r.jsx)(tj.X,{"data-testid":(0,tS.N)("run-status-".concat(e,"-checkbox")),disabled:l,style:{marginBottom:0,marginLeft:10,minWidth:200},checked:t.includes(e)&&!l,label:"".concat((0,ty.fi)(e)," (").concat(n[e],")"),onChange:()=>s(t.includes(e)?t.filter(n=>n!==e):[...t,e])},e))})};var tv=t(98832),tP=t(97803),tN=t(13549),tw=t(77432),tC=t(57755),tA=t(97145),tE=t(45546),tk=t(59867);function tR(){let e=(0,d._)(["\n  query BackfillSelectorQuery($pipelineSelector: PipelineSelector!) {\n    pipelineSnapshotOrError(activePipelineSelector: $pipelineSelector) {\n      ... on PipelineSnapshot {\n        id\n        name\n        solidHandles {\n          handleID\n          solid {\n            name\n            definition {\n              name\n            }\n            inputs {\n              dependsOn {\n                solid {\n                  name\n                }\n              }\n            }\n            outputs {\n              dependedBy {\n                solid {\n                  name\n                }\n              }\n            }\n          }\n          ...GraphExplorerSolidHandleFragment\n        }\n      }\n    }\n    instance {\n      id\n      ...UsingDefaultLauncherAlertInstanceFragment\n      ...DaemonNotRunningAlertInstanceFragment\n    }\n  }\n\n  ","\n  ","\n  ","\n"]);return tR=function(){return e},e}let tO=e=>{let{partitionSetName:n,onLaunch:t,onCancel:o,onSubmit:d,repoAddress:u,runStatusData:p,pipelineName:h,partitionNames:x}=e,m=(0,a.k6)(),[j,g]=l.useState(Object.keys(p).filter(e=>!p[e]||p[e]===nX.VOA.FAILURE)),[f,y]=l.useState([nX.VOA.NOT_STARTED,nX.VOA.FAILURE]),b=l.useMemo(()=>j.filter(e=>f.includes(p[e])),[j,f,p]),[v,P]=l.useState(!1),[N,w]=l.useState([]),[C,A]=l.useState(""),[E,O]=l.useState({reexecute:!1,fromFailure:!1}),$=(0,Z.$)(u),{data:F}=(0,c.a)(t$,{variables:{pipelineSelector:{...$,pipelineName:h}},fetchPolicy:"network-only"}),I=l.useRef(!0);if(l.useEffect(()=>(I.current=!0,()=>{I.current=!1}),[t]),!F)return(0,r.jsx)(i.x,{margin:{vertical:32},flex:{justifyContent:"center"},children:(0,r.jsx)(k.$,{purpose:"section"})});if("PipelineSnapshot"!==F.pipelineSnapshotOrError.__typename)return(0,r.jsx)(i.x,{margin:20,children:(0,r.jsx)(s.t,{icon:"error",title:"Could not fetch job details"})});let{pipelineSnapshotOrError:T,instance:L}=F,U=(0,S.i)(T.solidHandles).map(e=>e.solid),z=(0,tv.V)(U,C),D=(0,tw.tc)({nodes:z.all,mode:tN.hS.FLAT}).boxes.map(e=>({x:e.x,name:e.node.name})),M=e=>p[e]===nX.VOA.FAILURE,H=x.filter(M),J=function(e){let n={[nX.VOA.SUCCESS]:0,[nX.VOA.NOT_STARTED]:0,[nX.VOA.FAILURE]:0,[nX.VOA.QUEUED]:0,[nX.VOA.STARTED]:0};for(let t of e)n[t.state]=(n[t.state]||0)+1;return n}(j.map(e=>({partitionKey:e,state:p[e]})));return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(nG.a7,{children:(0,r.jsxs)(i.x,{flex:{direction:"column",gap:24},children:[(0,r.jsxs)(tF,{title:"Partitions",children:[(0,r.jsx)(i.x,{children:"Select partitions to materialize. Click and drag to select a range on the timeline."}),(0,r.jsx)(tf.x,{selected:j,setSelected:e=>{let n=new Set(e);g(x.filter(e=>n.has(e))),E.fromFailure&&e.filter(e=>!M(e)).length>0&&O({...E,fromFailure:!1})},health:{runStatusForPartitionKey:e=>p[e]},partitionKeys:x,dimensionType:(0,tP.vH)(x[0])?nX.iVC.TIME_WINDOW:nX.iVC.STATIC}),(0,r.jsx)(tb,{value:f,onChange:y,counts:J,allowed:E.fromFailure?[nX.VOA.FAILURE]:[nX.VOA.NOT_STARTED,nX.VOA.FAILURE,nX.VOA.QUEUED,nX.VOA.STARTED,nX.VOA.SUCCESS]})]}),H.length?(0,r.jsx)(tF,{title:"Reexecution",children:(0,r.jsx)(tj.X,{checked:E.fromFailure,disabled:!b.every(M),onChange:()=>{let e={...E,fromFailure:!E.fromFailure,reexecute:!E.reexecute};e.fromFailure&&y([nX.VOA.FAILURE]),A(""),O(e)},label:(0,r.jsxs)(i.x,{flex:{display:"inline-flex",alignItems:"center"},children:[(0,r.jsx)(i.x,{margin:{right:4},children:"Re-execute from failures"}),(0,r.jsx)(e1.u,{placement:"top",content:"For each partition, if the most recent run failed, launch a re-execution starting from the steps that failed. Only applies for selections of failed partitions.",children:(0,r.jsx)(_.JO,{name:"info",color:R.md()})})]})})}):null,(0,r.jsx)(tF,{title:(0,r.jsxs)(i.x,{flex:{display:"inline-flex",alignItems:"center"},children:[(0,r.jsx)(i.x,{margin:{right:4},children:"Step subset"}),(0,r.jsx)(e1.u,{placement:"top",content:"Applies a step-selection to each run for the requested partitions.",children:(0,r.jsx)(_.JO,{name:"info",color:R.md()})})]}),children:(0,r.jsxs)(i.x,{flex:{direction:"row",alignItems:"center",gap:12},children:[(0,r.jsx)(tk.j,{disabled:E.fromFailure,width:520,items:U,value:C,placeholder:"Type a step subset",onChange:A,autoApplyChanges:!0}),C?(0,r.jsxs)("div",{style:{color:R.$()},children:[D.length," step",1===D.length?"":"s"," selected"]}):null]})}),(0,r.jsxs)(tF,{title:"Tags",children:[(0,r.jsx)(tE.U,{tagsFromSession:N,onChange:w,open:v,onRequestClose:()=>P(!1)}),N.length?(0,r.jsx)("div",{style:{border:"1px solid ".concat(R.im()),borderRadius:8,padding:3},children:(0,r.jsx)(tE.x,{tagsFromSession:N,onRequestEdit:()=>P(!0)})}):(0,r.jsx)("div",{children:(0,r.jsx)(nW.zx,{onClick:()=>P(!0),children:"Add tags to backfill runs"})})]}),(0,r.jsxs)(i.x,{flex:{direction:"column",gap:16},children:[(0,r.jsx)(tg.So,{instance:L}),(0,r.jsx)(tg.d,{instance:L})]})]})}),(0,r.jsxs)(nG.cN,{children:[(0,r.jsx)(nW.zx,{intent:"none",onClick:o,children:"Cancel"}),(0,r.jsx)(t_,{partitionNames:b,partitionSetName:n,reexecutionSteps:!E.fromFailure&&z.all.length<U.length?D.map(e=>e.name):void 0,fromFailure:E.fromFailure,tags:N,onSubmit:d,onSuccess:e=>{(0,tg.Xd)(m,e,!1),null==t||t(e,C)},onError:e=>{(0,tg.mv)(e)},repoAddress:u})]})]})},t_=e=>{let{partitionSetName:n,partitionNames:t,reexecutionSteps:i,fromFailure:s,tags:o,onSuccess:a,onError:d,onSubmit:c,repoAddress:u}=e,p=(0,Z.$)(u),h=l.useRef(!0),[x,{loading:m}]=(0,tm.D)(tC.f);l.useEffect(()=>(h.current=!0,()=>{h.current=!1}),[a]);let j=async()=>{c();let{data:e}=await x({variables:{backfillParams:{selector:{partitionSetName:n,repositorySelector:p},partitionNames:t,reexecutionSteps:i,fromFailure:s,tags:o}}});h.current&&(e&&"LaunchBackfillSuccess"===e.launchPartitionBackfill.__typename?null==a||a(e.launchPartitionBackfill.backfillId,!1):null==d||d(e))},g=t.length,f=null==i?void 0:i.length,y=[m?"Submitting ".concat(g," ").concat(1===g?"run":"runs","…"):g?"Submit ".concat(g," ").concat(1===g?"run":"runs"):"Select partitions to submit",!m&&f?"(".concat(f," selected ").concat(1===f?"step":"steps",")"):""].join(" ");return(0,r.jsx)(tA.C,{runCount:g,config:{title:y,icon:"open_in_new",disabled:!g||m,onClick:j}})},t$=(0,u.Ps)(tR(),b.Q,tg.op,tg.EC),tF=e=>{let{title:n,children:t}=e;return(0,r.jsxs)(i.x,{flex:{direction:"column",gap:4},children:[(0,r.jsx)(h.pm,{children:n}),(0,r.jsx)(i.x,{flex:{direction:"column",gap:8},padding:{top:16},border:"top",children:t})]})};var tI=t(343),tT=t(71406);let tL=e=>{let{partitionNames:n,jobDataByPartition:t,stepDataByPartition:i,title:s,yLabel:o,isJob:a,hiddenStepKeys:d}=e,[c,u]=(0,l.useState)(()=>({})),p=(0,l.useRef)(null),h=(0,l.useCallback)(e=>{let n=p.current;if(!n)return;let t=n.scales["x-axis-0"];if(!t)return;let{offsetX:r,offsetY:i}=e;if(!("click"===e.type&&r<=n.chartArea.right&&r>=n.chartArea.left&&i<=n.chartArea.bottom&&i>=n.chartArea.top)||!e.shiftKey)return;let s=t.getValueForPixel(r),o=n.data.labels[s];u(e=>({...e,[o]:!e[o]}))},[]),x=(0,l.useMemo)(()=>({title:s?{display:!0,text:s}:void 0,animation:!1,scales:o?{y:{id:"y",title:{display:!0,text:o}},x:{id:"x",title:{display:!0,text:s}}}:void 0,plugins:{legend:{display:!1,onClick:(e,n)=>{}}},onClick:h,maintainAspectRatio:!1}),[h,s,o]),{jobData:m,stepData:j}=(()=>{let e=[],r={};return n.forEach(n=>{let s=!!c[n];t&&e.push({x:n,y:s?void 0:t[n]}),i&&Object.entries(i[n]||{}).forEach(e=>{let[t,i]=e;(null==d||!d.includes(t))&&i&&(r[t]=[...r[t]||[],{x:n,y:s?void 0:i}])})}),Object.keys(r).forEach(e=>{r[e]=tU(n,r[e])}),{jobData:e,stepData:r}})(),g=a?"Total job":"Total pipeline",f={labels:n,datasets:[...!t||d&&d.includes(g)?[]:[{label:g,data:m,borderColor:R.im(),backgroundColor:R.Bj()}],...Object.keys(j).map(e=>({label:e,data:j[e],borderColor:(0,tT.kU)(e),backgroundColor:R.Bj()}))]};return(0,r.jsx)(tz,{children:(0,r.jsx)(tI.x1,{data:()=>f,height:300,options:x,ref:p})})},tU=(e,n)=>{let t={};return n.forEach(e=>{t[e.x]=e.y}),e.map(e=>({x:e,y:t[e]}))},tz=I.ZP.div.withConfig({componentId:"sc-d897c5f0-0"})(["display:flex;color:",";padding:24px 12px;text-decoration:none;"],R.$());var tD=t(32996),tM=t(71291),tH=t(95590),tJ=t(9875),tq=t(23399);function tQ(){let e=(0,d._)(["\n  query PartitionsStatusQuery(\n    $partitionSetName: String!\n    $repositorySelector: RepositorySelector!\n  ) {\n    partitionSetOrError(\n      repositorySelector: $repositorySelector\n      partitionSetName: $partitionSetName\n    ) {\n      ... on PartitionSet {\n        id\n        ...OpJobPartitionSet\n      }\n      ... on PartitionSetNotFoundError {\n        message\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  fragment OpJobPartitionSet on PartitionSet {\n    id\n    name\n    pipelineName\n    partitionsOrError {\n      ... on Partitions {\n        results {\n          name\n        }\n      }\n      ...PythonErrorFragment\n    }\n    partitionStatusesOrError {\n      ... on PartitionStatuses {\n        results {\n          id\n          ...OpJobPartitionStatus\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  fragment OpJobPartitionStatus on PartitionStatus {\n    id\n    partitionName\n    runStatus\n    runDuration\n  }\n\n  ","\n"]);return tQ=function(){return e},e}let tV=e=>{let{partitionSetName:n,repoAddress:t}=e,o=(0,Z.$)(t),l=(0,c.a)(tK,{variables:{partitionSetName:n,repositorySelector:o}}),{data:a,loading:d}=l;if((0,y.Hu)(l,"PartitionsStatusQuery"),!a)return d?(0,r.jsx)(i.x,{padding:32,flex:{direction:"column",alignItems:"center"},children:(0,r.jsxs)(i.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,r.jsx)(k.$,{purpose:"body-text"}),(0,r.jsx)("div",{children:"Loading partitions…"})]})}):(0,r.jsx)(i.x,{padding:32,children:(0,r.jsx)(s.t,{icon:"error",title:"An error occurred",description:"An unexpected error occurred."})});let{partitionSetOrError:u}=a;if("PartitionSetNotFoundError"===u.__typename)return(0,r.jsx)(i.x,{padding:32,children:(0,r.jsx)(s.t,{icon:"search",title:"Partition set not found",description:u.message})});if("PythonError"===u.__typename)return(0,r.jsx)(i.x,{padding:32,children:(0,r.jsx)(tq.T9,{error:u})});if("PythonError"===u.partitionsOrError.__typename)return(0,r.jsx)(i.x,{padding:32,children:(0,r.jsx)(tq.T9,{error:u.partitionsOrError})});let p=u.partitionsOrError.results.map(e=>{let{name:n}=e;return n});return(0,r.jsx)(tG,{partitionNames:p,partitionSet:u,repoAddress:t})};function tB(e){return(0,l.useMemo)(()=>{let n={},t={};return e.forEach(e=>{if(!e.runsLoaded||0===e.runs.length)return;let r=e.runs.sort((e,n)=>e.startTime||0-(n.startTime||0)),i=r[r.length-1];n[e.name]={},t[e.name]=(null==i?void 0:i.endTime)&&(null==i?void 0:i.startTime)?i.endTime-i.startTime:void 0,i.stepStats.forEach(t=>{n[e.name][t.stepKey]=[t.endTime&&t.startTime?t.endTime-t.startTime:void 0]})}),{runDurationData:t,stepDurationData:n}},[e])}let tG=e=>{let{partitionSet:n,partitionNames:t,repoAddress:s}=e,{permissions:{canLaunchPartitionBackfill:o},disabledReasons:a}=(0,n$.xz)(s.location),{viewport:d,containerProps:c}=(0,td.S)(),[u,p]=(0,l.useState)(60),[x,m]=(0,l.useState)(0),[j,g]=(0,l.useState)(!1),[f,y]=(0,l.useState)(!1),[S,b]=(0,l.useState)(!1),v=(0,Z.$)(s),[P,N]=(0,l.useState)(0),w=(0,tJ.T)({partitionSetName:n.name,partitionTagName:n1.H.Partition,partitionNames:t,pageSize:u,runsFilter:[],repositorySelector:v,jobName:n.pipelineName,offset:x,skipQuery:!j});(0,l.useEffect)(()=>{d.width&&!j&&p((0,tM.Rc)(d.width-tH.AQ))},[d.width,j,p]);let C=j?t.slice(Math.max(0,t.length-1-x-u),t.length-x):t,A=tB(w).stepDurationData,E=(0,l.useCallback)(()=>b(!0),[]),{partitionStatusesOrError:k}=n,R=(0,l.useMemo)(()=>"PartitionStatuses"===k.__typename?k.results:[],[k]),{runStatusData:O,runDurationData:$}=(0,l.useMemo)(()=>{let e={},n={};return R.forEach(t=>{e[t.partitionName]=t.runStatus||nX.VOA.NOT_STARTED,C.includes(t.partitionName)&&(n[t.partitionName]=t.runDuration||void 0)}),{runStatusData:e,runDurationData:n}},[R,C]),F=(0,l.useMemo)(()=>({runStatusForPartitionKey:e=>O[e]}),[O]);return(0,r.jsxs)("div",{children:[(0,r.jsx)(nG.Vq,{canEscapeKeyClose:!S,canOutsideClickClose:!S,onClose:()=>y(!1),style:{width:800,zIndex:1e3},title:"Launch ".concat(n.pipelineName," backfill"),isOpen:f,children:f&&(0,r.jsx)(tO,{partitionSetName:n.name,partitionNames:t,runStatusData:O,pipelineName:n.pipelineName,onCancel:()=>y(!1),onLaunch:(e,n)=>{N(P+1),y(!1)},onSubmit:E,repoAddress:s})}),(0,r.jsxs)(i.x,{flex:{justifyContent:"space-between",direction:"row",alignItems:"center"},border:"bottom",padding:{vertical:16,horizontal:24},children:[(0,r.jsx)(h.pm,{children:"Status"}),(0,r.jsxs)(i.x,{flex:{gap:8},children:[(0,r.jsx)(nW.zx,{onClick:()=>g(!j),active:f,children:j?"Hide per-step status":"Show per-step status"}),o?(0,r.jsx)(nW.zx,{onClick:()=>y(!f),icon:(0,r.jsx)(_.JO,{name:"add_circle"}),active:f,children:"Launch backfill…"}):(0,r.jsx)(e1.u,{content:a.canLaunchPartitionBackfill,children:(0,r.jsx)(nW.zx,{icon:(0,r.jsx)(_.JO,{name:"add_circle"}),disabled:!0,children:"Launch backfill…"})})]})]}),(0,r.jsxs)(i.x,{flex:{direction:"row",alignItems:"center"},border:"bottom",padding:{left:8},children:[(0,r.jsx)(tW,{count:t.length,label:"Total partitions"}),(0,r.jsx)(tW,{count:t.filter(e=>O[e]===nX.VOA.FAILURE).length,label:"Failed partitions"}),(0,r.jsx)(tW,{count:t.filter(e=>!O[e]||O[e]===nX.VOA.NOT_STARTED).length,label:"Missing partitions"})]}),(0,r.jsxs)(i.x,{padding:{vertical:16,horizontal:24},children:[(0,r.jsx)("div",{...c,children:(0,r.jsx)(tD.b,{partitionNames:t,health:F,selected:j?C:void 0,selectionWindowSize:u,onClick:e=>{let n=t.length-1;m(Math.min(n,Math.max(0,n-t.indexOf(e)-.5*u))),j||g(!0)},tooltipMessage:"Click to view per-step status"})}),j?(0,r.jsx)(i.x,{margin:{top:16},children:(0,r.jsx)(tM.ux,{partitionNames:t,partitions:w,pipelineName:n.pipelineName,repoAddress:s,setPageSize:p,offset:x,setOffset:m})}):null]}),(0,r.jsx)(i.x,{padding:{horizontal:24,vertical:16},border:"top-and-bottom",children:(0,r.jsx)(h.pm,{children:"Run duration"})}),(0,r.jsx)(i.x,{margin:24,children:(0,r.jsx)(tL,{isJob:!0,title:"Execution time by partition",yLabel:"Execution time (secs)",partitionNames:j?C:t,jobDataByPartition:$})}),j?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.x,{padding:{horizontal:24,vertical:16},children:(0,r.jsx)(h.pm,{children:"Step duration"})}),(0,r.jsx)(i.x,{margin:24,children:(0,r.jsx)(tL,{isJob:!0,title:"Execution time by partition",yLabel:"Execution time (secs)",partitionNames:C,stepDataByPartition:A})})]}):null,(0,r.jsx)(i.x,{padding:{horizontal:24,vertical:16},border:"top-and-bottom",style:{marginBottom:-1},children:(0,r.jsx)(h.pm,{children:"Backfill history"})}),(0,r.jsx)(i.x,{margin:{bottom:20},children:(0,r.jsx)(th,{partitionSetName:n.name,repositorySelector:v,partitionNames:t,refetchCounter:P})})]})},tW=e=>{let{count:n,label:t}=e;return(0,r.jsxs)(i.x,{padding:16,style:{flex:1},border:"right",children:[(0,r.jsx)("div",{style:{fontSize:18,marginBottom:4},children:(0,r.jsx)("strong",{children:n})}),(0,r.jsx)("div",{children:t})]})},tK=(0,u.Ps)(tQ(),m.B);var tZ=t(61915),tY=t(21103),tX=t(65470),t0=t(32177),t1=t(65152);let t2=e=>{let{partitionSetName:n,repoAddress:t,pipelineName:s}=e,{viewport:o,containerProps:a}=(0,td.S)(),d=(0,Z.$)(t),c=(0,tY.uc)("*",{pipelineSelector:{pipelineName:s,repositoryName:t.name,repositoryLocationName:t.location}}),u=(0,t1.mR)(c.graphAssetKeys),{total:p,missing:x,merged:m}=(0,l.useMemo)(()=>{let e=(0,tP.$G)(u.filter(e=>e.dimensions.length>0)),n=e.dimensions.map(e=>({selectedKeys:e.partitionKeys,selectedRanges:[(0,tZ.$0)(e)],dimension:e})),t=(0,tP.ju)(n,n=>e.stateForKeyIdx(n).includes(tX.yo.MISSING));return{merged:e,total:(0,t1.xD)(n),missing:t.length}},[u]),[j,g]=(0,l.useState)(60),[f,y]=(0,l.useState)(0),[S,b]=(0,l.useState)(!1);(0,l.useEffect)(()=>{o.width&&g((0,tM.Rc)(o.width-tH.AQ))},[o.width,g]);let v=m.dimensions.findIndex(tP.nv);-1===v&&(v=0);let P=m.dimensions[v]?m.dimensions[v]:null,N=(null==P?void 0:P.partitionKeys)||[],w=N.slice(Math.max(0,N.length-1-f-j),N.length-f);return(0,r.jsxs)("div",{children:[(0,r.jsxs)(i.x,{flex:{justifyContent:"space-between",direction:"row",alignItems:"center"},border:"bottom",padding:{vertical:16,horizontal:24},children:[(0,r.jsx)(h.pm,{children:"Status"}),(0,r.jsxs)(i.x,{flex:{gap:8},children:[(0,r.jsx)(nW.zx,{onClick:()=>b(!S),children:S?"Hide per-asset status":"Show per-asset status"}),(0,r.jsx)(t0.XE,{scope:{all:c.graphQueryItems.map(e=>e.node),skipAllTerm:!0},preferredJobName:s})]})]}),(0,r.jsxs)(i.x,{flex:{direction:"row",alignItems:"center"},border:"bottom",padding:{left:8},children:[(0,r.jsx)(tW,{count:p,label:"Total partitions"}),(0,r.jsx)(tW,{count:x,label:"Missing partitions"})]}),(0,r.jsxs)(i.x,{padding:{vertical:16,horizontal:24},children:[(0,r.jsx)("div",{...a,children:(0,r.jsx)(tD.b,{partitionNames:N,splitPartitions:!!P&&!(0,tP.nv)(P),health:{ranges:m.rangesForSingleDimension(v)},selected:w,selectionWindowSize:j,tooltipMessage:"Click to view per-asset status",onClick:e=>{let n=N.length-1;y(Math.min(n,Math.max(0,n-N.indexOf(e)-.5*j)))}})}),S&&P&&(0,r.jsx)(i.x,{margin:{top:16},children:(0,r.jsx)(tM.ac,{rangeDimensionIdx:v,rangeDimension:P,assetHealth:u,assetQueryItems:c.graphQueryItems,pipelineName:s,setPageSize:g,offset:f,setOffset:y})})]}),S&&(0,r.jsx)(t4,{repositorySelector:d,pipelineName:s,partitionSetName:n,multidimensional:((null==m?void 0:m.dimensions.length)||0)>1,dimensionName:P?P.name:null,dimensionKeys:N,selected:w,offset:f,pageSize:j}),(0,r.jsx)(i.x,{padding:{horizontal:24,vertical:16},border:"top-and-bottom",style:{marginBottom:-1},children:(0,r.jsx)(h.pm,{children:"Backfill history"})}),(0,r.jsx)(i.x,{margin:{bottom:20},children:(0,r.jsx)(th,{partitionSetName:n,repositorySelector:d,partitionNames:N,refetchCounter:1})})]})},t4=e=>{let{repositorySelector:n,dimensionKeys:t,dimensionName:s,selected:o,pageSize:l,partitionSetName:a,multidimensional:d,pipelineName:c,offset:u}=e,{stepDurationData:p,runDurationData:x}=tB((0,tJ.T)({partitionSetName:a,partitionTagName:d?"".concat(n1.H.Partition,"/").concat(s):n1.H.Partition,partitionNames:t,repositorySelector:n,pageSize:l,runsFilter:[],jobName:c,offset:u,skipQuery:!s}));return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.x,{padding:{horizontal:24,vertical:16},border:"top-and-bottom",children:(0,r.jsx)(h.pm,{children:"Run duration"})}),(0,r.jsx)(i.x,{margin:24,children:(0,r.jsx)(tL,{isJob:!0,title:"Execution time by partition",yLabel:"Execution time (secs)",partitionNames:o,jobDataByPartition:x})}),(0,r.jsx)(i.x,{padding:{horizontal:24,vertical:16},border:"top-and-bottom",children:(0,r.jsx)(h.pm,{children:"Step durations"})}),(0,r.jsx)(i.x,{margin:24,children:(0,r.jsx)(tL,{isJob:!0,title:"Execution time by partition",yLabel:"Execution time (secs)",partitionNames:o,stepDataByPartition:p})})]})};function t3(){let e=(0,d._)(["\n  query AssetJobPartitionSetsQuery(\n    $pipelineName: String!\n    $repositoryName: String!\n    $repositoryLocationName: String!\n  ) {\n    partitionSetsOrError(\n      pipelineName: $pipelineName\n      repositorySelector: {\n        repositoryName: $repositoryName\n        repositoryLocationName: $repositoryLocationName\n      }\n    ) {\n      ... on PipelineNotFoundError {\n        message\n      }\n      ... on PartitionSets {\n        results {\n          id\n          name\n          mode\n          solidSelection\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n"]);return t3=function(){return e},e}let t6=(0,u.Ps)(t3(),m.B),t8=e=>{let{repoAddress:n}=e,t=(0,a.UO)(),{pipelinePath:o}=t,d=(0,v.p3)(o),{pipelineName:u}=d,p=(0,ei.Ux)(n),h=null==p?void 0:p.repository.pipelines.find(e=>e.name===u),x=!!(null==h?void 0:h.isJob),m=!!(null==h?void 0:h.isAssetJob);(0,nD.b)(d,x),(0,v.Bj)(t);let{partitionSet:j,partitionSetError:g}=function(e,n){let t=(0,c.a)(t6,{skip:!n,variables:{repositoryLocationName:e.location,repositoryName:e.name,pipelineName:n}});(0,y.Hu)(t,"AssetJobPartitionSetsQuery",{skip:!n});let{data:r}=t;return(0,l.useMemo)(()=>({partitionSet:(null==r?void 0:r.partitionSetsOrError.__typename)==="PartitionSets"?r.partitionSetsOrError.results[0]:void 0,partitionSetError:(null==r?void 0:r.partitionSetsOrError.__typename)==="PipelineNotFoundError"||(null==r?void 0:r.partitionSetsOrError.__typename)==="PythonError"?r.partitionSetsOrError:void 0}),[r])}(n,u);return j||g?g?(0,r.jsx)(i.x,{padding:{vertical:64},children:(0,r.jsx)(s.t,{icon:"error",title:"Partitions",description:g.message})}):j?m?(0,r.jsx)(t2,{pipelineName:u,partitionSetName:j.name,repoAddress:n}):(0,r.jsx)(tV,{partitionSetName:j.name,repoAddress:n}):(0,r.jsx)(i.x,{padding:{vertical:64},children:(0,r.jsx)(s.t,{icon:"error",title:"Partitions",description:(0,r.jsxs)("div",{children:["There are no partition sets defined for ",x?"job":"pipeline"," ",(0,r.jsx)("code",{children:u}),"."]})})}):(0,r.jsx)(P.T,{purpose:"page"})},t9=e=>{let{repoAddress:n}=e,{FallthroughRoute:t}=(0,l.useContext)(n_.v);return(0,r.jsxs)("div",{style:{display:"flex",flexDirection:"column",minWidth:0,width:"100%",height:"100%"},children:[(0,r.jsx)(ta,{repoAddress:n}),(0,r.jsxs)(a.rs,{children:[(0,r.jsx)(nm.A,{path:"/locations/:repoPath/pipeline_or_job/:pipelinePath(/?.*)",children:(0,r.jsx)(nF,{repoAddress:n})}),(0,r.jsx)(nm.A,{path:["/locations/:repoPath/pipelines/:pipelinePath/playground/setup","/locations/:repoPath/jobs/:pipelinePath/playground/setup"],children:(0,r.jsx)(nQ,{repoAddress:n})}),(0,r.jsx)(nm.A,{path:["/locations/:repoPath/pipelines/:pipelinePath/playground/setup-from-run/:runId","/locations/:repoPath/jobs/:pipelinePath/playground/setup-from-run/:runId"],children:(0,r.jsx)(nH,{repoAddress:n})}),(0,r.jsx)(nm.A,{path:["/locations/:repoPath/pipelines/:pipelinePath/playground","/locations/:repoPath/jobs/:pipelinePath/playground"],children:(0,r.jsx)(nT.H,{repoAddress:n})}),(0,r.jsx)(nm.A,{path:["/locations/:repoPath/pipelines/:pipelinePath/runs/:runId","/locations/:repoPath/jobs/:pipelinePath/runs/:runId"],render:e=>(0,r.jsx)(a.l_,{to:"/runs/".concat(e.match.params.runId)})}),(0,r.jsx)(nm.A,{path:["/locations/:repoPath/pipelines/:pipelinePath/runs","/locations/:repoPath/jobs/:pipelinePath/runs"],children:(0,r.jsx)(nI.G,{repoAddress:n})}),(0,r.jsx)(nm.A,{path:["/locations/:repoPath/pipelines/:pipelinePath/partitions","/locations/:repoPath/jobs/:pipelinePath/partitions"],children:(0,r.jsx)(t8,{repoAddress:n})}),(0,r.jsx)(nm.A,{path:["/locations/:repoPath/pipelines/:pipelinePath/overview","/locations/:repoPath/jobs/:pipelinePath/overview"],render:e=>(0,r.jsx)(a.l_,{to:"/locations/".concat(e.match.url.replace(/\/overview$/i,""))})}),(0,r.jsx)(nm.A,{path:["/locations/:repoPath/pipelines/(/?.*)","/locations/:repoPath/jobs/(/?.*)"],children:(0,r.jsx)(t,{repoAddress:n})})]})]})};var t5=t(15686),t7=t(71662),re=t(34147),rn=t(581);function rt(){let e=(0,d._)(["\n  query SchedulePartitionStatusQuery($scheduleSelector: ScheduleSelector!) {\n    scheduleOrError(scheduleSelector: $scheduleSelector) {\n      ... on Schedule {\n        id\n        ...SchedulePartitionStatusFragment\n      }\n    }\n  }\n\n  fragment SchedulePartitionStatusFragment on Schedule {\n    id\n    mode\n    pipelineName\n    partitionSet {\n      id\n      name\n      partitionStatusesOrError {\n        ... on PartitionStatuses {\n          results {\n            id\n            ...SchedulePartitionStatusResult\n          }\n        }\n      }\n    }\n  }\n\n  fragment SchedulePartitionStatusResult on PartitionStatus {\n    id\n    partitionName\n    runStatus\n  }\n"]);return rt=function(){return e},e}let rr=["Succeeded","Failed","Missing","Pending"],ri=e=>{switch(e.runStatus){case null:return"Missing";case nX.VOA.SUCCESS:return"Succeeded";case nX.VOA.FAILURE:case nX.VOA.CANCELED:case nX.VOA.CANCELING:return"Failed";case nX.VOA.MANAGED:case nX.VOA.QUEUED:case nX.VOA.NOT_STARTED:case nX.VOA.STARTED:case nX.VOA.STARTING:return"Pending";default:return(0,tT.UT)(e.runStatus)}},rs=(0,l.memo)(e=>{let{repoAddress:n,schedule:t}=e,i=(0,ei.Ux)(n),{name:s,partitionSet:o,pipelineName:a}=t,d=null==o?void 0:o.name,c=(0,ei.E8)(i,a),u=(0,l.useMemo)(()=>{let e=d?eA().stringify({partitionSet:d},{addQueryPrefix:!0}):"";return"/".concat(c?"jobs":"pipelines","/").concat(a,"/partitions").concat(e)},[d,c,a]),p=(0,N.$U)(n,u),[x,{data:m,loading:j}]=(0,es.t)(rl,{variables:{scheduleSelector:{scheduleName:s,repositoryName:n.name,repositoryLocationName:n.location}}}),g=(0,l.useCallback)(()=>x(),[x]);return(0,r.jsxs)(re.Z,{direction:"column",spacing:4,children:[(0,r.jsx)(F.rU,{to:p,children:d}),(()=>{if(j)return(0,r.jsx)(h.YS,{style:{color:R.$()},children:"Loading…"});if(!m)return(0,r.jsx)(nB.Z,{onClick:g,children:(0,r.jsx)(h.YS,{children:"Show coverage"})});let e=m.scheduleOrError;return"Schedule"===e.__typename?(0,r.jsx)(ro,{schedule:e,partitionURL:p}):(0,r.jsx)(h.YS,{style:{color:R.Yn()},children:"Partition set not found!"})})()]})}),ro=e=>{let{schedule:n,partitionURL:t}=e,{partitionSet:i}=n;if(!i||"PartitionStatuses"!==i.partitionStatusesOrError.__typename)return(0,r.jsx)("span",{style:{color:R.$()},children:"None"});let s=i.partitionStatusesOrError.results,o={};return s.forEach(e=>{let n=ri(e);o[n]=[...o[n]||[],e]}),(0,r.jsx)(rn.Jy,{children:(0,r.jsx)("tbody",{children:rr.map(e=>e in o?(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{style:{width:"100px"},children:e}),(0,r.jsx)("td",{children:"Failed"===e||"Missing"===e?(0,r.jsx)(F.rU,{to:"".concat(t,"?showFailuresAndGapsOnly=true"),style:{color:R.Ep()},children:o[e].length}):o[e].length})]},e):null)})})},rl=(0,u.Ps)(rt());var ra=t(99417);let rd=e=>{let{repoAddress:n,schedule:t}=e,{permissions:{canStartSchedule:i,canStopRunningSchedule:s}}=(0,n$.xz)(n.location),{name:o}=t,l={...(0,Z.$)(n),scheduleName:o},[a,{loading:d}]=(0,tm.D)(ra.E1,{onCompleted:ra.JH}),c=i&&s,u=c?'In code, a default status for "'.concat(o,'" has been set to "').concat(t.defaultStatus,'". Click here to reset the schedule status to track the status set in code.'):n$.Qr;return(0,r.jsx)(e1.u,{content:u,display:"flex",children:(0,r.jsx)(nW.zx,{disabled:d||!c,onClick:()=>{a({variables:{scheduleSelector:l}})},children:"Reset schedule status"})})};var rc=t(89516),ru=t(33847),rp=t(55010),rh=t(60603),rx=t(49035),rm=t(76562),rj=t(68903),rg=t(24608);function rf(){let e=(0,d._)(["\n  query getSchedule(\n    $scheduleSelector: ScheduleSelector!\n    $startTimestamp: Float\n    $ticksAfter: Int\n    $ticksBefore: Int\n  ) {\n    scheduleOrError(scheduleSelector: $scheduleSelector) {\n      ... on PythonError {\n        message\n        stack\n      }\n      ... on Schedule {\n        id\n        name\n        potentialTickTimestamps(\n          startTimestamp: $startTimestamp\n          upperLimit: $ticksAfter\n          lowerLimit: $ticksBefore\n        )\n      }\n    }\n  }\n"]);return rf=function(){return e},e}function ry(){let e=(0,d._)(["\n  mutation ScheduleDryRunMutation($selectorData: ScheduleSelector!, $timestamp: Float) {\n    scheduleDryRun(selectorData: $selectorData, timestamp: $timestamp) {\n      ...PythonErrorFragment\n      ... on DryRunInstigationTick {\n        timestamp\n        evaluationResult {\n          runRequests {\n            ...RunRequestFragment\n          }\n          skipReason\n          error {\n            ...PythonErrorFragment\n          }\n        }\n      }\n      ... on ScheduleNotFoundError {\n        scheduleName\n      }\n    }\n  }\n  ","\n  ","\n"]);return ry=function(){return e},e}let rS=navigator.language,rb=e=>(0,r.jsx)(nG.Vq,{...e,style:{width:"70vw",display:"flex"},title:(0,r.jsxs)(i.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,r.jsx)(_.JO,{name:"schedule"}),(0,r.jsx)("span",{children:e.name})]}),children:(0,r.jsx)(rv,{...e})}),rv=e=>{let{repoAddress:n,name:t,onClose:s,jobName:o}=e,[a,d]=(0,l.useState)(),{data:u}=(0,c.a)(rP,{variables:{scheduleSelector:{repositoryLocationName:n.location,repositoryName:n.name,scheduleName:t}}}),{timezone:[p]}=(0,l.useContext)(rj.JB),[h,x]=(0,l.useState)(!1),m=(0,l.useRef)(null),{viewport:j,containerProps:g}=(0,td.S)(),[f,y]=(0,l.useState)(!1),S=(0,l.useMemo)(()=>{var e;if(f)return(0,r.jsx)(rN,{repoAddress:n,name:t,timestamp:m.current.ts,jobName:o});if(!u)return(0,r.jsx)(i.x,{padding:{vertical:48},flex:{alignItems:"center",justifyContent:"center"},children:(0,r.jsx)(k.$,{purpose:"page"})});if("PythonError"===u.scheduleOrError.__typename||"ScheduleNotFoundError"===u.scheduleOrError.__typename)return(0,r.jsx)("div",{});let s=u.scheduleOrError.potentialTickTimestamps.map(e=>({ts:e,label:(0,rg.j)({timestamp:{unix:e},locale:rS,timezone:p,timeFormat:{showTimezone:!0}})}));return m.current=a||s[0]||null,(0,r.jsxs)(rC,{children:[(0,r.jsx)(rE,{children:"Select a mock evaluation time"}),(0,r.jsx)(rp.J,{isOpen:h,position:"bottom-left",fill:!0,content:(0,r.jsx)(rh.v2,{style:{maxHeight:"400px",overflow:"scroll",width:"".concat(j.width,"px")},children:s.map(e=>(0,r.jsx)(rh.sN,{text:(0,r.jsx)("div",{"data-testid":(0,tS.N)("tick-".concat(e.ts)),children:e.label}),onClick:()=>{d(e),x(!1)}},e.ts))}),children:(0,r.jsx)("div",{...g,children:(0,r.jsx)(nW.zx,{style:{flex:1},rightIcon:(0,r.jsx)(_.JO,{name:"arrow_drop_down"}),onClick:()=>x(e=>!e),"data-testid":(0,tS.N)("tick-selection"),children:null===(e=m.current)||void 0===e?void 0:e.label})})})]})},[a,g,u,h,o,t,n,f,p,j.width]),b=(0,l.useMemo)(()=>f?(0,r.jsx)(nW.zx,{onClick:s,children:"Close"}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(nW.zx,{onClick:s,children:"Cancel"}),(0,r.jsx)(nW.zx,{"data-testid":(0,tS.N)("evaluate"),intent:"primary",onClick:()=>{y(!0)},children:"Evaluate"})]}),[s,f]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(nG.a7,{children:(0,r.jsx)("div",{style:{minHeight:"300px"},children:S})}),b?(0,r.jsx)(nG.cN,{topBorder:!0,children:b}):null]})},rP=(0,u.Ps)(rf()),rN=e=>{var n,t,o,a;let{repoAddress:d,name:c,timestamp:u,jobName:p}=e,{timezone:[m]}=(0,l.useContext)(rj.JB),[j]=(0,tm.D)(rw,(0,l.useMemo)(()=>({variables:{selectorData:{...(0,Z.$)(d),scheduleName:c},timestamp:u}}),[c,d,u])),[g,f]=(0,l.useState)(null);if((0,l.useEffect)(()=>{j().then(e=>{f(()=>e)})},[j]),!g||!g.data)return(0,r.jsx)(i.x,{padding:32,flex:{justifyContent:"center",alignItems:"center"},children:(0,r.jsx)(k.$,{purpose:"page"})});let y=(null==g?void 0:null===(n=g.data)||void 0===n?void 0:n.scheduleDryRun.__typename)==="DryRunInstigationTick"?null==g?void 0:null===(t=g.data)||void 0===t?void 0:t.scheduleDryRun.evaluationResult:null,S=null==y?void 0:null===(o=y.runRequests)||void 0===o?void 0:o.length,b=null==y?void 0:y.error;return(0,r.jsxs)(i.x,{flex:{direction:"column",gap:8},children:[(0,r.jsx)(i.x,{children:(0,r.jsxs)(rA,{children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(h.pm,{children:"Result"}),(0,r.jsx)(i.x,{flex:{grow:1,alignItems:"center"},children:(0,r.jsx)("div",{children:b?(0,r.jsx)(x.V,{intent:"danger",children:"Failed"}):S?(0,r.jsxs)(x.V,{intent:"success",children:[S," run requests"]}):(0,r.jsx)(x.V,{intent:"warning",children:"Skipped"})})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(h.pm,{children:"Tick"}),(0,r.jsx)(i.x,{flex:{grow:1,alignItems:"center"},children:(0,r.jsx)(h.fv,{children:(0,rg.j)({timestamp:{unix:u},locale:rS,timezone:m,timeFormat:{showTimezone:!0}})})})]})]})}),g.data&&y?y.error?(0,r.jsx)(tq.T9,{error:y.error}):(null===(a=y.runRequests)||void 0===a?void 0:a.length)?(0,r.jsx)(rx.k,{runRequests:y.runRequests,repoAddress:d,isJob:!0,jobName:p,name:c}):(0,r.jsxs)("div",{children:[(0,r.jsx)(h.pm,{children:"Skip Reason"}),(0,r.jsx)("div",{children:(null==y?void 0:y.skipReason)||"No skip reason was output"})]}):(0,r.jsx)(s.t,{title:"An unknown error occurred",description:(0,r.jsxs)("span",{children:["File an issue on"," ",(0,r.jsx)("a",{href:"https://github.com/dagster-io/dagster",target:"_blank",rel:"noreferrer",children:"Github"})," ","if you think this is a bug"]}),icon:"error"})]})},rw=(0,u.Ps)(ry(),m.B,rm.s),rC=I.ZP.div.withConfig({componentId:"sc-6b775bda-0"})(["button{width:100%;display:flex;justify-content:space-between;}"]),rA=I.ZP.div.withConfig({componentId:"sc-6b775bda-1"})(["display:grid;grid-template-columns:repeat(2,1fr);padding-bottom:12px;border-bottom:1px solid ",";margin-bottom:12px;","{padding-bottom:4px;display:block;}pre{margin:0;}button{margin-top:4px;}"],R.wL(),h.pm),rE=I.ZP.div.withConfig({componentId:"sc-6b775bda-2"})(["padding-bottom:2px;"]);var rk=t(58905);let rR={showSeconds:!0,showTimezone:!0},rO=e=>{let{repoAddress:n,schedule:t,refreshState:s}=e,{cronSchedule:o,executionTimezone:a,futureTicks:d,name:c,partitionSet:u,pipelineName:m}=t,{scheduleState:j}=t,{status:g,ticks:y}=j,S=y.length>0?y[0]:null,b=g===nX.ynu.RUNNING,v=(0,ei.Ux)(n),P=(0,ei.E8)(v,m),[N,w]=(0,l.useState)(!1);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(p.m,{title:(0,r.jsx)(h.X6,{children:c}),tags:(0,r.jsxs)(x.V,{icon:"schedule",children:["Schedule in ",(0,r.jsx)(f.b,{repoAddress:n})]}),right:(0,r.jsxs)(i.x,{flex:{direction:"row",alignItems:"center",gap:8},children:[(0,r.jsx)(Y.xi,{refreshState:s}),(0,r.jsx)(nW.zx,{onClick:()=>{w(!0)},children:"Test Schedule"})]})}),(0,r.jsx)(rb,{isOpen:N,onClose:()=>{w(!1)},name:t.name,repoAddress:n,jobName:m},N?"1":"0"),(0,r.jsx)(nY.fJ,{children:(0,r.jsxs)("tbody",{children:[t.description?(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Description"}),(0,r.jsx)("td",{children:t.description})]}):null,(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Latest tick"}),(0,r.jsx)("td",{children:S?(0,r.jsxs)(re.Z,{direction:"row",spacing:8,alignItems:"center",children:[(0,r.jsx)(n3.v,{timestamp:S.timestamp,timezone:a,timeFormat:rR}),(0,r.jsx)(rk.a,{tick:S})]}):"Schedule has never run"})]}),d.results[0]&&b&&(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Next tick"}),(0,r.jsx)("td",{children:(0,r.jsx)(n3.v,{timestamp:d.results[0].timestamp,timezone:a,timeFormat:rR})})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:P?"Job":"Pipeline"}),(0,r.jsx)("td",{children:(0,r.jsx)(ru.h,{pipelineName:m,pipelineHrefContext:n,isJob:P})})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:(0,r.jsx)(i.x,{flex:{alignItems:"center"},style:{height:"32px"},children:"Running"})}),(0,r.jsx)("td",{children:(0,r.jsxs)(i.x,{flex:{direction:"row",gap:12,alignItems:"center"},style:{height:"32px"},children:[(0,r.jsx)(te.M,{repoAddress:n,schedule:t}),t.canReset&&(0,r.jsx)(rd,{repoAddress:n,schedule:t})]})})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Partition set"}),(0,r.jsx)("td",{children:u?(0,r.jsx)(rs,{schedule:t,repoAddress:n}):"None"})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Schedule"}),(0,r.jsx)("td",{children:o?(0,r.jsxs)(re.Z,{direction:"row",spacing:8,children:[(0,r.jsx)("span",{children:(0,rc.A)(o,a||"UTC")}),(0,r.jsxs)(h.EK,{children:["(",o,")"]})]}):(0,r.jsx)("div",{children:"—"})})]}),a?(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Execution timezone"}),(0,r.jsx)("td",{children:a})]}):null]})})]})};function r_(){let e=(0,d._)(["\n  fragment ScheduleFragment on Schedule {\n    id\n    name\n    cronSchedule\n    executionTimezone\n    pipelineName\n    solidSelection\n    mode\n    description\n    partitionSet {\n      id\n      name\n    }\n    defaultStatus\n    canReset\n    scheduleState {\n      id\n      ...InstigationStateFragment\n    }\n    futureTicks(limit: 5) {\n      results {\n        timestamp\n      }\n    }\n  }\n\n  ","\n"]);return r_=function(){return e},e}let r$=(0,u.Ps)(r_(),rn.ai);var rF=t(74050),rI=t(40782),rT=t(9790),rL=t(89010);function rU(){let e=(0,d._)(['\n  query ScheduleRootQuery($scheduleSelector: ScheduleSelector!) {\n    scheduleOrError(scheduleSelector: $scheduleSelector) {\n      ... on Schedule {\n        id\n        ...ScheduleFragment\n      }\n      ... on ScheduleNotFoundError {\n        message\n      }\n      ...PythonErrorFragment\n    }\n    instance {\n      id\n      daemonHealth {\n        id\n        daemonStatus(daemonType: "SCHEDULER") {\n          id\n          healthy\n        }\n      }\n      ...InstanceHealthFragment\n    }\n  }\n\n  ',"\n  ","\n  ","\n"]);return rU=function(){return e},e}function rz(){let e=(0,d._)(["\n  query PreviousRunsForScheduleQuery($filter: RunsFilter, $limit: Int) {\n    pipelineRunsOrError(filter: $filter, limit: $limit) {\n      ... on Runs {\n        results {\n          id\n          ... on PipelineRun {\n            ...RunTableRunFragment\n          }\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n\n  ","\n"]);return rz=function(){return e},e}let rD=e=>{(0,j.Px)();let{repoAddress:n}=e,{scheduleName:t}=(0,a.UO)();(0,g.j)("Schedule: ".concat(t));let i={...(0,Z.$)(n),scheduleName:t},[s,o]=l.useState("ticks"),d=(0,c.a)(rH,{variables:{scheduleSelector:i},notifyOnNetworkStatusChange:!0});(0,y.Hu)(d,"ScheduleRootQuery");let u=(0,Y.C4)(d,Y.dT),p=(0,r.jsxs)(ng.mQ,{selectedTabId:s,onChange:o,children:[(0,r.jsx)(ng.OK,{id:"ticks",title:"Tick history"}),(0,r.jsx)(ng.OK,{id:"runs",title:"Run history"})]});return(0,r.jsx)(P.g,{queryResult:d,allowStaleData:!0,children:e=>{let{scheduleOrError:t,instance:i}=e;if("Schedule"!==t.__typename)return null;let o=!i.daemonHealth.daemonStatus.healthy;return(0,r.jsxs)(nj.T,{children:[(0,r.jsx)(rO,{repoAddress:n,schedule:t,refreshState:u}),o?(0,r.jsx)(rF.K,{daemonHealth:i.daemonHealth,padding:{vertical:16,horizontal:24}}):null,"ticks"===s?(0,r.jsx)(rT.H,{tabs:p,repoAddress:n,name:t.name}):(0,r.jsx)(rM,{repoAddress:n,schedule:t,tabs:p})]})}})},rM=e=>{let{repoAddress:n,schedule:t,highlightedIds:i,tabs:o}=e,l=(0,c.a)(rJ,{variables:{limit:20,filter:{tags:[{key:n1.H.ScheduleName,value:t.name},{key:n1.H.RepositoryLabelTag,value:(0,L.Wg)(n)}]}},notifyOnNetworkStatusChange:!0});(0,Y.C4)(l,Y.dT);let{data:a}=l;if(!a)return null;if("Runs"!==a.pipelineRunsOrError.__typename)return(0,r.jsx)(s.t,{icon:"error",title:"Query Error",description:a.pipelineRunsOrError.message});let d=null==a?void 0:a.pipelineRunsOrError.results;return(0,r.jsx)(rL.AL,{actionBarComponents:o,runs:d,highlightedIds:i,hideCreatedBy:!0})},rH=(0,u.Ps)(rU(),r$,m.B,rI.O),rJ=(0,u.Ps)(rz(),rL.ZZ);var rq=t(6265);let rQ=()=>{let{repoPath:e}=(0,a.UO)(),n=(0,l.useContext)(ei.C5),t=(0,nx.g)(e),{loading:o}=n;return t?n.allRepos.find(e=>e.repository.name===t.name&&e.repositoryLocation.name===t.location)||o?(0,r.jsxs)(a.rs,{children:[(0,r.jsx)(nm.A,{path:"/locations/:repoPath/resources",exact:!0,children:(0,r.jsx)(t7.g,{repoAddress:t})}),(0,r.jsx)(nm.A,{path:"/locations/:repoPath/assets",exact:!0,children:(0,r.jsx)(et,{repoAddress:t})}),(0,r.jsx)(nm.A,{path:"/locations/:repoPath/jobs",exact:!0,children:(0,r.jsx)(ev,{repoAddress:t})}),(0,r.jsx)(nm.A,{path:"/locations/:repoPath/schedules",exact:!0,children:(0,r.jsx)(ni,{repoAddress:t})}),(0,r.jsx)(nm.A,{path:"/locations/:repoPath/sensors",exact:!0,children:(0,r.jsx)(np,{repoAddress:t})}),(0,r.jsx)(nm.A,{path:"/locations/:repoPath/graphs",exact:!0,children:(0,r.jsx)(ex,{repoAddress:t})}),(0,r.jsx)(nm.A,{path:"/locations/:repoPath/ops/:name?",exact:!0,children:(0,r.jsx)(e0,{repoAddress:t})}),(0,r.jsx)(nm.A,{path:"/locations/:repoPath/graphs/(/?.*)",children:(0,r.jsx)(C,{repoAddress:t})}),(0,r.jsx)(nm.A,{path:["/locations/:repoPath/pipelines/(/?.*)","/locations/:repoPath/jobs/(/?.*)","/locations/:repoPath/pipeline_or_job/(/?.*)"],children:(0,r.jsx)(t9,{repoAddress:t})}),(0,r.jsx)(nm.A,{path:"/locations/:repoPath/schedules/:scheduleName/:runTab?",children:(0,r.jsx)(rD,{repoAddress:t})}),(0,r.jsx)(nm.A,{path:"/locations/:repoPath/sensors/:sensorName",children:(0,r.jsx)(rq.A,{repoAddress:t})}),(0,r.jsx)(nm.A,{path:"/locations/:repoPath/resources/:resourceName",children:(0,r.jsx)(t5.r,{repoAddress:t})}),(0,r.jsx)(nm.A,{path:["/locations/:repoPath/asset-groups/:groupName/list(/?.*)"],children:(0,r.jsx)(nk,{repoAddress:t,tab:"list"})}),(0,r.jsx)(nm.A,{path:["/locations/:repoPath/asset-groups/:groupName/(/?.*)","/locations/:repoPath/asset-groups/:groupName"],children:(0,r.jsx)(nk,{repoAddress:t,tab:"lineage"})}),(0,r.jsx)(nm.A,{path:["/locations/:repoPath/*","/locations/:repoPath/"],children:(0,r.jsx)(a.l_,{to:(0,N.$U)(t,"/assets")})})]}):(0,r.jsx)(i.x,{padding:{vertical:64},children:(0,r.jsx)(s.t,{icon:"error",title:"Unknown code location",description:(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{children:(0,r.jsx)("strong",{children:(0,L.Uz)(t)})}),"  is not loaded in the current workspace."]})})}):(0,r.jsx)(i.x,{padding:{vertical:64},children:(0,r.jsx)(s.t,{icon:"error",title:"Invalid code location path",description:(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{children:(0,r.jsx)("strong",{children:e})}),"  is not a valid code location path."]})})})},rV=()=>(0,r.jsx)(o.M,{children:(0,r.jsx)(a.rs,{children:(0,r.jsx)(nm.A,{path:"/locations/:repoPath",children:(0,r.jsx)(rQ,{})})})});var rB=rV}}]);
//# sourceMappingURL=9212.adc03df06724d00a.js.map